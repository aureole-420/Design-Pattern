<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:UMLLabProfile="http:///schemas/UMLLabProfile/NS/0" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" xsi:schemaLocation="http:///schemas/UMLLabProfile/NS/0 pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile-Annotation_2-UMLLabProfile">
  <uml:Model xmi:id="_frMmcLCiEeeXhtmVkHi-QA" name="MVC">
    <eAnnotations xmi:id="_gG-jgLCiEeeXhtmVkHi-QA" source="http://ns.yatta.de/umllab">
      <contents xmi:type="ecore:EAnnotation" xmi:id="_gHzC4LCiEeeXhtmVkHi-QA" source="codegen">
        <details xmi:id="_gHzC4bCiEeeXhtmVkHi-QA" key="codegenDirectory" value="/HW06/src"/>
        <details xmi:id="_in62QLCiEeeXhtmVkHi-QA" key="AssociatedSourceCode" value="/HW06/src/controller/ABCPlayerController.java;425297990/1;/HW06/src/model/ABCPlayerModel.java;1308901188/1;/HW06/src/model/IModel2ViewAdapter.java;784085113/1;/HW06/src/model/visitor/PlayMusicAlgo.java;3623334297/1;/HW06/src/model/visitor/ToStringAlgo.java;3417601606/1;/HW06/src/provided/abcParser/ABCParser.java;3897219377/1;/HW06/src/provided/music/APhraseVisitor.java;2456285939/1;/HW06/src/provided/music/Chord.java;35896074/1;/HW06/src/provided/music/DecoratorSeqList.java;227833273/1;/HW06/src/provided/music/FineToggleDecoratorSeqList.java;3225370767/1;/HW06/src/provided/music/Header.java;3456349803/1;/HW06/src/provided/music/INote.java;3583161323/1;/HW06/src/provided/music/IPhrase.java;366605851/1;/HW06/src/provided/music/IPhraseVisitor.java;3703781995/1;/HW06/src/provided/music/IPhraseVisitorCmd.java;2574507730/1;/HW06/src/provided/music/ISeqList.java;2168510769/1;/HW06/src/provided/music/MTSeqList.java;2810010473/1;/HW06/src/provided/music/NESeqList.java;1022285558/1;/HW06/src/provided/music/Note.java;3187409944/1;/HW06/src/provided/music/NoteCollection.java;1016744665/1;/HW06/src/provided/music/ToggleDecoratorSeqList.java;2539597070/1;/HW06/src/provided/music/Triplet.java;1836535983/1;/HW06/src/provided/music/Tuplet.java;2612016310/1;/HW06/src/provided/player/ISequencePlayerStatus.java;669092276/1;/HW06/src/provided/player/SequencePlayer.java;3356128105/1;/HW06/src/provided/player/SequencePlayer2.java;3992436622/1;/HW06/src/provided/token/ATokVisitor.java;76293018/1;/HW06/src/provided/token/ITokVisitor.java;152834022/1;/HW06/src/provided/token/ITokVisitorCmd.java;1454883899/1;/HW06/src/provided/token/ITokenFactory.java;3990063285/1;/HW06/src/provided/token/Token.java;2142793123/1;/HW06/src/provided/token/TokenFactory.java;4005879304/1;/HW06/src/provided/token/tokenizer/ABCTokenizer.java;3502166092/1;/HW06/src/provided/token/tokenizer/IStringTokenizer.java;2393201612/1;/HW06/src/provided/token/tokenizer/ITokenizer.java;2123229769/1;/HW06/src/provided/token/tokenizer/StringTokenizer.java;1601263969/1;/HW06/src/provided/util/ABCInstrument.java;2809014576/1;/HW06/src/provided/util/KeySignature.java;2729924029/1;/HW06/src/provided/util/ABCUtil.java;4259683412/1;/HW06/src/view/ABCPlayerGUI.java;2813049305/1;/HW06/src/view/IView2ModelAdapter.java;2046783318/1;"/>
      </contents>
    </eAnnotations>
    <elementImport xmi:id="_hkhfkLCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
    </elementImport>
    <elementImport xmi:id="_hkitsLCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#byte"/>
    </elementImport>
    <elementImport xmi:id="_hkitsbCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
    </elementImport>
    <elementImport xmi:id="_hkitsrCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
    </elementImport>
    <elementImport xmi:id="_hkits7CiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#float"/>
    </elementImport>
    <elementImport xmi:id="_hkjUwLCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
    </elementImport>
    <elementImport xmi:id="_hkjUwbCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#long"/>
    </elementImport>
    <elementImport xmi:id="_hkjUwrCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#short"/>
    </elementImport>
    <elementImport xmi:id="_hklJ8LCiEeeXhtmVkHi-QA">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
    </elementImport>
    <packagedElement xmi:type="uml:Package" xmi:id="_hk4r8LCiEeeXhtmVkHi-QA" name="java">
      <packagedElement xmi:type="uml:Package" xmi:id="_hk5TALCiEeeXhtmVkHi-QA" name="awt">
        <packagedElement xmi:type="uml:Package" xmi:id="_hn91ILCiEeeXhtmVkHi-QA" name="event">
          <packagedElement xmi:type="uml:Interface" xmi:id="_h3CL4LCiEeeXhtmVkHi-QA" name="ActionListener"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_h3DaAbCiEeeXhtmVkHi-QA" name="ActionEvent"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_h0EXcLCiEeeXhtmVkHi-QA" name="EventQueue"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2ziYLCiEeeXhtmVkHi-QA" name="BorderLayout"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h25B8bCiEeeXhtmVkHi-QA" name="Color"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hlMN8LCiEeeXhtmVkHi-QA" name="util">
        <packagedElement xmi:type="uml:Class" xmi:id="_h0J3ALCiEeeXhtmVkHi-QA" name="ArrayDeque"/>
        <packagedElement xmi:type="uml:Interface" xmi:id="_h0NhYbCiEeeXhtmVkHi-QA" name="Deque"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h1KjoLCiEeeXhtmVkHi-QA" name="Hashtable"/>
        <packagedElement xmi:type="uml:Interface" xmi:id="_h1LxwbCiEeeXhtmVkHi-QA" name="Map"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h3amYLCiEeeXhtmVkHi-QA" name="Stack"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h4Y2wLCiEeeXhtmVkHi-QA" name="Vector"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hnXYMLCiEeeXhtmVkHi-QA" name="io">
        <packagedElement xmi:type="uml:Class" xmi:id="_h2bH4LCiEeeXhtmVkHi-QA" name="BufferedReader"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2cWALCiEeeXhtmVkHi-QA" name="FileNotFoundException"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2dkIbCiEeeXhtmVkHi-QA" name="IOException"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2fZULCiEeeXhtmVkHi-QA" name="InputStream"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2gncbCiEeeXhtmVkHi-QA" name="InputStreamReader"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2icobCiEeeXhtmVkHi-QA" name="Reader"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2k44LCiEeeXhtmVkHi-QA" name="StreamTokenizer"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_h3dpsLCiEeeXhtmVkHi-QA" name="lang">
        <packagedElement xmi:type="uml:Class" xmi:id="_h3dpsbCiEeeXhtmVkHi-QA" name="Object"/>
        <packagedElement xmi:type="uml:DataType" xmi:id="_h4eWULCiEeeXhtmVkHi-QA" name="Character"/>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_hk56ELCiEeeXhtmVkHi-QA" name="model">
      <packagedElement xmi:type="uml:Package" xmi:id="_hlMN8bCiEeeXhtmVkHi-QA" name="visitor">
        <packagedElement xmi:type="uml:Class" xmi:id="_hqasMLCiEeeXhtmVkHi-QA" name="PlayMusicAlgo">
          <ownedComment xmi:id="_h7P9g7CiEeeXhtmVkHi-QA">
            <body>The parsed IPhrase object (host) delegates the processing of subpieces of a music to this algorithm.
Will be called by the host, and add the appropriate notes to the sequence plaer so that music
can be played.
@author Yuhui Tong, Yunxiang Zhang
 *</body>
          </ownedComment>
          <generalization xmi:id="_h0bj0LCiEeeXhtmVkHi-QA" general="_hq7CgLCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h41isLCiEeeXhtmVkHi-QA" name="_keySignature" visibility="private" type="_huGSULCiEeeXhtmVkHi-QA" association="_h8HgMbCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h41isbCiEeeXhtmVkHi-QA" value="null"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6ehcLCiEeeXhtmVkHi-QA" name="PlayMusicAlgo" specification="_hqchYLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6ehcbCiEeeXhtmVkHi-QA" type="_hqasMLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>super(new IPhraseVisitorCmd() { // defaultCmd for unknown host.
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				return params[1]; //return current tick
			}
		});

		// deal with ignored headers.
		String headerString = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;
		for (int i = 0; i &lt; headerString.length(); i++) {
			this.addCmd(&quot;&quot; + headerString.charAt(i), new IPhraseVisitorCmd() {
				/**
				 * {@inheritDoc}&lt;/br>
				 * params[0] player
				 * params[1] tick
				 */
				@Override
				public Object apply(String id, IPhrase host, Object... params) {
					return params[1]; // return current tick
				}
			});
		}

		// dealing with empty sequence list.
		this.addCmd(MTSeqList.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				return params[1]; // return tick.
			}
		});

		// dealing with nonempty sequence list.
		this.addCmd(NESeqList.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				NESeqList list = (NESeqList) host;
				Object stopTick = list.getFirst().execute(PlayMusicAlgo.this, params);
				return list.getRest().execute(PlayMusicAlgo.this, params[0], stopTick);
			}
		});

		// dealing with Note.
		this.addCmd(Note.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				// params[0] player
				// params[1] tick
				SequencePlayer player = (SequencePlayer) params[0];
				Note newNote = _keySignature.adjust((Note) host);
				return player.addNote(newNote, (int) params[1]); // return 
			}
		});

		// dealing with Chord (a collection of notes).
		this.addCmd(Chord.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {

				Note[] notes = ((Chord) host).getNotes();
				Object stopTick = params[1];
				for (Note note : notes) {
					// all notes played at the same time.
					stopTick = note.execute(PlayMusicAlgo.this, params);
				}
				return stopTick;
			}
		});

		// deadling with Triplet (a collection of notes played in a sequence with 2/3 duration).
		this.addCmd(Triplet.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				// params[0] player
				// params[1] tick
				// SequencePlayer player = (SequencePlayer) params[0];
				Note[] notes = ((Triplet) host).getNotes();
				Object stopTick = params[1]; //
				for (Note note : notes) {
					note.setDuration(note.getDuration() * (2.0 / 3));
					stopTick = note.execute(PlayMusicAlgo.this, params[0], stopTick);//update stoptick
				}
				return stopTick;
			}
		});

		// dealing with KeySignature.
		this.addCmd(&quot;K&quot;, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				_keySignature = new KeySignature(((Header) host).getValue());
				return params[1];// return the tick;
			}
		});

		// dealing with tempo
		this.addCmd(&quot;Q&quot;, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {

				System.out.println(params[1]);
				SequencePlayer player = (SequencePlayer) params[0];
				double defaultNotesPerQuarterNote = player.getTicksPerQuarterNote() / player.getTicksPerDefaultNote();
				int bpm = (int) ABCUtil.Singleton.parseTempo(((Header) host).getValue(), defaultNotesPerQuarterNote);
				//System.out.println(&quot;bpm: &quot; + bpm);
				player.setTempo(bpm);
				return params[1];
			}
		});

		// dealing with Default Note
		this.addCmd(&quot;L&quot;, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br>
			 * params[0] player
			 * params[1] tick
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {

				double frac = ABCUtil.Singleton.parseFraction(((Header) host).getValue());
				SequencePlayer player = (SequencePlayer) params[0];
				frac = frac * player.getTicksPerQuarterNote() * 4;
				player.setTicksPerDefaultNote((int) frac);
				// System.out.println(&quot;bpm:&quot; + player.getTempo());
				return params[1];
			}
		});

	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hqchYLCiEeeXhtmVkHi-QA" name="PlayMusicAlgo" method="_h6ehcLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hqdIcLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hqdIcbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7P9hLCiEeeXhtmVkHi-QA">
              <body>Constructor of PlayMusicAlgo</body>
            </ownedComment>
            <ownedParameter xmi:id="_hqdIcrCiEeeXhtmVkHi-QA" type="_hqasMLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hqiA8LCiEeeXhtmVkHi-QA" name="ToStringAlgo">
          <ownedComment xmi:id="_h7P9hbCiEeeXhtmVkHi-QA">
            <body>The visitor algorithm that display the string expression of IPhrase object. 
@author Yuhui Tong, Yunxiang Zhang
 *</body>
          </ownedComment>
          <generalization xmi:id="_h0cx8LCiEeeXhtmVkHi-QA" general="_hq7CgLCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6ehcrCiEeeXhtmVkHi-QA" name="ToStringAlgo" specification="_hqjPELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6ehc7CiEeeXhtmVkHi-QA" type="_hqiA8LCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>// non empty list case
		this.addCmd(NESeqList.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br> 
			 * return the string expression of a non empty sequence list.
			 * params[0] is &quot;{ _first&quot; -- first item is specially treated.
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				// TODO Auto-generated method stub
				NESeqList list = (NESeqList) host;
				return list.getRest().execute(ToStringAlgo.this, params[0] + &quot;, &quot; + list.getFirst());
			}
		});

		// empty list case
		this.addCmd(MTSeqList.ID, new IPhraseVisitorCmd() {
			/**
			 * {@inheritDoc}&lt;/br> 
			 * return the string expression of an empty sequence list.
			 */
			@Override
			public Object apply(String id, IPhrase host, Object... params) {
				return params[0] + &quot;}&quot;;
			}
		});
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hqjPELCiEeeXhtmVkHi-QA" name="ToStringAlgo" method="_h6ehcrCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hqj2ILCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hqj2IbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_hqj2IrCiEeeXhtmVkHi-QA" type="_hqiA8LCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8HgMbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8HgMrCiEeeXhtmVkHi-QA _h41isLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8HgMrCiEeeXhtmVkHi-QA" name="" type="_hqasMLCiEeeXhtmVkHi-QA" association="_h8HgMbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_hqFVALCiEeeXhtmVkHi-QA" name="ABCPlayerModel">
        <ownedComment xmi:id="_h7PWcrCiEeeXhtmVkHi-QA">
          <body>The model of ABCMusicPlayer
@author Yuhui Tong, Yunxiang Zhang
 *</body>
        </ownedComment>
        <ownedAttribute xmi:id="_h4vcEbCiEeeXhtmVkHi-QA" name="_parser" visibility="private" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8D10LCiEeeXhtmVkHi-QA"/>
        <ownedAttribute xmi:id="_h4wDIbCiEeeXhtmVkHi-QA" name="_musicPhrase" visibility="private" type="_hrqCULCiEeeXhtmVkHi-QA" association="_h8Ec4bCiEeeXhtmVkHi-QA"/>
        <ownedAttribute xmi:id="_h4wqMbCiEeeXhtmVkHi-QA" name="_players" visibility="private" type="_h0NhYbCiEeeXhtmVkHi-QA" association="_h8FrAbCiEeeXhtmVkHi-QA"/>
        <ownedAttribute xmi:id="_h40UkbCiEeeXhtmVkHi-QA" name="_model2ViewAdpt" visibility="private" type="_hqXB0LCiEeeXhtmVkHi-QA" association="_h8G5ILCiEeeXhtmVkHi-QA"/>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6cFMLCiEeeXhtmVkHi-QA" name="ABCPlayerModel" specification="_h0TA8LCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6cFMbCiEeeXhtmVkHi-QA" name="_adapter" type="_hqXB0LCiEeeXhtmVkHi-QA"/>
          <ownedParameter xmi:id="_h6cFMrCiEeeXhtmVkHi-QA" type="_hqFVALCiEeeXhtmVkHi-QA" direction="return"/>
          <language>java</language>
          <body>_players = new ArrayDeque&lt;SequencePlayer>();
		this._model2ViewAdpt = _adapter;
		NESeqList.setToStringAlgo(new ToStringAlgo());
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6csQLCiEeeXhtmVkHi-QA" name="loadABCFile" specification="_hqKNgLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6csQbCiEeeXhtmVkHi-QA" name="filename">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <language>java</language>
          <body>_model2ViewAdpt.displayFileContent(ABCUtil.Singleton.getFileContents(fixPath(filename)));
		_parser = new ABCParser(fixPath(filename));
		_musicPhrase = _parser.parse();
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6csQrCiEeeXhtmVkHi-QA" name="fixPath" specification="_hqLboLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6csQ7CiEeeXhtmVkHi-QA" name="filename">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <ownedParameter xmi:id="_h6csRLCiEeeXhtmVkHi-QA" direction="return">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <language>java</language>
          <body>return &quot;/songs/&quot; + filename + &quot;.abc&quot;;
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6dTULCiEeeXhtmVkHi-QA" name="parseFile" specification="_hqMCsbCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6dTUbCiEeeXhtmVkHi-QA" direction="return">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <language>java</language>
          <body>return _musicPhrase.toString();
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6dTUrCiEeeXhtmVkHi-QA" name="play" specification="_h0UPELCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6dTU7CiEeeXhtmVkHi-QA" name="instrument" type="_huCn8LCiEeeXhtmVkHi-QA"/>
          <language>java</language>
          <body>SequencePlayer _player = new SequencePlayer(16, instrument.getValue());
		_players.push(_player);
		_player.setTempo(140);
		_musicPhrase.execute(new PlayMusicAlgo(), _player, 0);
		_player.play(ISequencePlayerStatus.NULL);
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6dTVLCiEeeXhtmVkHi-QA" name="stop" specification="_hqPtELCiEeeXhtmVkHi-QA">
          <language>java</language>
          <body>if (!_players.isEmpty()) {
			SequencePlayer _player = _players.pop();
			_player.stop();
		}
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6d6YLCiEeeXhtmVkHi-QA" name="start" specification="_hqPtEbCiEeeXhtmVkHi-QA">
          <language>java</language>
          <body>// do nothing.
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6d6YbCiEeeXhtmVkHi-QA" name="addInstruments2View" specification="_hqQUILCiEeeXhtmVkHi-QA">
          <language>java</language>
          <body>ABCInstrument[] instruments = ABCUtil.Singleton.getInstruments();
		for (ABCInstrument instrument : instruments) {
			_model2ViewAdpt.addInstrument(instrument);
		}
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6d6YrCiEeeXhtmVkHi-QA" name="main" specification="_hqQ7MLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6d6Y7CiEeeXhtmVkHi-QA" name="args">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6d6ZLCiEeeXhtmVkHi-QA" value="*"/>
          </ownedParameter>
          <language>java</language>
          <body>/**
		SequencePlayer sp = new SequencePlayer(16, 1);
		sp.setTicksPerDefaultNote(16);
		sp.setTempo(140);
		Note g = new Note('G', 0, 0, 1.0, false);
		int newStart = sp.addNote(g, 10);
		sp.addNote(new Note('B', 0, 0, 1.0, false), 10);
		//newStart = sp.addNote(new Note('B', 0, 0, 1.0, false), newStart);
		//newStart = sp.addNote(new Note('C', 0, 0, 1.0, false), newStart);
		//newStart = sp.addNote(new Note('D', 0, 0, 1.0, false), newStart);
		//newStart = sp.addNote(new Note('E', 0, 0, 1.0, false), newStart);
		//newStart = sp.addNote(new Note('F', 0, 0, 1.0, false), newStart);
		//newStart = sp.addNote(new Note('G', 0, 0, 1.0, false), newStart);
		sp.play(ISequencePlayerStatus.NULL);
		*/

		SequencePlayer sp = new SequencePlayer(16, 1);
		sp.setTicksPerDefaultNote(16);
		sp.setTempo(140);
		IPhrase note = new Note('D', 0, 0, 1.0, false);
		IPhraseVisitor v = new APhraseVisitor() {
			{
				addCmd(Note.ID, new IPhraseVisitorCmd() {

					@Override
					public Object apply(String id, IPhrase host, Object... params) {
						SequencePlayer player = (SequencePlayer) params[0];
						Note nt = (Note) host;
						return player.addNote(nt, (int) params[1]);
					}

				});
			}
		};
		note.execute(v, sp, 10);
		sp.play(ISequencePlayerStatus.NULL);

		ABCParser parser = new ABCParser(&quot;/songs/scale.abc&quot;);
		IPhrase testphrase = parser.parse();
		ToStringAlgo tsa = new ToStringAlgo();
		NESeqList list = (NESeqList) testphrase;
		NESeqList.setToStringAlgo(tsa);
		System.out.println(testphrase.execute(tsa, &quot;{&quot;));
		System.out.println(list.toString());
		System.out.println(testphrase.toString());
	</body>
        </ownedBehavior>
        <ownedOperation xmi:id="_hqKNgLCiEeeXhtmVkHi-QA" name="loadABCFile" method="_h6csQLCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWdLCiEeeXhtmVkHi-QA">
            <body>This method tells model to load a music of filename.</body>
          </ownedComment>
          <ownedParameter xmi:id="_hqK0kLCiEeeXhtmVkHi-QA" name="filename">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_hqLboLCiEeeXhtmVkHi-QA" name="fixPath" visibility="private" method="_h6csQrCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_hqLbobCiEeeXhtmVkHi-QA" name="filename">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <ownedParameter xmi:id="_hqMCsLCiEeeXhtmVkHi-QA" direction="return">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_hqMCsbCiEeeXhtmVkHi-QA" name="parseFile" method="_h6dTULCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWdbCiEeeXhtmVkHi-QA">
            <body>This method tells model to parse an .abc file.
	 * @return The string expression of IPhrase structure.</body>
          </ownedComment>
          <ownedParameter xmi:id="_hqOe8LCiEeeXhtmVkHi-QA" direction="return">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_hqPtELCiEeeXhtmVkHi-QA" name="stop" method="_h6dTVLCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWd7CiEeeXhtmVkHi-QA">
            <body>stop sequenceplayer from playing music, one sequence player at a time.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_hqPtEbCiEeeXhtmVkHi-QA" name="start" method="_h6d6YLCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWeLCiEeeXhtmVkHi-QA">
            <body>Start playing music</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_hqQUILCiEeeXhtmVkHi-QA" name="addInstruments2View" method="_h6d6YbCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7P9gLCiEeeXhtmVkHi-QA">
            <body>add Instrument to view's droplist.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_hqQ7MLCiEeeXhtmVkHi-QA" name="main" isStatic="true" method="_h6d6YrCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7P9gbCiEeeXhtmVkHi-QA">
            <body>Testing client
	 * @param args default argument</body>
          </ownedComment>
          <ownedParameter xmi:id="_hqQ7MbCiEeeXhtmVkHi-QA" name="args">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_hqRiQLCiEeeXhtmVkHi-QA" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_h0TA8LCiEeeXhtmVkHi-QA" name="ABCPlayerModel" method="_h6cFMLCiEeeXhtmVkHi-QA">
          <eAnnotations xmi:id="_h0TA8rCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
            <details xmi:id="_h0TA87CiEeeXhtmVkHi-QA" key="create"/>
          </eAnnotations>
          <ownedComment xmi:id="_h7PWc7CiEeeXhtmVkHi-QA">
            <body>Constructor of ABCMusicPlayerModel</body>
          </ownedComment>
          <ownedParameter xmi:id="_h0TA8bCiEeeXhtmVkHi-QA" name="_adapter" type="_hqXB0LCiEeeXhtmVkHi-QA"/>
          <ownedParameter xmi:id="_h0ToALCiEeeXhtmVkHi-QA" type="_hqFVALCiEeeXhtmVkHi-QA" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:id="_h0UPELCiEeeXhtmVkHi-QA" name="play" method="_h6dTUrCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWdrCiEeeXhtmVkHi-QA">
            <body>This method tells model to play the 
	 * @param instrument The instrument that music is played with</body>
          </ownedComment>
          <ownedParameter xmi:id="_h0UPEbCiEeeXhtmVkHi-QA" name="instrument" type="_huCn8LCiEeeXhtmVkHi-QA"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Interface" xmi:id="_hqXB0LCiEeeXhtmVkHi-QA" name="IModel2ViewAdapter">
        <ownedComment xmi:id="_h7P9grCiEeeXhtmVkHi-QA">
          <body>The model to view adapter that allows model to talk to view.
@author Yuhui Tong, Yunxiang Zhang.
 *</body>
        </ownedComment>
        <ownedOperation xmi:id="_hqYP8LCiEeeXhtmVkHi-QA" name="displayFileContent">
          <ownedParameter xmi:id="_hqYP8bCiEeeXhtmVkHi-QA" name="fileContents">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_h0WrULCiEeeXhtmVkHi-QA" name="addInstrument">
          <ownedParameter xmi:id="_h0ZHkLCiEeeXhtmVkHi-QA" name="instrument" type="_huCn8LCiEeeXhtmVkHi-QA"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8D10LCiEeeXhtmVkHi-QA" name="" memberEnd="_h8D10bCiEeeXhtmVkHi-QA _h4vcEbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8D10bCiEeeXhtmVkHi-QA" name="" type="_hqFVALCiEeeXhtmVkHi-QA" association="_h8D10LCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8Ec4bCiEeeXhtmVkHi-QA" name="" memberEnd="_h8Ec4rCiEeeXhtmVkHi-QA _h4wDIbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8Ec4rCiEeeXhtmVkHi-QA" name="" type="_hqFVALCiEeeXhtmVkHi-QA" association="_h8Ec4bCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8FrAbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8FrArCiEeeXhtmVkHi-QA _h4wqMbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8FrArCiEeeXhtmVkHi-QA" name="" type="_hqFVALCiEeeXhtmVkHi-QA" association="_h8FrAbCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8G5ILCiEeeXhtmVkHi-QA" name="" memberEnd="_h8G5IbCiEeeXhtmVkHi-QA _h40UkbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8G5IbCiEeeXhtmVkHi-QA" name="" type="_hqFVALCiEeeXhtmVkHi-QA" association="_h8G5ILCiEeeXhtmVkHi-QA"/>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_hk7IMLCiEeeXhtmVkHi-QA" name="provided">
      <packagedElement xmi:type="uml:Package" xmi:id="_hk7IMbCiEeeXhtmVkHi-QA" name="util">
        <packagedElement xmi:type="uml:Class" xmi:id="_huCn8LCiEeeXhtmVkHi-QA" name="ABCInstrument">
          <ownedComment xmi:id="_h7enArCiEeeXhtmVkHi-QA">
            <body>Represents an instrument as a name and an integer value
@author swong
 *</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5tscLCiEeeXhtmVkHi-QA" name="name" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5uTgLCiEeeXhtmVkHi-QA" name="value" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7FlcrCiEeeXhtmVkHi-QA" name="ABCInstrument" specification="_huD2ELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7Flc7CiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7FldLCiEeeXhtmVkHi-QA" name="value">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7FldbCiEeeXhtmVkHi-QA" type="_huCn8LCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>this.name = name;
		this.value = value;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7GMgLCiEeeXhtmVkHi-QA" name="toString" specification="_huFEMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7GMgbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return name + &quot;: &quot; + value;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_huD2ELCiEeeXhtmVkHi-QA" name="ABCInstrument" method="_h7FlcrCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_huEdIbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_huEdIrCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_huD2EbCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huEdILCiEeeXhtmVkHi-QA" name="value">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huEdI7CiEeeXhtmVkHi-QA" type="_huCn8LCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_huFEMLCiEeeXhtmVkHi-QA" name="toString" method="_h7GMgLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_huFEMbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_huGSULCiEeeXhtmVkHi-QA" name="KeySignature">
          <ownedComment xmi:id="_h7enA7CiEeeXhtmVkHi-QA">
            <body>Utility class to simplify dealing with key signatures &lt;br/>
Usage:&lt;br/>
KeySignature keySig = new KeySignature(aKey); // aKey is a string representing a key, e.g. &quot;C&quot;, &quot;Bb&quot;, &quot;Am&quot;&lt;br/>
Note adjustedNote = keySig.adjust(originalNote); // returns the Note object, adjusted so that it matches the key,
e.g for key of &quot;D&quot;, an &quot;F&quot; --&amp;gt; &quot;F#&quot;.&lt;br/></body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5uTgbCiEeeXhtmVkHi-QA" name="_major" visibility="private" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5u6kLCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5u6krCiEeeXhtmVkHi-QA" value="{ 0, 2, 2, 1, 2, 2, 2 //, 1&#xA;&#x9;}"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5u6k7CiEeeXhtmVkHi-QA" name="_minor" visibility="private" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5vhoLCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5wIsbCiEeeXhtmVkHi-QA" value="{ // Half steps in a Minor key&#xA;&#x9;&#x9;&#x9;0, 2, 1, 2, 2, 1, 2 //, 2&#xA;&#x9;}"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5x94LCiEeeXhtmVkHi-QA" name="keymap" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <qualifier xmi:id="_h5yk8LCiEeeXhtmVkHi-QA">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </qualifier>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5x94bCiEeeXhtmVkHi-QA" value="new Hashtable&lt;Character, Integer>()"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5yk8bCiEeeXhtmVkHi-QA" name="notes" visibility="private" type="_huHgcLCiEeeXhtmVkHi-QA" association="_h8svAbCiEeeXhtmVkHi-QA">
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5yk8rCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5zMALCiEeeXhtmVkHi-QA" value="{ new KeyNote('A', 0), new KeyNote('A', 1), new KeyNote('B', 0), new KeyNote('C', 0),&#xA;&#x9;&#x9;&#x9;new KeyNote('C', 1), new KeyNote('D', 0), new KeyNote('D', 1), new KeyNote('E', 0), new KeyNote('F', 0),&#xA;&#x9;&#x9;&#x9;new KeyNote('F', 1), new KeyNote('G', 0), new KeyNote('G', 1) }"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5zMArCiEeeXhtmVkHi-QA" name="fs_dsm" visibility="private" type="_huHgcLCiEeeXhtmVkHi-QA" association="_h8t9IbCiEeeXhtmVkHi-QA">
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5zzELCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5zzErCiEeeXhtmVkHi-QA" value="{ new KeyNote('A', 1), new KeyNote('B', 0), new KeyNote('C', 1), new KeyNote('D', 1),&#xA;&#x9;&#x9;&#x9;new KeyNote('E', 1), new KeyNote('F', 1), new KeyNote('G', 1) }"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7HaoLCiEeeXhtmVkHi-QA" name="KeySignature" specification="_huLx4LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7HaobCiEeeXhtmVkHi-QA" name="key">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7HaorCiEeeXhtmVkHi-QA" type="_huGSULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>// Get rid of spurious &quot;maj&quot; at the end, if it's there
		if (key.endsWith(&quot;maj&quot;)) {
			key = key.replace(&quot;maj&quot;, &quot;&quot;);
		}

		// Special case keys with 6 sharps
		if ((key == &quot;F#&quot;) || (key == &quot;D#m&quot;)) {
			for (KeyNote n : fs_dsm) {
				keymap.put(n.letter, n.accidental);
			}
			return;
		}

		char keynote = key.charAt(0);
		int cur = -1;

		for (int i = 0; i &lt; notes.length; i++) {
			if (notes[i].letter == keynote) {
				cur = i;
				break;
			}
		}

		if (cur == -1) {
			System.out.println(&quot;Invalid key: &quot; + key);
			return;
		}

		int[] steps = _major;

		int idx = 1;
		while (idx &lt; key.length()) {
			switch (key.charAt(idx)) {
			case '#':
				cur += 1;
				break;

			case 'b':
				cur -= 1;
				break;

			case 'm':
				steps = _minor;
				break;

			default:
				System.out.println(&quot;Invalid key: &quot; + key);
				return;
			}
			idx++;
		}

		if (cur == -1) {
			cur = notes.length - 1;
		}

		for (int i : steps) {
			cur += i;
			if (cur >= notes.length) {
				cur -= notes.length;
			}
			KeyNote n = notes[cur];
			insert(n);
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7IBsLCiEeeXhtmVkHi-QA" name="convertflat" specification="_huNAALCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7IBsbCiEeeXhtmVkHi-QA" name="n">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7IBsrCiEeeXhtmVkHi-QA" type="_huHgcLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>char next = (char) (n + 1);
		if (next == 'H') {
			next = 'A';
		}
		return new KeyNote(next, -1);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7IBs7CiEeeXhtmVkHi-QA" name="insert" specification="_h2pxYLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7IBtLCiEeeXhtmVkHi-QA" name="n" type="_huHgcLCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>if (!keymap.containsKey(n.letter)) {
			keymap.put(n.letter, n.accidental);
			return;
		}

		if (n.accidental == 1) {
			// Move sharp up to next flat
			insert(convertflat(n.letter));
			return;
		}

		if ((n.accidental == 0) || (n.accidental == -1)) {
			// Conflict, move higher note up to next flat
			int a = keymap.get(n.letter);
			a = Math.min(a, n.accidental);
			insert(convertflat(n.letter));
			keymap.put(n.letter, a);
			return;
		}

		// Shouldn't get here
		System.out.println(&quot;Should not reach here.&quot;);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7IBtbCiEeeXhtmVkHi-QA" name="map" specification="_h4e9YbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7IBtrCiEeeXhtmVkHi-QA" name="note" type="_h4eWULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h7IBt7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>if (keymap.containsKey(note)) {
			return (int) keymap.get(note);
		} else {
			return 0;
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7IowLCiEeeXhtmVkHi-QA" name="adjust" specification="_h2qYcLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7IowbCiEeeXhtmVkHi-QA" name="n" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h7IowrCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>if (n.getAccidental() != 0 &amp;&amp; !n.getIsNatural()) {
			return n; // Accidentals set and is not natural
		} else if (n.getIsNatural()) {
			return n; // override key signature
		} else {
			// normal key signature mapping applies
			int accidental = map(n.getName());
			if (accidental == 0) {
				return n; // nothing to change
			}
			return new Note(n.getName(), n.getOctave(), accidental, n.getDuration(), false); // must be false isNatural
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7Iow7CiEeeXhtmVkHi-QA" name="printmap" specification="_huNnELCiEeeXhtmVkHi-QA">
            <language>java</language>
            <body>System.out.println(keymap);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_huLx4LCiEeeXhtmVkHi-QA" name="KeySignature" method="_h7HaoLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_huMY8LCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_huMY8bCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7fOELCiEeeXhtmVkHi-QA">
              <body>Generate a &quot;Key&quot; object that enables easy access to the key signature.
	 * 
	 * @param key        - String indicating key (i.e., &quot;C&quot; or &quot;D#m&quot;)</body>
            </ownedComment>
            <ownedParameter xmi:id="_huLx4bCiEeeXhtmVkHi-QA" name="key">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huMY8rCiEeeXhtmVkHi-QA" type="_huGSULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_huNAALCiEeeXhtmVkHi-QA" name="convertflat" visibility="private" method="_h7IBsLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7fOEbCiEeeXhtmVkHi-QA">
              <body>Helper method to convert a note to its equivalent flat version.
	 * 
	 * @param n  - note letter
	 * @return   - equivalent flat version of note n</body>
            </ownedComment>
            <ownedParameter xmi:id="_huNAAbCiEeeXhtmVkHi-QA" name="n">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2pKULCiEeeXhtmVkHi-QA" type="_huHgcLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_huNnELCiEeeXhtmVkHi-QA" name="printmap" method="_h7Iow7CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7fOFbCiEeeXhtmVkHi-QA">
              <body>Print the mapping for this key signature</body>
            </ownedComment>
          </ownedOperation>
          <ownedOperation xmi:id="_h2pxYLCiEeeXhtmVkHi-QA" name="insert" visibility="private" method="_h7IBs7CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7fOErCiEeeXhtmVkHi-QA">
              <body>Helper method to insert the given note into the keymap.
	 * 
	 * @param n  - note to add to the map</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2pxYbCiEeeXhtmVkHi-QA" name="n" type="_huHgcLCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h2qYcLCiEeeXhtmVkHi-QA" name="adjust" method="_h7IowLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7fOFLCiEeeXhtmVkHi-QA">
              <body>Takes a note and returns the properly transposed note in this key signature
	 *
	 * @param n - note to be adjusted
	 * @return A new, adjusted Note</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2qYcbCiEeeXhtmVkHi-QA" name="n" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h2qYcrCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h4e9YbCiEeeXhtmVkHi-QA" name="map" visibility="private" method="_h7IBtbCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7fOE7CiEeeXhtmVkHi-QA">
              <body>Takes a note (with no accidentals) and returns the accidental for this
	 * key signature.
	 * 
	 * @param  note - in [A, B, C, D, E, F, G]
	 * @return accidental for the note in this key signature [-1, 0, 1]</body>
            </ownedComment>
            <ownedParameter xmi:id="_h4gLgLCiEeeXhtmVkHi-QA" name="note" type="_h4eWULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4gLgbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <nestedClassifier xmi:type="uml:Class" xmi:id="_huHgcLCiEeeXhtmVkHi-QA" name="KeyNote" visibility="private">
            <ownedComment xmi:id="_h7enBLCiEeeXhtmVkHi-QA">
              <body>Utility class to keep track of the position of notes</body>
            </ownedComment>
            <ownedAttribute xmi:id="_h5wIsrCiEeeXhtmVkHi-QA" name="letter">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5wvwbCiEeeXhtmVkHi-QA" name="accidental">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedAttribute>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7GMgrCiEeeXhtmVkHi-QA" name="KeyNote" specification="_huIukLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7GMg7CiEeeXhtmVkHi-QA" name="letter">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7GMhLCiEeeXhtmVkHi-QA" name="accidental">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7GMhbCiEeeXhtmVkHi-QA" type="_huHgcLCiEeeXhtmVkHi-QA" direction="return"/>
              <language>java</language>
              <body>this.letter = letter;
			this.accidental = accidental;
		</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7GzkLCiEeeXhtmVkHi-QA" name="toString" specification="_huJ8sLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7GzkbCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <language>java</language>
              <body>return &quot;&quot; + letter + accidental;
		</body>
            </ownedBehavior>
            <ownedOperation xmi:id="_huIukLCiEeeXhtmVkHi-QA" name="KeyNote" visibility="package" method="_h7GMgrCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_huJVorCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_huJVo7CiEeeXhtmVkHi-QA" key="create"/>
              </eAnnotations>
              <ownedComment xmi:id="_h7enBbCiEeeXhtmVkHi-QA">
                <body>Constructor for the class
		 * @param letter  The letter of the note
		 * @param accidental  Whether or not the note is accidental:  -1 = flat, 0 = natural, +1 = sharp</body>
              </ownedComment>
              <ownedParameter xmi:id="_huJVoLCiEeeXhtmVkHi-QA" name="letter">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
              </ownedParameter>
              <ownedParameter xmi:id="_huJVobCiEeeXhtmVkHi-QA" name="accidental">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
              </ownedParameter>
              <ownedParameter xmi:id="_huJVpLCiEeeXhtmVkHi-QA" type="_huHgcLCiEeeXhtmVkHi-QA" direction="return"/>
            </ownedOperation>
            <ownedOperation xmi:id="_huJ8sLCiEeeXhtmVkHi-QA" name="toString" method="_h7GzkLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_huKjwLCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
          </nestedClassifier>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_huRRcLCiEeeXhtmVkHi-QA" name="ABCUtil">
          <ownedComment xmi:id="_h7fOFrCiEeeXhtmVkHi-QA">
            <body>Singleton utility class that has methods for parsing,
reading file content and getting the list of instruments.
 *</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h51BMLCiEeeXhtmVkHi-QA" name="Singleton" isLeaf="true" isStatic="true" type="_huRRcLCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h8vLQbCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h51BMbCiEeeXhtmVkHi-QA" value="new ABCUtil()"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7JP0LCiEeeXhtmVkHi-QA" name="parseFraction" specification="_huTtsLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7JP0bCiEeeXhtmVkHi-QA" name="frac">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7JP0rCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
            <language>java</language>
            <body>String[] vals = frac.split(&quot;/&quot;);
		if (vals.length != 2) {
			throw new NumberFormatException(frac + &quot; is not a fraction.&quot;);
		}
		double num = Double.parseDouble(vals[0]);
		double denom = Double.parseDouble(vals[1]);
		return num / denom;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7JP07CiEeeXhtmVkHi-QA" name="parseTempo" specification="_huUUwLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7JP1LCiEeeXhtmVkHi-QA" name="tempo">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7JP1bCiEeeXhtmVkHi-QA" name="defaultNotesPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7JP1rCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
            <language>java</language>
            <body>String els[] = tempo.split(&quot;=&quot;);
		double bpm = 0;
		if (1 == els.length) {
			bpm = Double.parseDouble(els[0]) / defaultNotesPerQuarterNote;
		} else {
			double note = parseFraction(els[0]);
			bpm = Double.parseDouble(els[1]) / (0.25 / note);
		}
		return bpm;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7J24LCiEeeXhtmVkHi-QA" name="getFileContents" specification="_huU70bCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7J24bCiEeeXhtmVkHi-QA" name="filename">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7J24rCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>String fileContents = &quot;&quot;;

		try {
			InputStream is = this.getClass().getResource(filename).openStream();

			BufferedReader input = new BufferedReader(new InputStreamReader(is));

			try {
				// use buffering, reading one line at a time
				// FileReader always assumes default
				// encoding is OK!

				String line = null; // not declared within while loop

				/*
				 * readLine is a bit quirky : it returns the
				 * content of a line MINUS the newline. it
				 * returns null only for the END of the
				 * stream. it returns an empty String if two
				 * newlines appear in a row.
				 */
				while ((line = input.readLine()) != null) {
					fileContents += line + &quot;\n&quot;;
				}
			} finally {
				input.close();
			}
		} catch (Exception e) {
			return &quot;Error loading file: &quot; + filename + &quot;\n&quot; + e + &quot;\n&quot;;
		}

		return fileContents;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7J247CiEeeXhtmVkHi-QA" name="getInstruments" specification="_huVi4rCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7J25LCiEeeXhtmVkHi-QA" type="_huCn8LCiEeeXhtmVkHi-QA" direction="return">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h7J25bCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <language>java</language>
            <body>try {
			Synthesizer synth = MidiSystem.getSynthesizer();
			synth.open();
			Instrument[] instruments = synth.getAvailableInstruments();
			ABCInstrument[] result = new ABCInstrument[instruments.length];
			for (int i = 0; i &lt; instruments.length; i++) {
				result[i] = new ABCInstrument(instruments[i].getName(), instruments[i].getPatch().getProgram());
			}

			synth.close();
			return result;
		} catch (MidiUnavailableException e) {
			System.err.println(&quot;ABCUtil.getInstruments: &quot; + e);
			return null;
		}
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_huSfkLCiEeeXhtmVkHi-QA" name="ABCUtil" visibility="private">
            <eAnnotations xmi:id="_huSfkbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_huSfkrCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_huTGobCiEeeXhtmVkHi-QA" type="_huRRcLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_huTtsLCiEeeXhtmVkHi-QA" name="parseFraction" method="_h7JP0LCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7fOF7CiEeeXhtmVkHi-QA">
              <body>Return the evaluation of a string &quot;a/b&quot;.
	 * 
	 * @param frac - a string containing a fraction
	 * @return     - the result of evaluating the fraction</body>
            </ownedComment>
            <ownedParameter xmi:id="_huTtsbCiEeeXhtmVkHi-QA" name="frac">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huTtsrCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_huUUwLCiEeeXhtmVkHi-QA" name="parseTempo" method="_h7JP07CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7f1ILCiEeeXhtmVkHi-QA">
              <body>Return the tempo given by the input string.  The returned value is in the 
	 * units of quarter notes per minute.
	 * 
	 * Accepts &quot;bpm&quot; (beats per default note) or &quot;a/b=bpm&quot; (beats per a/b note).
	 * 
	 * @param tempo                      - tempo represented as a string
	 * @param defaultNotesPerQuarterNote - default notes per quarter note 
	 * @return                           - the tempo indicated by the string</body>
            </ownedComment>
            <ownedParameter xmi:id="_huUUwbCiEeeXhtmVkHi-QA" name="tempo">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huUUwrCiEeeXhtmVkHi-QA" name="defaultNotesPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huU70LCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_huU70bCiEeeXhtmVkHi-QA" name="getFileContents" method="_h7J24LCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7f1IbCiEeeXhtmVkHi-QA">
              <body>Returns the contents of a text file, e.g. an abc file, as a single string.
	 * @param filename the name of the file with respect to the default package, where &quot;/&quot; refers to the default package, e.g. a file in the &quot;data&quot; package would &quot;/data/myfile.abc&quot;
	 * @return the contents of the file</body>
            </ownedComment>
            <ownedParameter xmi:id="_huVi4LCiEeeXhtmVkHi-QA" name="filename">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_huVi4bCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_huVi4rCiEeeXhtmVkHi-QA" name="getInstruments" method="_h7J247CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7f1IrCiEeeXhtmVkHi-QA">
              <body>Get an array of all the available instruments as ABCInstruments 
	 * where the instrument's value is the MIDI instrument number
	 * 
	 * @return an array of ABCInstruments</body>
            </ownedComment>
            <ownedParameter xmi:id="_huVi47CiEeeXhtmVkHi-QA" type="_huCn8LCiEeeXhtmVkHi-QA" direction="return">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_huWJ8LCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8svAbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8svArCiEeeXhtmVkHi-QA _h5yk8bCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8svArCiEeeXhtmVkHi-QA" name="" type="_huGSULCiEeeXhtmVkHi-QA" association="_h8svAbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8t9IbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8t9IrCiEeeXhtmVkHi-QA _h5zMArCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8t9IrCiEeeXhtmVkHi-QA" name="" type="_huGSULCiEeeXhtmVkHi-QA" association="_h8t9IbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8vLQbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8vLQrCiEeeXhtmVkHi-QA _h51BMLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8vLQrCiEeeXhtmVkHi-QA" name="" type="_huRRcLCiEeeXhtmVkHi-QA" association="_h8vLQbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hlM1ALCiEeeXhtmVkHi-QA" name="abcParser">
        <packagedElement xmi:type="uml:Class" xmi:id="_hqlEQLCiEeeXhtmVkHi-QA" name="ABCParser">
          <ownedComment xmi:id="_h7P9hrCiEeeXhtmVkHi-QA">
            <body>Parses an abc file into IPhrase music structures&lt;br/>

Usage: &lt;br/>
ABCParser parser = new ABCParser(&quot;/data/aMusicFile.abc&quot;); &lt;br/>
IPhrase phrase = parser.parse(); &lt;br/>

Cases handled:&lt;br/>
- single notes with and without accidentals and naturals with regards to measures&lt;br/>
- chords&lt;br/>
- dotted notes&lt;br/>
- grace notes&lt;br/>
- repeats, including first and second repeats.&lt;br/>
- triplets &lt;br/>
- tuplets&lt;br/>
- all headers&lt;br/>
- quoted text&lt;br/>
- D.C. al fine&lt;br/>
- EOF (End Of File)&lt;br/>
&lt;br/>
All other cases ignored.

@author swong
 *</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h42w0LCiEeeXhtmVkHi-QA" name="abcT" visibility="private" type="_htq0gLCiEeeXhtmVkHi-QA" association="_h8IuUbCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h43X4LCiEeeXhtmVkHi-QA" name="beginningTarget" visibility="private" type="_hrJsALCiEeeXhtmVkHi-QA" association="_h8J8cLCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h43X4bCiEeeXhtmVkHi-QA" value="new DecoratorSeqList()"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h43-8LCiEeeXhtmVkHi-QA" name="jumpTargetStack" visibility="private" type="_h3amYLCiEeeXhtmVkHi-QA" association="_h8KjgbCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h44mAbCiEeeXhtmVkHi-QA" value="new Stack&lt;DecoratorSeqList>()"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h45NEbCiEeeXhtmVkHi-QA" name="jumpSecondRepeatStack" visibility="private" type="_h3amYLCiEeeXhtmVkHi-QA" association="_h8LxobCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h450IbCiEeeXhtmVkHi-QA" value="new Stack&lt;DecoratorSeqList>()"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h47CQbCiEeeXhtmVkHi-QA" name="makeSeqListAlgo" visibility="private" type="_htOvoLCiEeeXhtmVkHi-QA" association="_h8M_wLCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h47CQrCiEeeXhtmVkHi-QA" value="new ATokVisitor(new ITokVisitorCmd() {&#xA;&#xA;&#x9;&#x9;@Override&#xA;&#x9;&#x9;/**&#xA;&#x9;&#x9; * Default behavior is to ignore any unrecognized tokens by merely proceeding to the next one.&#xA;&#x9;&#x9; */&#xA;&#x9;&#x9;public Object apply(String id, Token host, Object... params) {&#xA;&#x9;&#x9;&#x9;System.out.println(&quot;Unhandled Token: &quot; + host);&#xA;&#x9;&#x9;&#x9;return abcT.getNextToken().execute(makeSeqListAlgo, params);&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;}) {&#xA;&#x9;}"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h47pUbCiEeeXhtmVkHi-QA" name="isGrace" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h47pUrCiEeeXhtmVkHi-QA" value="false"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h48QYbCiEeeXhtmVkHi-QA" name="grace_multiplier" visibility="package">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h483cLCiEeeXhtmVkHi-QA" value="0.2"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h49egLCiEeeXhtmVkHi-QA" name="graceDuration" visibility="package">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h49egbCiEeeXhtmVkHi-QA" value="0.0"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h4-soLCiEeeXhtmVkHi-QA" name="dottedCorrection" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h4_TsLCiEeeXhtmVkHi-QA" value="0.0"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h4_6wLCiEeeXhtmVkHi-QA" name="checkNextNoteAlgo" visibility="private" type="_htOvoLCiEeeXhtmVkHi-QA" association="_h8Nm0bCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h4_6wbCiEeeXhtmVkHi-QA" value="new ATokVisitor(new ITokVisitorCmd() {&#xA;&#x9;&#x9;@Override&#xA;&#x9;&#x9;public Object apply(String id, Token host, Object... params) {&#xA;&#x9;&#x9;&#x9;// No dotted modification detected.&#xA;&#x9;&#x9;&#x9;abcT.putBack(host); // put token back to be reprocessed&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;// later&#xA;&#x9;&#x9;&#x9;dottedCorrection = 0.0;&#xA;&#x9;&#x9;&#x9;return params[0]; // return duration unchanged.&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;}) {&#xA;&#x9;&#x9;// Initializer block for internal visitor&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;this.addCmd(&quot;&lt;&quot;, new ITokVisitorCmd() {&#xA;&#x9;&#x9;&#x9;&#x9;@Override&#xA;&#x9;&#x9;&#x9;&#x9;public Object apply(String id, Token host, Object... params) {&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;// the previous note is halved, the next dotted&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;double duration = (Double) params[0] / 2.0;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;dottedCorrection = duration;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;System.out&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;.println(&quot;Notes parsed \&quot;&quot; + id + &quot;\&quot; dotting.  durationCorrection = &quot; + dottedCorrection);&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;return duration;&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;});&#xA;&#xA;&#x9;&#x9;&#x9;this.addCmd(&quot;>&quot;, new ITokVisitorCmd() {&#xA;&#x9;&#x9;&#x9;&#x9;@Override&#xA;&#x9;&#x9;&#x9;&#x9;public Object apply(String id, Token host, Object... params) {&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;// the previous note is dotted, the next note halved&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;double duration = (Double) params[0];&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;dottedCorrection = -duration / 2.0;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;duration -= dottedCorrection;&#xA;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;System.out&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;.println(&quot;Notes parsed \&quot;&quot; + id + &quot;\&quot; dotting.  durationCorrection = &quot; + dottedCorrection);&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;return duration;&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;});&#xA;&#x9;&#x9;}&#xA;&#x9;}"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5Ah0LCiEeeXhtmVkHi-QA" name="accidentalNotes" visibility="private" type="_hsB1wLCiEeeXhtmVkHi-QA" association="_h8O08bCiEeeXhtmVkHi-QA">
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5Ah0bCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5Ah0rCiEeeXhtmVkHi-QA" value="new HashSet&lt;Note>()"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6fIgLCiEeeXhtmVkHi-QA" name="popJumpTarget" specification="_hqnggLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6fIgbCiEeeXhtmVkHi-QA" type="_hrJsALCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>if (jumpTargetStack.isEmpty())
			return beginningTarget;
		else
			return jumpTargetStack.pop();
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6fIgrCiEeeXhtmVkHi-QA" name="pushJumpTarget" specification="_h0eAEbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6fIg7CiEeeXhtmVkHi-QA" name="target" type="_hrJsALCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>jumpTargetStack.push(target);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6fvkLCiEeeXhtmVkHi-QA" name="ABCParser" specification="_hqqj0LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6fvkbCiEeeXhtmVkHi-QA" name="inputFileName">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6fvkrCiEeeXhtmVkHi-QA" type="_hqlEQLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>try {
			abcT = new ABCTokenizer(inputFileName);

			// ------ EOF -----------------------------------------------------
			ITokVisitorCmd eofCmd = new ITokVisitorCmd() {

				@Override
				public Object apply(String id, Token host, Object... params) {
					return MTSeqList.Singleton;
				}
			};

			// ------ Note -----------------------------------------------------
			ITokVisitorCmd noteCmd = new ITokVisitorCmd() {

				@Override
				public Object apply(String id, Token host, Object... params) {
					Note note = makeNote(host);
					System.out.println(&quot;Note parsed: &quot; + note);

					return new NESeqList(note, (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params));
				}
			};

			// ------ Header-------------------------------------------
			// Same command for all headers
			ITokVisitorCmd headerCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					Header header = new Header(id, host.getLexeme());
					System.out.println(&quot;Header parsed: &quot; + header);
					return new NESeqList(header, (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params));
				}
			};

			// ------ Chord----------------------------------------------
			ITokVisitorCmd chordStartCmd = new ITokVisitorCmd() {

				// Internal visitor to get rest of chord
				ATokVisitor makeChordAlgo = new ATokVisitor(new ITokVisitorCmd() {
					@Override
					public Object apply(String id, Token host, Object... params) {
						throw new IllegalArgumentException(&quot;ABCParser.chordCmd: Non-Note token encountered:&quot; + host);
					}

				}) {
					// Initializer block for internal visitor
					{
						this.addCmd(&quot;Note&quot;, new ITokVisitorCmd() {
							@SuppressWarnings(&quot;unchecked&quot;)
							@Override
							public Object apply(String id, Token host, Object... params) {
								Note note = makeNote(host);
								System.out.println(&quot;Chord parsed Note: &quot; + note);
								((Vector&lt;Note>) params[0]).add(note);
								return abcT.getNextToken().execute(makeChordAlgo, params);
							}
						});

						this.addCmd(&quot;]&quot;, new ITokVisitorCmd() {
							@SuppressWarnings(&quot;unchecked&quot;)
							@Override
							public Object apply(String id, Token host, Object... params) {
								Vector&lt;Note> vNotes = (Vector&lt;Note>) params[0];
								Note[] result = new Note[vNotes.size()];
								for (int i = 0; i &lt; vNotes.size(); i++)
									result[i] = vNotes.get(i);
								return result;
							}
						});

					}
				};

				@Override
				public Object apply(String id, Token host, Object... params) {
					Note[] notes = (Note[]) abcT.getNextToken().execute(makeChordAlgo, new Vector&lt;Note>());
					Chord chord = new Chord(notes);
					System.out.println(&quot;Chord parsed: &quot; + chord);
					return new NESeqList(chord, (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params));
				}
			};

			// ------ Grace Note Start---------------------------------------
			ITokVisitorCmd graceStartCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					System.out.println(&quot;Grace Start parsed.&quot;);
					isGrace = true; // Set grace flag on
					// Continue on to next token.
					return abcT.getNextToken().execute(makeSeqListAlgo, params);
				}
			};

			// ------ Grace Note End--------------------------------------------
			ITokVisitorCmd graceEndCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					System.out.println(&quot;Grace End parsed.&quot;);
					isGrace = false; // Set grace flag on
					// Continue on to next token.
					return abcT.getNextToken().execute(makeSeqListAlgo, params);
				}
			};

			// ------ Tuplet----------------------------------------------
			ITokVisitorCmd tupletCmd = new ITokVisitorCmd() {

				// Internal visitor to get rest of chord
				ATokVisitor makeTupletAlgo = new ATokVisitor(new ITokVisitorCmd() {
					@Override
					public Object apply(String id, Token host, Object... params) {
						throw new IllegalArgumentException(&quot;ABCParser.tupletCmd: Non-Note token encountered: &quot; + host);
					}

				}) {
					// Initializer block for internal visitor
					{
						this.addCmd(&quot;Note&quot;, new ITokVisitorCmd() {
							@SuppressWarnings(&quot;unchecked&quot;)
							@Override
							public Object apply(String id, Token host, Object... params) {
								int count = (Integer) params[0];
								Vector&lt;Note> vNotes = ((Vector&lt;Note>) params[1]);

								Note note = makeNote(host);
								System.out.println(&quot;Tuplet parsed Note: &quot; + note + &quot; count = &quot; + count);
								vNotes.add(note);

								if (1 == count) {
									Note[] result = new Note[vNotes.size()];
									for (int i = 0; i &lt; vNotes.size(); i++)
										result[i] = vNotes.get(i);
									return result;
								} else {
									return abcT.getNextToken().execute(makeTupletAlgo, --count, vNotes);
								}
							}
						});

					}
				};

				@Override
				public Object apply(String id, Token host, Object... params) {
					int nNotes = Integer.parseInt(host.getLexeme());

					Note[] notes = (Note[]) abcT.getNextToken().execute(makeTupletAlgo, nNotes, new Vector&lt;Note>());

					NoteCollection result;

					if (3 == nNotes) {
						result = new Triplet(notes[0], notes[1], notes[2]);
					} else {
						result = new Tuplet(notes);
					}
					System.out.println(&quot;Tuplet parsed: &quot; + result);
					return new NESeqList(result, (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params));
				}
			};

			// ------ Measure bar --------------------------------------------
			ITokVisitorCmd measureBarCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					accidentalNotes.clear(); // clear any accidentals
					System.out.println(&quot;Measure bar parsed.  Accidental Notes cleared.&quot;);
					// Continue on to next token.
					return abcT.getNextToken().execute(makeSeqListAlgo, params);
				}
			};

			// ------ Repeat Start -----------------------------------------
			ITokVisitorCmd repeatStartCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					DecoratorSeqList repeatStart = new DecoratorSeqList();
					pushJumpTarget(repeatStart);
					System.out.println(&quot;Repeat Start parsed&quot;);
					ISeqList result = (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params);
					repeatStart.setDecoree(result);
					return result;
				}
			};

			// ------ Repeat End -----------------------------------------
			ITokVisitorCmd repeatEndCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					ISeqList jumpTarget = popJumpTarget();
					System.out.println(&quot;Repeat End parsed&quot;);
					if (jumpSecondRepeatStack.isEmpty()) {
						return new ToggleDecoratorSeqList(jumpTarget,
								(ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params));
					} else {
						abcT.getNextToken().execute(makeSeqListAlgo, params);
						return jumpTarget;
					}
				}
			};

			// ------ First Repeat Start Repeat --------------------------
			ITokVisitorCmd firstRepeatStartCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					DecoratorSeqList secondRepeatStart = new DecoratorSeqList();
					jumpSecondRepeatStack.push(secondRepeatStart);
					System.out.println(&quot;First Repeat Start parsed.  ID = &quot; + id);
					return new ToggleDecoratorSeqList((ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params),
							secondRepeatStart);
				}
			};

			// ------ Second Repeat Start Repeat --------------------------
			ITokVisitorCmd secondRepeatStartCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					DecoratorSeqList secondRepeatStart = jumpSecondRepeatStack.pop();
					System.out.println(&quot;Second Repeat Start parsed.  ID = &quot; + id);
					ISeqList result = (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params);
					secondRepeatStart.setDecoree(result);
					return result;
				}
			};

			// ------ Alt. Second Repeat Start Repeat --------------------------
			/**
			 * This covers the &quot;:|2&quot; token which includes the repeat.
			 */
			ITokVisitorCmd secondRepeatStartAltCmd = new ITokVisitorCmd() {
				@Override
				public Object apply(String id, Token host, Object... params) {
					DecoratorSeqList secondRepeatStart = jumpSecondRepeatStack.pop();
					System.out.println(&quot;Second Repeat Start Alt. parsed.  ID = &quot; + id);
					ISeqList result = (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params);
					secondRepeatStart.setDecoree(result);
					return popJumpTarget();
				}
			};

			// ------ Quote processing --------------------------
			ITokVisitorCmd quoteCmd = new ITokVisitorCmd() {

				FineToggleDecoratorSeqList fineToggle = new FineToggleDecoratorSeqList();

				boolean isSwapped = false;

				@Override
				public Object apply(String id, Token host, Object... params) {
					if (host.getLexeme().equals(&quot;_fine&quot;)) {

						System.out.println(&quot;\&quot;_fine\&quot; parsed&quot;);
						fineToggle.setDecoree(0, (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, params));
						return fineToggle;
					} else if (host.getLexeme().equals(&quot;_D.C al Fine&quot;)) {
						if (isSwapped) {
							System.out.println(&quot;\&quot;_D.C al Fine\&quot; parsed&quot;);
							return new ISeqList() {

								@Override
								public Object execute(IPhraseVisitor algo, Object... params) {
									fineToggle.setFine();
									return beginningTarget.execute(algo, params);
								}
							};
						} else {
							isSwapped = true;
							System.out.println(&quot;\&quot;_D.C al Fine\&quot; parsed, but swapped for next token.&quot;);
							return swapToken(host).execute(makeSeqListAlgo, params);
						}
					} else {
						System.out.println(&quot;Quote parsed - ignored&quot;);
						return abcT.getNextToken().execute(makeSeqListAlgo, params);
					}
				}
			};

			// ---- Add Commands to Visitor------------------------------

			makeSeqListAlgo.addCmd(&quot;EOF&quot;, eofCmd);
			makeSeqListAlgo.addCmd(&quot;Note&quot;, noteCmd);

			String headers = &quot;ABCDEFGHIKLMNOPQRSTWXZ&quot;;
			for (int i = 0; i &lt; headers.length(); i++) {
				makeSeqListAlgo.addCmd(&quot;&quot; + headers.charAt(i), headerCmd);
			}

			makeSeqListAlgo.addCmd(&quot;[&quot;, chordStartCmd);
			makeSeqListAlgo.addCmd(&quot;{&quot;, graceStartCmd);
			makeSeqListAlgo.addCmd(&quot;}&quot;, graceEndCmd);
			makeSeqListAlgo.addCmd(&quot;Tuplet&quot;, tupletCmd);
			makeSeqListAlgo.addCmd(&quot;|&quot;, measureBarCmd);
			makeSeqListAlgo.addCmd(&quot;|:&quot;, repeatStartCmd);
			makeSeqListAlgo.addCmd(&quot;:|&quot;, repeatEndCmd);
			makeSeqListAlgo.addCmd(&quot;|1&quot;, firstRepeatStartCmd);
			makeSeqListAlgo.addCmd(&quot;[1&quot;, firstRepeatStartCmd);
			makeSeqListAlgo.addCmd(&quot;[2&quot;, secondRepeatStartCmd);
			makeSeqListAlgo.addCmd(&quot;|2&quot;, secondRepeatStartCmd);
			makeSeqListAlgo.addCmd(&quot;:|2&quot;, secondRepeatStartAltCmd);
			makeSeqListAlgo.addCmd(&quot;Quote&quot;, quoteCmd);
		} catch (Exception e) {
			System.err.println(&quot;ABCParser constructor exception: &quot; + e);
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6fvk7CiEeeXhtmVkHi-QA" name="parse" specification="_hqrK4rCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6fvlLCiEeeXhtmVkHi-QA" type="_hrqCULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>ISeqList beginning = (ISeqList) abcT.getNextToken().execute(makeSeqListAlgo, MTSeqList.Singleton);
		beginningTarget.setDecoree(beginning);
		return beginning;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6fvlbCiEeeXhtmVkHi-QA" name="makeNote" specification="_h0gcULCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6fvlrCiEeeXhtmVkHi-QA" name="host" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6fvl7CiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>char name = 'C';
		int octave = 0;
		int accidental = 0;
		double duration = 1.0;
		boolean isNatural = false;

		String lex = host.getLexeme();

		// get accidental value
		int i = 0;
		for (; i &lt; lex.length(); i++) {
			if (Character.isLetter(lex.charAt(i))) {
				break;
			}
			if (lex.charAt(i) == '^') {
				accidental += +1;
			} else if (lex.charAt(i) == '_') {
				accidental += -1;
			} else if (lex.charAt(i) == '=') {
				isNatural = true;
			}
		}

		if (Character.isLowerCase(lex.charAt(i))) {
			octave++;
		}
		name = Character.toUpperCase(lex.charAt(i));
		i++;

		// get octave value

		for (; i &lt; lex.length(); i++) {
			if (Character.isDigit(lex.charAt(i)) || '/' == lex.charAt(i)) {
				break;
			}
			if ('\'' == lex.charAt(i))
				octave += +1;
			else if (',' == lex.charAt(i))
				octave += -1;
		}

		if (i &lt; lex.length()) {
			if (Character.isDigit(lex.charAt(i))) {
				int idx = lex.substring(i).indexOf('/');
				if (-1 == idx) {
					duration = Double.parseDouble(lex.substring(i));
				} else if (lex.length() > i + idx + 1) {
					duration = Double.parseDouble(lex.substring(i, i + idx))
							/ Double.parseDouble(lex.substring(i + idx + 1));
				} else {
					duration = Double.parseDouble(lex.substring(i, i + idx)) / 2.0;
				}
			} else {
				i++;
				if (i &lt; lex.length()) {
					duration /= Double.parseDouble(lex.substring(i));
				} else {
					duration /= 2.0; // Slash w/o number is divide by two.
				}
			}
		}

		if (isGrace) {
			duration *= grace_multiplier;
			graceDuration += duration; // sum the duration of the grace notes
		} else if (graceDuration > 0.0) {
			// Correct the length of the current note to get it back on beat.
			duration -= graceDuration;
			graceDuration = 0.0;
		}

		if (dottedCorrection != 0.0) {
			duration += dottedCorrection;
			dottedCorrection = 0.0;
		}

		duration = (Double) abcT.getNextToken().execute(checkNextNoteAlgo, duration);

		Note note = new Note(name, octave, accidental, duration, isNatural);

		if (!isNatural) // naturals always override prior accidentals in measure
			checkAccidentals(note);
		return note;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6gWoLCiEeeXhtmVkHi-QA" name="checkAccidentals" specification="_h0hqcLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6gWobCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>for (Note n : accidentalNotes) {
			if (n.getName() == note.getName() &amp;&amp; n.getOctave() == note.getOctave()) {
				System.out.println(note + &quot; found in accidentals.  Overriding accidentals and isNatural to &quot; + n);
				note.setAccidental(n.getAccidental());
				note.setIsNatural(n.getIsNatural()); // this will override
														// accidentals if true
				return;
			}
		}
		if (note.getAccidental() != 0 || note.getIsNatural()) {
			addAccidental(note);
		}
		return;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6gWorCiEeeXhtmVkHi-QA" name="addAccidental" specification="_h0iRgLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6gWo7CiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>removeAccidental(note); // remove anything like this note
		accidentalNotes.add(note); // put this specific note in
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6g9sLCiEeeXhtmVkHi-QA" name="removeAccidental" specification="_h0i4kLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6g9sbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>for (Note n : accidentalNotes) {
			if (n.getName() == note.getName() &amp;&amp; n.getOctave() == note.getOctave()) {
				accidentalNotes.remove(n);
				// Check all notes, just to be safe
			}
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6g9srCiEeeXhtmVkHi-QA" name="swapToken" specification="_h0jfoLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6g9s7CiEeeXhtmVkHi-QA" name="t" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6g9tLCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>Token next = abcT.getNextToken();
		abcT.putBack(t);
		return next;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hqnggLCiEeeXhtmVkHi-QA" name="popJumpTarget" visibility="private" method="_h6fIgLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7P9h7CiEeeXhtmVkHi-QA">
              <body>Pull off the current jump target from the jump target stack. If the stack
	 * is empty, return the proxy for the beginning of the phrase, as this is
	 * the default jump target.
	 * 
	 * @return The current jump target or the beginning of the phrase.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0eAELCiEeeXhtmVkHi-QA" type="_hrJsALCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hqqj0LCiEeeXhtmVkHi-QA" name="ABCParser" method="_h6fvkLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hqqj0rCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hqrK4LCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7QkkbCiEeeXhtmVkHi-QA">
              <body>Constructs a parser for the given ABC input file.   Does not actually run that parser yet.
	 * Prints error message to System.err if there is a problem opening the given file.   The returned 
	 * parser will be null in the event of an error.
	 * @param inputFileName
	 *            the name of the input text file</body>
            </ownedComment>
            <ownedParameter xmi:id="_hqqj0bCiEeeXhtmVkHi-QA" name="inputFileName">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hqrK4bCiEeeXhtmVkHi-QA" type="_hqlEQLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hqrK4rCiEeeXhtmVkHi-QA" name="parse" method="_h6fvk7CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7QkkrCiEeeXhtmVkHi-QA">
              <body>
	 * Run the parser and parse the entire file, returning an IPhrase object that represents the entire piece of music.
	 * 
	 * @return An IPhrase object</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0f1QLCiEeeXhtmVkHi-QA" type="_hrqCULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h0eAEbCiEeeXhtmVkHi-QA" name="pushJumpTarget" visibility="private" method="_h6fIgrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7QkkLCiEeeXhtmVkHi-QA">
              <body>Push the given jump target onto the stack so that it is now the current
	 * jump target. This corresponds to the innermost nested repeat.
	 * 
	 * @param target
	 *            The new current jump target.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0enILCiEeeXhtmVkHi-QA" name="target" type="_hrJsALCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h0gcULCiEeeXhtmVkHi-QA" name="makeNote" visibility="private" method="_h6fvlbCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7Qkk7CiEeeXhtmVkHi-QA">
              <body>Parse a Note from the given Token
	 * 
	 * @param host
	 *            The Note token
	 * @return A Note object</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0gcUbCiEeeXhtmVkHi-QA" name="host" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h0hDYLCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h0hqcLCiEeeXhtmVkHi-QA" name="checkAccidentals" visibility="private" method="_h6gWoLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7QklLCiEeeXhtmVkHi-QA">
              <body>Checks to see if the given Note is in the set of accidentals Checks name
	 * and octave but not duration or accidental
	 * 
	 * @param note
	 *            The note to check</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0hqcbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h0iRgLCiEeeXhtmVkHi-QA" name="addAccidental" visibility="private" method="_h6gWorCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7QklbCiEeeXhtmVkHi-QA">
              <body>Adds a note to the set of accidentals replaces any note with the same
	 * name and octave. duration and accidental are ignored.
	 * 
	 * @param note
	 *            the Note to add.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0iRgbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h0i4kLCiEeeXhtmVkHi-QA" name="removeAccidental" visibility="private" method="_h6g9sLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7QklrCiEeeXhtmVkHi-QA">
              <body>Removes a note from the set of accidentals Removes any note with the same
	 * name and octave. duration and accidental are ignored.
	 * 
	 * @param note
	 *            the note to remove</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0i4kbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h0jfoLCiEeeXhtmVkHi-QA" name="swapToken" visibility="private" method="_h6g9srCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7Qkl7CiEeeXhtmVkHi-QA">
              <body>Swap the given token for the next token in the tokenizer, returning the
	 * next token. The given token will be the next token out of the tokenizer.
	 * 
	 * @param t The token to be swapped into the tokenizer
	 * @return the token that previously was next in the tokenizer.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h0kGsLCiEeeXhtmVkHi-QA" name="t" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h0kGsbCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8IuUbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8IuUrCiEeeXhtmVkHi-QA _h42w0LCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8IuUrCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8IuUbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8J8cLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8J8cbCiEeeXhtmVkHi-QA _h43X4LCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8J8cbCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8J8cLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8KjgbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8KjgrCiEeeXhtmVkHi-QA _h43-8LCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8KjgrCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8KjgbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8LxobCiEeeXhtmVkHi-QA" name="" memberEnd="_h8LxorCiEeeXhtmVkHi-QA _h45NEbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8LxorCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8LxobCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8M_wLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8M_wbCiEeeXhtmVkHi-QA _h47CQbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8M_wbCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8M_wLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8Nm0bCiEeeXhtmVkHi-QA" name="" memberEnd="_h8Nm0rCiEeeXhtmVkHi-QA _h4_6wLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8Nm0rCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8Nm0bCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8O08bCiEeeXhtmVkHi-QA" name="" memberEnd="_h8O08rCiEeeXhtmVkHi-QA _h5Ah0LCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8O08rCiEeeXhtmVkHi-QA" name="" type="_hqlEQLCiEeeXhtmVkHi-QA" association="_h8O08bCiEeeXhtmVkHi-QA"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hlNcELCiEeeXhtmVkHi-QA" name="music">
        <packagedElement xmi:type="uml:Class" xmi:id="_hq7CgLCiEeeXhtmVkHi-QA" name="APhraseVisitor" isAbstract="true">
          <ownedComment xmi:id="_h7QkmLCiEeeXhtmVkHi-QA">
            <body>Command-based implementation of IPhraseVisitor that uses IPhraseVisitorCmds stored in a hash table.
@author swong
 *</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5Bv8LCiEeeXhtmVkHi-QA" name="defaultCmd" visibility="private" type="_hruTwLCiEeeXhtmVkHi-QA" association="_h8PcAbCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5CXAbCiEeeXhtmVkHi-QA" name="cmds" visibility="private" type="_hruTwLCiEeeXhtmVkHi-QA" association="_h8QqILCiEeeXhtmVkHi-QA">
            <qualifier xmi:id="_h5DlILCiEeeXhtmVkHi-QA">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </qualifier>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5C-ELCiEeeXhtmVkHi-QA" value="new Hashtable&lt;String, IPhraseVisitorCmd>()"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h1WJ0LCiEeeXhtmVkHi-QA" client="_hq7CgLCiEeeXhtmVkHi-QA" supplier="_hrr3gLCiEeeXhtmVkHi-QA" contract="_hrr3gLCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6iL0LCiEeeXhtmVkHi-QA" name="APhraseVisitor" specification="_hq83sLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6iL0bCiEeeXhtmVkHi-QA" type="_hq7CgLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>defaultCmd = new IPhraseVisitorCmd() {
			public Object apply(String idx, IPhrase host, Object... inps) {
				throw new IllegalArgumentException(&quot;APhraseVisitor: Unknown index encountered: &quot; + idx);
			}
		};
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6iy4LCiEeeXhtmVkHi-QA" name="APhraseVisitor" specification="_h1XX8LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6iy4bCiEeeXhtmVkHi-QA" name="defaultCmd" type="_hruTwLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6iy4rCiEeeXhtmVkHi-QA" type="_hq7CgLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>this.defaultCmd = defaultCmd;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6iy47CiEeeXhtmVkHi-QA" name="caseAt" specification="_h3e30LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6iy5LCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6iy5bCiEeeXhtmVkHi-QA" name="host" type="_hrqCULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6iy5rCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6iy57CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6iy6LCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>if (cmds.containsKey(id)) {
			return cmds.get(id).apply(id, host, params);
		} else {
			return defaultCmd.apply(id, host, params);
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6jZ8LCiEeeXhtmVkHi-QA" name="addCmd" specification="_h1YmELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6jZ8bCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6jZ8rCiEeeXhtmVkHi-QA" name="cmd" type="_hruTwLCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>cmds.put(id, cmd);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hq83sLCiEeeXhtmVkHi-QA" name="APhraseVisitor" method="_h6iL0LCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hq9ewLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hq9ewbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7QkmbCiEeeXhtmVkHi-QA">
              <body>Constructor that installs a default cmd that throws an IllegalArgumentException on any unknown host.</body>
            </ownedComment>
            <ownedComment xmi:id="_h7RLoLCiEeeXhtmVkHi-QA">
              <body>Abstract extended visitor implementation that uses a dictionary of commands to associate commands with host IDs.</body>
            </ownedComment>
            <ownedParameter xmi:id="_hq9ewrCiEeeXhtmVkHi-QA" type="_hq7CgLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h1XX8LCiEeeXhtmVkHi-QA" name="APhraseVisitor" method="_h6iy4LCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1XX8rCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1XX87CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7RLobCiEeeXhtmVkHi-QA">
              <body>Constructor that sets the default cmd to the supplied cmd.
	 * @param defaultCmd   the default cmd to use.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1XX8bCiEeeXhtmVkHi-QA" name="defaultCmd" type="_hruTwLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h1X_ALCiEeeXhtmVkHi-QA" type="_hq7CgLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h1YmELCiEeeXhtmVkHi-QA" name="addCmd" method="_h6jZ8LCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7RLorCiEeeXhtmVkHi-QA">
              <body>Add the given command to the dictionary, associated with the given id value.
	 * @param id The id of the host that will use this command
	 * @param cmd The command that will be run when the host calls for it.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1YmEbCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h1YmErCiEeeXhtmVkHi-QA" name="cmd" type="_hruTwLCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h3e30LCiEeeXhtmVkHi-QA" name="caseAt" method="_h6iy47CiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3e30bCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3e30rCiEeeXhtmVkHi-QA" name="host" type="_hrqCULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3fe4LCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3gtALCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3fe4bCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hrDlYLCiEeeXhtmVkHi-QA" name="Chord">
          <ownedComment xmi:id="_h7RLo7CiEeeXhtmVkHi-QA">
            <body>A collection of notes that make up a Chord.  All of the notes should
be played simultaneously.   The last note defines the length of all the notes.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7RysLCiEeeXhtmVkHi-QA">
            <body>A collection of Notes all played at once</body>
          </ownedComment>
          <generalization xmi:id="_h1cQcLCiEeeXhtmVkHi-QA" general="_hsNb8LCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5DlIbCiEeeXhtmVkHi-QA" name="ID" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5EMMLCiEeeXhtmVkHi-QA" value="&quot;Chord&quot;"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6kBALCiEeeXhtmVkHi-QA" name="Chord" specification="_h1abQLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6koELCiEeeXhtmVkHi-QA" name="notes" type="_hsB1wLCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6koEbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6koErCiEeeXhtmVkHi-QA" type="_hrDlYLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>super(notes);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6lPILCiEeeXhtmVkHi-QA" name="execute" specification="_h3hUELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6lPIbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6lPIrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6lPI7CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6lPJLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(ID, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6lPJbCiEeeXhtmVkHi-QA" name="toString" specification="_hrGBoLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6lPJrCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>String result = &quot;Chord(&quot; + notes[0];
		for (int i = 1; i &lt; notes.length; i++) {
			result += &quot;, &quot; + notes[i];
		}
		return result + &quot;)&quot;;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hrGBoLCiEeeXhtmVkHi-QA" name="toString" method="_h6lPJbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hrGosLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h1abQLCiEeeXhtmVkHi-QA" name="Chord" method="_h6kBALCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1abQrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1abQ7CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_h1abQbCiEeeXhtmVkHi-QA" name="notes" type="_hsB1wLCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h1bCUrCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h1bCUbCiEeeXhtmVkHi-QA" type="_hrDlYLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h3hUELCiEeeXhtmVkHi-QA" name="execute" method="_h6lPILCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3hUEbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3hUErCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3iiMbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3h7ILCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hrJsALCiEeeXhtmVkHi-QA" name="DecoratorSeqList">
          <ownedComment xmi:id="_h7RysbCiEeeXhtmVkHi-QA">
            <body>An ISeqList that transparently routes the visitor execution to its decoree.  
This class is primarily used to provide a placeholder when a the music should flow 
to a specific point in the sequence but that point has not yet been calculated, as occurs
for instance, during the processing of repeats.    When that target point is finally calculated, 
the decoree can be set and the decorated target will behave identically to the target.
This decorator can also be used to dynamically change the flow of the music by changing the target.  
@author swong</body>
          </ownedComment>
          <ownedComment xmi:id="_h7RysrCiEeeXhtmVkHi-QA">
            <body>Decorated ISeqList used as a transparent proxy placeholder.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5EMMbCiEeeXhtmVkHi-QA" name="decoree" visibility="private" type="_hrwI8LCiEeeXhtmVkHi-QA" association="_h8TGYLCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5EzQLCiEeeXhtmVkHi-QA" value="MTSeqList.Singleton"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h1eFoLCiEeeXhtmVkHi-QA" client="_hrJsALCiEeeXhtmVkHi-QA" supplier="_hrwI8LCiEeeXhtmVkHi-QA" contract="_hrwI8LCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6l2MLCiEeeXhtmVkHi-QA" name="DecoratorSeqList" specification="_h1essLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6l2MbCiEeeXhtmVkHi-QA" name="decoree" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6l2MrCiEeeXhtmVkHi-QA" type="_hrJsALCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>setDecoree(decoree);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6l2M7CiEeeXhtmVkHi-QA" name="setDecoree" specification="_h1fTwLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6l2NLCiEeeXhtmVkHi-QA" name="decoree" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>this.decoree = decoree;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6l2NbCiEeeXhtmVkHi-QA" name="execute" specification="_h3kXYLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6l2NrCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6l2N7CiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6l2OLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6l2ObCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return decoree.execute(algo, params);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hrMIQLCiEeeXhtmVkHi-QA" name="DecoratorSeqList">
            <eAnnotations xmi:id="_hrMIQbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hrMIQrCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_hrN9cLCiEeeXhtmVkHi-QA" type="_hrJsALCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h1essLCiEeeXhtmVkHi-QA" name="DecoratorSeqList" method="_h6l2MLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1essrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1ess7CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7Rys7CiEeeXhtmVkHi-QA">
              <body>Constructor used to set the decoree to a known value at construction time.
	 * @param decoree The decoree phrase sequence</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1essbCiEeeXhtmVkHi-QA" name="decoree" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h1estLCiEeeXhtmVkHi-QA" type="_hrJsALCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h1fTwLCiEeeXhtmVkHi-QA" name="setDecoree" method="_h6l2M7CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7RytLCiEeeXhtmVkHi-QA">
              <body>Setter methods used to set the decoree.
	 * @param decoree  The new decoree ISeqList.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1fTwbCiEeeXhtmVkHi-QA" name="decoree" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h3kXYLCiEeeXhtmVkHi-QA" name="execute" method="_h6l2NbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3kXYbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3kXYrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3k-crCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3k-cLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hrTdALCiEeeXhtmVkHi-QA" name="FineToggleDecoratorSeqList">
          <ownedComment xmi:id="_h7SZwLCiEeeXhtmVkHi-QA">
            <body>The class is used to implement &quot;Da Capo al fine&quot; or &quot;D.C. al fine&quot;, 
which is to repeat from the beginning up to the &quot;fine&quot; marker.

this class assumes that only two target decorees are ever used.

The is ToggleDecoratorSeqList that can be signaled to switch to the 
another target.   Be default, the target decoree (#0) remains the same even 
when it is accessed.  But after setFine() is called, the target decoree
is switched to the #1 decoree (the &quot;fine&quot; target, usually an MTSeqList because
it is the end of the piece).   After the #1 decoree is used, the target
decoree is advanced to the next available decoree, which , for two decorees, 
would be back to the #0 decoree.  The class returns to default behavior then.
@author swong</body>
          </ownedComment>
          <ownedComment xmi:id="_h7SZwbCiEeeXhtmVkHi-QA">
            <body>ToggleDecoratorSeqList with controllable cycling</body>
          </ownedComment>
          <generalization xmi:id="_h1i-ILCiEeeXhtmVkHi-QA" general="_hsRtYLCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5FaULCiEeeXhtmVkHi-QA" name="isFine" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5FaUbCiEeeXhtmVkHi-QA" value="false"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6mdQLCiEeeXhtmVkHi-QA" name="FineToggleDecoratorSeqList" specification="_hrUrILCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6mdQbCiEeeXhtmVkHi-QA" type="_hrTdALCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>super();
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6mdQrCiEeeXhtmVkHi-QA" name="FineToggleDecoratorSeqList" specification="_h1gh4LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6mdQ7CiEeeXhtmVkHi-QA" name="decorees" type="_hrwI8LCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6mdRLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6mdRbCiEeeXhtmVkHi-QA" type="_hrTdALCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>super(decorees);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6nEULCiEeeXhtmVkHi-QA" name="setFine" specification="_hrV5QLCiEeeXhtmVkHi-QA">
            <language>java</language>
            <body>this.isFine = true;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6nEUbCiEeeXhtmVkHi-QA" name="execute" specification="_h3nasLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6nEUrCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6nEU7CiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6nEVLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6nEVbCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>if (isFine) {
			isFine = false;
			this.setTargetToDecoree(1);
			return super.execute(algo, params);
		} else
			return getTargetDecoree().execute(algo, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6nrYLCiEeeXhtmVkHi-QA" name="toString" specification="_hrWgULCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6nrYbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return (String) this.execute(NESeqList.getToStringAlgo(), &quot;{&quot;);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hrUrILCiEeeXhtmVkHi-QA" name="FineToggleDecoratorSeqList" method="_h6mdQLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hrUrIbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hrUrIrCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7SZwrCiEeeXhtmVkHi-QA">
              <body>Instantiates the class with two MTSeqList decorees.</body>
            </ownedComment>
            <ownedParameter xmi:id="_hrVSMLCiEeeXhtmVkHi-QA" type="_hrTdALCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hrV5QLCiEeeXhtmVkHi-QA" name="setFine" method="_h6nEULCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7SZw7CiEeeXhtmVkHi-QA">
              <body>Sets the system to use the &quot;fine&quot; decorator at the next execution.</body>
            </ownedComment>
          </ownedOperation>
          <ownedOperation xmi:id="_hrWgULCiEeeXhtmVkHi-QA" name="toString" method="_h6nrYLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hrXHYLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h1gh4LCiEeeXhtmVkHi-QA" name="FineToggleDecoratorSeqList" method="_h6mdQrCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1gh4rCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1gh47CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_h1gh4bCiEeeXhtmVkHi-QA" name="decorees" type="_hrwI8LCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h1hwALCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h1hI8bCiEeeXhtmVkHi-QA" type="_hrTdALCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h3nasLCiEeeXhtmVkHi-QA" name="execute" method="_h6nEUbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3nasbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3nasrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3oo0LCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3oBwLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hrecILCiEeeXhtmVkHi-QA" name="Header">
          <ownedComment xmi:id="_h7TA0LCiEeeXhtmVkHi-QA">
            <body>An abc Header.  Headers are identified by a one character &quot;id&quot; and
can have an arbitrary string value. &lt;br/>
Note that this class represents many different *types* of headers, 
each with its own id value.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7TA0bCiEeeXhtmVkHi-QA">
            <body>A single Header class represents multiple, distinct header hosts.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5GocLCiEeeXhtmVkHi-QA" name="_id" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5HPgLCiEeeXhtmVkHi-QA" name="_value" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h1kzULCiEeeXhtmVkHi-QA" client="_hrecILCiEeeXhtmVkHi-QA" supplier="_hrqCULCiEeeXhtmVkHi-QA" contract="_hrqCULCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6oScLCiEeeXhtmVkHi-QA" name="Header" specification="_hrg4YLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6oScbCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6oScrCiEeeXhtmVkHi-QA" name="value">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6oSc7CiEeeXhtmVkHi-QA" type="_hrecILCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>_id = id;
		_value = value;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6oSdLCiEeeXhtmVkHi-QA" name="execute" specification="_h3qeALCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6oSdbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6oSdrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6oSd7CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6oSeLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(_id, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6o5gLCiEeeXhtmVkHi-QA" name="getID" specification="_hrj7sLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6o5gbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return _id;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6o5grCiEeeXhtmVkHi-QA" name="getValue" specification="_hrlJ0LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6o5g7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return _value;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6pgkLCiEeeXhtmVkHi-QA" name="toString" specification="_hrlw4LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6pgkbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return _id + &quot;:&quot; + _value;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hrg4YLCiEeeXhtmVkHi-QA" name="Header" method="_h6oScLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hritkrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hritk7CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7TA0rCiEeeXhtmVkHi-QA">
              <body>Create a header out of an id and value
	 * 
	 * @param id    - one character corresponding to the abc header name
	 * @param value - arbitrary string value of the header</body>
            </ownedComment>
            <ownedParameter xmi:id="_hritkLCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hritkbCiEeeXhtmVkHi-QA" name="value">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hritlLCiEeeXhtmVkHi-QA" type="_hrecILCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hrj7sLCiEeeXhtmVkHi-QA" name="getID" method="_h6o5gLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7TA07CiEeeXhtmVkHi-QA">
              <body>Accessor for the id.
	 * @return the _id</body>
            </ownedComment>
            <ownedParameter xmi:id="_hrkiwLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hrlJ0LCiEeeXhtmVkHi-QA" name="getValue" method="_h6o5grCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7TA1LCiEeeXhtmVkHi-QA">
              <body>Accessor for the text value of this header.
	 * @return the _value</body>
            </ownedComment>
            <ownedParameter xmi:id="_hrlJ0bCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hrlw4LCiEeeXhtmVkHi-QA" name="toString" method="_h6pgkLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7TA1bCiEeeXhtmVkHi-QA">
              <body>String representation of this header: &quot;id: text&quot;</body>
            </ownedComment>
            <ownedParameter xmi:id="_hrmX8LCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h3qeALCiEeeXhtmVkHi-QA" name="execute" method="_h6oSdLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3qeAbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3qeArCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3rsILCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3rFELCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_hro0MLCiEeeXhtmVkHi-QA" name="INote">
          <ownedComment xmi:id="_h7TA1rCiEeeXhtmVkHi-QA">
            <body>Note interface for Notes and collections of Notes.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7TA17CiEeeXhtmVkHi-QA">
            <body>A generalized notion of a note</body>
          </ownedComment>
          <generalization xmi:id="_h1mogLCiEeeXhtmVkHi-QA" general="_hrqCULCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_hrqCULCiEeeXhtmVkHi-QA" name="IPhrase">
          <ownedComment xmi:id="_h7Tn4LCiEeeXhtmVkHi-QA">
            <body>Top level of a piece of abc music.  The generalized notion of a playable piece of music.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7Tn4bCiEeeXhtmVkHi-QA">
            <body>Abstract Host
Each concrete host calls its associated case on the visitor.</body>
          </ownedComment>
          <ownedOperation xmi:id="_h3thULCiEeeXhtmVkHi-QA" name="execute">
            <ownedParameter xmi:id="_h3thUbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3thUrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3uvcLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3uIYLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_hrr3gLCiEeeXhtmVkHi-QA" name="IPhraseVisitor">
          <ownedComment xmi:id="_h7Tn4rCiEeeXhtmVkHi-QA">
            <body>Interface for a Phrase visitor.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7Tn47CiEeeXhtmVkHi-QA">
            <body>Abstract extended visitor.
Supplies case behavior for every host.</body>
          </ownedComment>
          <ownedOperation xmi:id="_h3vWgLCiEeeXhtmVkHi-QA" name="caseAt">
            <ownedParameter xmi:id="_h3vWgbCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3vWgrCiEeeXhtmVkHi-QA" name="host" type="_hrqCULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3vWg7CiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3wkoLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3v9kLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_hruTwLCiEeeXhtmVkHi-QA" name="IPhraseVisitorCmd">
          <ownedComment xmi:id="_h7Tn5LCiEeeXhtmVkHi-QA">
            <body>The command used by APhraseVisitor that is associated with a host or hosts.
@author rixner</body>
          </ownedComment>
          <ownedComment xmi:id="_h7Tn5bCiEeeXhtmVkHi-QA">
            <body>Abstract command used by APhraseVisitor.  Each command is associated with a particular host(s).</body>
          </ownedComment>
          <ownedOperation xmi:id="_h3xLsLCiEeeXhtmVkHi-QA" name="apply">
            <ownedParameter xmi:id="_h3xywLCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3xywbCiEeeXhtmVkHi-QA" name="host" type="_hrqCULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3xywrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3yZ0bCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3xyw7CiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_hrwI8LCiEeeXhtmVkHi-QA" name="ISeqList">
          <ownedComment xmi:id="_h7Tn5rCiEeeXhtmVkHi-QA">
            <body>Interface for sequential lists of IPhrases.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7Tn57CiEeeXhtmVkHi-QA">
            <body>A list of IPhrases
e.g. an ordered sequence of Notes.</body>
          </ownedComment>
          <generalization xmi:id="_h1pEwLCiEeeXhtmVkHi-QA" general="_hrqCULCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hrxXELCiEeeXhtmVkHi-QA" name="MTSeqList">
          <ownedComment xmi:id="_h7Tn6LCiEeeXhtmVkHi-QA">
            <body>An empty sequence list.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7UO8LCiEeeXhtmVkHi-QA">
            <body>An empty ISeqList</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5H2kLCiEeeXhtmVkHi-QA" name="ID" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5H2kbCiEeeXhtmVkHi-QA" value="&quot;MTSeqList&quot;"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5IdoLCiEeeXhtmVkHi-QA" name="Singleton" isLeaf="true" isStatic="true" type="_hrxXELCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h8TtcbCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5IdobCiEeeXhtmVkHi-QA" value="new MTSeqList()"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h1pEwbCiEeeXhtmVkHi-QA" client="_hrxXELCiEeeXhtmVkHi-QA" supplier="_hrwI8LCiEeeXhtmVkHi-QA" contract="_hrwI8LCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6qHoLCiEeeXhtmVkHi-QA" name="execute" specification="_h3zA4LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6qHobCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6qHorCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6qHo7CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6qHpLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(ID, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6qusLCiEeeXhtmVkHi-QA" name="toString" specification="_hr1BcLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6qusbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return &quot;{}&quot;;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hrylMLCiEeeXhtmVkHi-QA" name="MTSeqList" visibility="private">
            <eAnnotations xmi:id="_hrzMQLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hrzMQbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_hrzzUbCiEeeXhtmVkHi-QA" type="_hrxXELCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hr1BcLCiEeeXhtmVkHi-QA" name="toString" method="_h6qusLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hr1ogLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h3zA4LCiEeeXhtmVkHi-QA" name="execute" method="_h6qHoLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3zn8LCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3zn8bCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h30PAbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3zn8rCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hr4EwLCiEeeXhtmVkHi-QA" name="NESeqList">
          <ownedComment xmi:id="_h7UO8bCiEeeXhtmVkHi-QA">
            <body>A non-empty (&quot;cons&quot;) sequence list.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7UO8rCiEeeXhtmVkHi-QA">
            <body>A non-empty ISeqList</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5IdorCiEeeXhtmVkHi-QA" name="ID" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5Ido7CiEeeXhtmVkHi-QA" value="&quot;NESeqList&quot;"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5JEsLCiEeeXhtmVkHi-QA" name="_first" visibility="private" type="_hrqCULCiEeeXhtmVkHi-QA" association="_h8U7kLCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5JrwLCiEeeXhtmVkHi-QA" name="_rest" visibility="private" type="_hrwI8LCiEeeXhtmVkHi-QA" association="_h8ViobCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5KS0LCiEeeXhtmVkHi-QA" name="_toStringAlgo" visibility="private" isStatic="true" type="_hrr3gLCiEeeXhtmVkHi-QA" association="_h8WwwbCiEeeXhtmVkHi-QA"/>
          <interfaceRealization xmi:id="_h1qS4LCiEeeXhtmVkHi-QA" client="_hr4EwLCiEeeXhtmVkHi-QA" supplier="_hrwI8LCiEeeXhtmVkHi-QA" contract="_hrwI8LCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6rVwLCiEeeXhtmVkHi-QA" name="NESeqList" specification="_h1q58LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6rVwbCiEeeXhtmVkHi-QA" name="first" type="_hrqCULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6rVwrCiEeeXhtmVkHi-QA" name="rest" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6rVw7CiEeeXhtmVkHi-QA" type="_hr4EwLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>this._rest = rest;
		this._first = first;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6tK8LCiEeeXhtmVkHi-QA" name="getFirst" specification="_hr558LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6tK8bCiEeeXhtmVkHi-QA" type="_hrqCULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return _first;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6uZELCiEeeXhtmVkHi-QA" name="getRest" specification="_hr6hALCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6uZEbCiEeeXhtmVkHi-QA" type="_hrwI8LCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return _rest;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6vnMLCiEeeXhtmVkHi-QA" name="execute" specification="_h32rQLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6vnMbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6vnMrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6vnM7CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6vnNLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(ID, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6wOQLCiEeeXhtmVkHi-QA" name="setToStringAlgo" specification="_h1tWMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6wOQbCiEeeXhtmVkHi-QA" name="stringAlgo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>_toStringAlgo = stringAlgo;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6wOQrCiEeeXhtmVkHi-QA" name="getToStringAlgo" specification="_hr7vILCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6wOQ7CiEeeXhtmVkHi-QA" type="_hrr3gLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return _toStringAlgo;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6w1ULCiEeeXhtmVkHi-QA" name="toString" specification="_hr89QLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6w1UbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return (String) _rest.execute(_toStringAlgo, &quot;{&quot; + _first.toString());
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hr558LCiEeeXhtmVkHi-QA" name="getFirst" method="_h6tK8LCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7UO9LCiEeeXhtmVkHi-QA">
              <body>Accessor method for the first element
	 * @return the IPhrase that is the first element of the sequence list</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1sIELCiEeeXhtmVkHi-QA" type="_hrqCULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hr6hALCiEeeXhtmVkHi-QA" name="getRest" method="_h6uZELCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7UO9bCiEeeXhtmVkHi-QA">
              <body>Accessor method for the rest of the lsit
	 * @return the rest of the sequence list</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1svILCiEeeXhtmVkHi-QA" type="_hrwI8LCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hr7vILCiEeeXhtmVkHi-QA" name="getToStringAlgo" visibility="package" isStatic="true" method="_h6wOQrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7U2AbCiEeeXhtmVkHi-QA">
              <body>Getter for the _toStringAlgo helper.  Only for use internally inside this package
	 * so ToggleDecoratorSeqList and FineToggleDecoratorSeqList can use the same visitor.
	 * @return the toStringAlgo helper visitor</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1t9QLCiEeeXhtmVkHi-QA" type="_hrr3gLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hr89QLCiEeeXhtmVkHi-QA" name="toString" method="_h6w1ULCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7U2ArCiEeeXhtmVkHi-QA">
              <body>Run a visitor over the list to convert it to a String.  
	 * Delegates to the rest of the list using the helper algo, with the accumulator 
	 * (params[0]) set to &quot;{&quot;+_first.toString().  
	 * @return &quot;{a, b, c, d}&quot;</body>
            </ownedComment>
            <ownedParameter xmi:id="_hr9kULCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h1q58LCiEeeXhtmVkHi-QA" name="NESeqList" method="_h6rVwLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1rhALCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1rhAbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7UO87CiEeeXhtmVkHi-QA">
              <body>Cons an IPhrase to a Sequence List.
	 * @param first The first element of the sequence
	 * @param rest The rest of the sequence</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1q58bCiEeeXhtmVkHi-QA" name="first" type="_hrqCULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h1q58rCiEeeXhtmVkHi-QA" name="rest" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h1rhArCiEeeXhtmVkHi-QA" type="_hr4EwLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h1tWMLCiEeeXhtmVkHi-QA" name="setToStringAlgo" isStatic="true" method="_h6wOQLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7U2ALCiEeeXhtmVkHi-QA">
              <body>Setter for the _toStringAlgo helper.  This non-typical method is provided solely 
	 * for the purpose of enabling the student to install their toStringAlgo into the 
	 * read-only provided code.
	 * @param stringAlgo The helper algo to use.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h1tWMbCiEeeXhtmVkHi-QA" name="stringAlgo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h32rQLCiEeeXhtmVkHi-QA" name="execute" method="_h6vnMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h32rQbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h32rQrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h33SUbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h32rQ7CiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hsB1wLCiEeeXhtmVkHi-QA" name="Note">
          <ownedComment xmi:id="_h7U2A7CiEeeXhtmVkHi-QA">
            <body>Basic class representing musical Notes.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7U2BLCiEeeXhtmVkHi-QA">
            <body>A playable note or rest.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5K54LCiEeeXhtmVkHi-QA" name="ID" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5K54bCiEeeXhtmVkHi-QA" value="&quot;Note&quot;"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5Lg8LCiEeeXhtmVkHi-QA" name="name" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5Lg8bCiEeeXhtmVkHi-QA" value="'Z'"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5Lg8rCiEeeXhtmVkHi-QA" name="octave">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5Lg87CiEeeXhtmVkHi-QA" value="0"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5MIALCiEeeXhtmVkHi-QA" name="accidental" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5MIAbCiEeeXhtmVkHi-QA" value="0"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5MvELCiEeeXhtmVkHi-QA" name="duration">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5MvEbCiEeeXhtmVkHi-QA" value="0"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5NWILCiEeeXhtmVkHi-QA" name="isNatural" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5NWIbCiEeeXhtmVkHi-QA" value="false"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h1vLYLCiEeeXhtmVkHi-QA" client="_hsB1wLCiEeeXhtmVkHi-QA" supplier="_hro0MLCiEeeXhtmVkHi-QA" contract="_hro0MLCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6xcYLCiEeeXhtmVkHi-QA" name="Note" specification="_hsE5ELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6xcYbCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6xcYrCiEeeXhtmVkHi-QA" name="octave">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6xcY7CiEeeXhtmVkHi-QA" name="accidental">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6xcZLCiEeeXhtmVkHi-QA" name="duration">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6xcZbCiEeeXhtmVkHi-QA" name="isNatural">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6xcZrCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>setName(name);
		setOctave(octave);
		setAccidental(accidental);
		setDuration(duration);
		setIsNatural(isNatural);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6yDcLCiEeeXhtmVkHi-QA" name="toString" specification="_hsGuQLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6yDcbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>String s = &quot;(&quot;;
		s += Character.toString(name);
		int a = accidental;
		if (isNatural) {
			s += &quot;n&quot;;
		}
		while (a &lt; 0) {
			s += &quot;b&quot;;
			a++;
		}
		while (a > 0) {
			s += &quot;#&quot;;
			a--;
		}
		s += &quot;, &quot; + Integer.toString(octave) + &quot;, &quot;;
		s += String.format(&quot;%3.2f&quot;, duration);
		s += &quot;)&quot;;

		return s;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6yDcrCiEeeXhtmVkHi-QA" name="execute" specification="_h36VoLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6yDc7CiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6yDdLCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6yDdbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6yDdrCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(ID, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6yqgLCiEeeXhtmVkHi-QA" name="setName" specification="_hsIjcLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6yqgbCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedParameter>
            <language>java</language>
            <body>switch (name) {
		case 'a':
		case 'A':
			this.name = 'A';
			break;

		case 'b':
		case 'B':
			this.name = 'B';
			break;

		case 'c':
		case 'C':
			this.name = 'C';
			break;

		case 'd':
		case 'D':
			this.name = 'D';
			break;

		case 'e':
		case 'E':
			this.name = 'E';
			break;

		case 'f':
		case 'F':
			this.name = 'F';
			break;

		case 'g':
		case 'G':
			this.name = 'G';
			break;

		default:
			this.name = 'Z';
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6yqgrCiEeeXhtmVkHi-QA" name="setAccidental" specification="_hsJKgLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6yqg7CiEeeXhtmVkHi-QA" name="accidental">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>this.accidental = accidental;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6yqhLCiEeeXhtmVkHi-QA" name="getIsNatural" specification="_hsJxkLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6yqhbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
            <language>java</language>
            <body>return isNatural;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6zRkLCiEeeXhtmVkHi-QA" name="setIsNatural" specification="_hsKYoLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6zRkbCiEeeXhtmVkHi-QA" name="isNatural">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
            <language>java</language>
            <body>this.isNatural = isNatural;
		if (isNatural)
			accidental = 0;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hsE5ELCiEeeXhtmVkHi-QA" name="Note" method="_h6xcYLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hsGHMLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hsGHMbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7U2BbCiEeeXhtmVkHi-QA">
              <body>Constructor for the class
	 * @param name  The name of the note
	 * @param octave The octave of the note w.r.t. middle C.  Zero = same octave as middle C.
	 * @param accidental accidental setting sharp &amp;gt; 0, flat &amp;lt; 0
	 * @param duration duration of note
	 * @param isNatural flag to override key signature.  True if note should be natural, overriding key signature.</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsE5EbCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsFgILCiEeeXhtmVkHi-QA" name="octave">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsFgIbCiEeeXhtmVkHi-QA" name="accidental">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsFgIrCiEeeXhtmVkHi-QA" name="duration">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsFgI7CiEeeXhtmVkHi-QA" name="isNatural">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsGHMrCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hsGuQLCiEeeXhtmVkHi-QA" name="toString" method="_h6yDcLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7U2BrCiEeeXhtmVkHi-QA">
              <body>Returns a string representation of the Note  
	 * @return &quot;(name, octave, duration)&quot;</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsHVULCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hsIjcLCiEeeXhtmVkHi-QA" name="setName" method="_h6yqgLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7U2B7CiEeeXhtmVkHi-QA">
              <body>Accessor to set the name of the note
	 * @param name - the name to set</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsIjcbCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hsJKgLCiEeeXhtmVkHi-QA" name="setAccidental" method="_h6yqgrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7VdELCiEeeXhtmVkHi-QA">
              <body>Accessor to set the accidental value
	 * @param accidental - the accidental to set</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsJKgbCiEeeXhtmVkHi-QA" name="accidental">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hsJxkLCiEeeXhtmVkHi-QA" name="getIsNatural" method="_h6yqhLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7VdEbCiEeeXhtmVkHi-QA">
              <body>Accessor for isNatural flag
	 * @return isNatural flag setting</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsJxkbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hsKYoLCiEeeXhtmVkHi-QA" name="setIsNatural" method="_h6zRkLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7VdErCiEeeXhtmVkHi-QA">
              <body>Settor for isNatural flag.  Accidentals will be set to zero if isNatural is true.
	 * @param isNatural  New isNatural setting</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsKYobCiEeeXhtmVkHi-QA" name="isNatural">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h36VoLCiEeeXhtmVkHi-QA" name="execute" method="_h6yDcrCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h36VobCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h36VorCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h368sbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h36Vo7CiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hsNb8LCiEeeXhtmVkHi-QA" name="NoteCollection" isAbstract="true">
          <ownedComment xmi:id="_h7VdE7CiEeeXhtmVkHi-QA">
            <body>A collection of multiple notes</body>
          </ownedComment>
          <ownedComment xmi:id="_h7VdFLCiEeeXhtmVkHi-QA">
            <body>A collection of Notes</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5N9MLCiEeeXhtmVkHi-QA" name="notes" visibility="protected" type="_hsB1wLCiEeeXhtmVkHi-QA" association="_h8X-4LCiEeeXhtmVkHi-QA">
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5N9MbCiEeeXhtmVkHi-QA" value="*"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h1yOsLCiEeeXhtmVkHi-QA" client="_hsNb8LCiEeeXhtmVkHi-QA" supplier="_hro0MLCiEeeXhtmVkHi-QA" contract="_hro0MLCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6z4oLCiEeeXhtmVkHi-QA" name="NoteCollection" specification="_h1y1wLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6z4obCiEeeXhtmVkHi-QA" name="notes" type="_hsB1wLCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6z4orCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6z4o7CiEeeXhtmVkHi-QA" type="_hsNb8LCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>this.notes = notes;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6z4pLCiEeeXhtmVkHi-QA" name="getNotes" specification="_hsPRILCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6z4pbCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6z4prCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <language>java</language>
            <body>return notes;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hsPRILCiEeeXhtmVkHi-QA" name="getNotes" method="_h6z4pLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7VdFbCiEeeXhtmVkHi-QA">
              <body>Accessor for the array of notes in this collection
	 * @return the array of notes</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsPRIbCiEeeXhtmVkHi-QA" type="_hsB1wLCiEeeXhtmVkHi-QA" direction="return">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_hsPRIrCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h1y1wLCiEeeXhtmVkHi-QA" name="NoteCollection" method="_h6z4oLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1zc0LCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1zc0bCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_h1y1wbCiEeeXhtmVkHi-QA" name="notes" type="_hsB1wLCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h10D4rCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h10D4bCiEeeXhtmVkHi-QA" type="_hsNb8LCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hsRtYLCiEeeXhtmVkHi-QA" name="ToggleDecoratorSeqList">
          <ownedComment xmi:id="_h7VdFrCiEeeXhtmVkHi-QA">
            <body>Multiple Decorator ISeqList where the active decoree (the &quot;target&quot;) is
toggled (cycled, actually) through all the available decorees.   
This is arguably a State Design Pattern where each decoree is 
considered to be another state of the system.
This is used to implement repeats where the first time through, the notes are linked
back to a repeat start (decoree #0) but the next time through, the next note is the one
after the repeat (decoree #1).

@author swong</body>
          </ownedComment>
          <ownedComment xmi:id="_h7VdF7CiEeeXhtmVkHi-QA">
            <body>Decorated ISeqList that transparently cycles through multiple targets (decorees)</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5OkQbCiEeeXhtmVkHi-QA" name="decorees" visibility="private" type="_hrwI8LCiEeeXhtmVkHi-QA" association="_h8Yl8bCiEeeXhtmVkHi-QA">
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5PLULCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5PLUrCiEeeXhtmVkHi-QA" value="{ MTSeqList.Singleton, MTSeqList.Singleton }"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5PyYLCiEeeXhtmVkHi-QA" name="targetIdx" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5PyYbCiEeeXhtmVkHi-QA" value="0"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h115ELCiEeeXhtmVkHi-QA" client="_hsRtYLCiEeeXhtmVkHi-QA" supplier="_hrwI8LCiEeeXhtmVkHi-QA" contract="_hrwI8LCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6z4p7CiEeeXhtmVkHi-QA" name="ToggleDecoratorSeqList" specification="_h13HMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6z4qLCiEeeXhtmVkHi-QA" name="decorees" type="_hrwI8LCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6z4qbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6z4qrCiEeeXhtmVkHi-QA" type="_hsRtYLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>setDecorees(decorees);
		setTargetToDecoree(0);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h60fsLCiEeeXhtmVkHi-QA" name="setDecorees" specification="_h14VUrCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h60fsbCiEeeXhtmVkHi-QA" name="decorees" type="_hrwI8LCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h60fsrCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <language>java</language>
            <body>this.decorees = decorees;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h60fs7CiEeeXhtmVkHi-QA" name="setDecoree" specification="_h16KgLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h60ftLCiEeeXhtmVkHi-QA" name="idx">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h60ftbCiEeeXhtmVkHi-QA" name="decoree" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>this.decorees[idx] = decoree;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h61GwLCiEeeXhtmVkHi-QA" name="setTargetToDecoree" specification="_hsX0ALCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h61GwbCiEeeXhtmVkHi-QA" name="targetIdx">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>this.targetIdx = targetIdx;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h61GwrCiEeeXhtmVkHi-QA" name="getTargetDecoree" specification="_hsYbELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h61Gw7CiEeeXhtmVkHi-QA" type="_hrwI8LCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return decorees[targetIdx];
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h61GxLCiEeeXhtmVkHi-QA" name="execute" specification="_h39Y8LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h61GxbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h61GxrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h61Gx7CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h61GyLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>ISeqList target = decorees[targetIdx++];
		if (targetIdx >= decorees.length)
			targetIdx = 0; // This must be set before the delegate because it may be needed before the recursion returns.
		return target.execute(algo, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h61t0LCiEeeXhtmVkHi-QA" name="toString" specification="_hsZpMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h61t0bCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return (String) this.execute(NESeqList.getToStringAlgo(), &quot;{&quot;);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hsUJoLCiEeeXhtmVkHi-QA" name="ToggleDecoratorSeqList">
            <eAnnotations xmi:id="_hsVXwLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hsVXwbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_hsWl4LCiEeeXhtmVkHi-QA" type="_hsRtYLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hsX0ALCiEeeXhtmVkHi-QA" name="setTargetToDecoree" method="_h61GwLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7WEILCiEeeXhtmVkHi-QA">
              <body>Used to explicitly set the target (active) decoree if needed.
	 * @param targetIdx  the index of the target decoree</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsX0AbCiEeeXhtmVkHi-QA" name="targetIdx">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hsYbELCiEeeXhtmVkHi-QA" name="getTargetDecoree" method="_h61GwrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7WEIbCiEeeXhtmVkHi-QA">
              <body>Accessor for the current target (active) decoree
	 * @return  The current target (active) decoree</body>
            </ownedComment>
            <ownedParameter xmi:id="_h16xkLCiEeeXhtmVkHi-QA" type="_hrwI8LCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hsZpMLCiEeeXhtmVkHi-QA" name="toString" method="_h61t0LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hsaQQLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h13HMLCiEeeXhtmVkHi-QA" name="ToggleDecoratorSeqList" method="_h6z4p7CiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h13HMrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h13HM7CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_h13HMbCiEeeXhtmVkHi-QA" name="decorees" type="_hrwI8LCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h14VULCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h13uQbCiEeeXhtmVkHi-QA" type="_hsRtYLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h14VUrCiEeeXhtmVkHi-QA" name="setDecorees" method="_h60fsLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h14VU7CiEeeXhtmVkHi-QA" name="decorees" type="_hrwI8LCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h15jcbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h16KgLCiEeeXhtmVkHi-QA" name="setDecoree" method="_h60fs7CiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7VdGLCiEeeXhtmVkHi-QA">
              <body>Setter methods used to set a particular decoree.   
	 * The specified index must already exist.
	 * @param idx The index of the decoree to replace
	 * @param decoree  The new decoree ISeqList.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h16KgbCiEeeXhtmVkHi-QA" name="idx">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h16KgrCiEeeXhtmVkHi-QA" name="decoree" type="_hrwI8LCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h39Y8LCiEeeXhtmVkHi-QA" name="execute" method="_h61GxLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h3-AALCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h3-AAbCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h3_OILCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h3-nELCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hshlALCiEeeXhtmVkHi-QA" name="Triplet">
          <ownedComment xmi:id="_h7WEIrCiEeeXhtmVkHi-QA">
            <body>A musical triplet.  The three notes should be played with 2/3 of their
indicated duration.</body>
          </ownedComment>
          <ownedComment xmi:id="_h7WEI7CiEeeXhtmVkHi-QA">
            <body>A set of 3 notes played in sequence in a special manner.</body>
          </ownedComment>
          <generalization xmi:id="_h1904LCiEeeXhtmVkHi-QA" general="_hsNb8LCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5QZcLCiEeeXhtmVkHi-QA" name="ID" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5QZcbCiEeeXhtmVkHi-QA" value="&quot;Triplet&quot;"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h62U4LCiEeeXhtmVkHi-QA" name="Triplet" specification="_h18mwLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h62U4bCiEeeXhtmVkHi-QA" name="n1" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h62U4rCiEeeXhtmVkHi-QA" name="n2" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h62U47CiEeeXhtmVkHi-QA" name="n3" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h62U5LCiEeeXhtmVkHi-QA" type="_hshlALCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>super(n1, n2, n3);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6278LCiEeeXhtmVkHi-QA" name="execute" specification="_h4BDULCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6278bCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6278rCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h62787CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6279LCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(ID, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h63jALCiEeeXhtmVkHi-QA" name="toString" specification="_hsjaMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h63jAbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>String result = &quot;Triplet(&quot; + notes[0];
		for (int i = 1; i &lt; notes.length; i++) {
			result += &quot;, &quot; + notes[i];
		}
		return result + &quot;)&quot;;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hsjaMLCiEeeXhtmVkHi-QA" name="toString" method="_h63jALCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hskBQLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h18mwLCiEeeXhtmVkHi-QA" name="Triplet" method="_h62U4LCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h18mxLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h19N0LCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_h18mwbCiEeeXhtmVkHi-QA" name="n1" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h18mwrCiEeeXhtmVkHi-QA" name="n2" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h18mw7CiEeeXhtmVkHi-QA" name="n3" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h19N0bCiEeeXhtmVkHi-QA" type="_hshlALCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h4BDULCiEeeXhtmVkHi-QA" name="execute" method="_h6278LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h4BDUbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4BDUrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h4CRcLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4BqYLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hsmdgLCiEeeXhtmVkHi-QA" name="Tuplet">
          <ownedComment xmi:id="_h7WrMLCiEeeXhtmVkHi-QA">
            <body>Class that represents a tuplet, a series of notes played in a fraction of their normal total time.
The exact fraction depends on the meter and the number of notes in the tuplet.
A triplet is a specific type of tuplet.
@author swong</body>
          </ownedComment>
          <ownedComment xmi:id="_h7WrMbCiEeeXhtmVkHi-QA">
            <body>A arbitrary set of notes played in sequence in a special manner.</body>
          </ownedComment>
          <generalization xmi:id="_h2BfQLCiEeeXhtmVkHi-QA" general="_hsNb8LCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5RAgLCiEeeXhtmVkHi-QA" name="ID" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5RnkLCiEeeXhtmVkHi-QA" value="&quot;Tuplet&quot;"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h63jArCiEeeXhtmVkHi-QA" name="Tuplet" specification="_h1_qELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h63jA7CiEeeXhtmVkHi-QA" name="notes" type="_hsB1wLCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h63jBLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h63jBbCiEeeXhtmVkHi-QA" type="_hsmdgLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>super(notes);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h64KELCiEeeXhtmVkHi-QA" name="execute" specification="_h4EtsLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h64KEbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h64KErCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h64KE7CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h64KFLCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(ID, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h64KFbCiEeeXhtmVkHi-QA" name="toString" specification="_hsnroLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h64KFrCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>String result = &quot;Tuplet(&quot; + notes[0];
		for (int i = 1; i &lt; notes.length; i++) {
			result += &quot;, &quot; + notes[i];
		}
		return result + &quot;)&quot;;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hsnroLCiEeeXhtmVkHi-QA" name="toString" method="_h64KFbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hsoSsLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h1_qELCiEeeXhtmVkHi-QA" name="Tuplet" method="_h63jArCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h1_qErCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h1_qE7CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_h1_qEbCiEeeXhtmVkHi-QA" name="notes" type="_hsB1wLCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h2ARIrCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2ARIbCiEeeXhtmVkHi-QA" type="_hsmdgLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h4EtsLCiEeeXhtmVkHi-QA" name="execute" method="_h64KELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h4EtsbCiEeeXhtmVkHi-QA" name="algo" type="_hrr3gLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4EtsrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h4FUwbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4Ets7CiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8PcAbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8PcArCiEeeXhtmVkHi-QA _h5Bv8LCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8PcArCiEeeXhtmVkHi-QA" name="" type="_hq7CgLCiEeeXhtmVkHi-QA" association="_h8PcAbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8QqILCiEeeXhtmVkHi-QA" name="" memberEnd="_h8QqIbCiEeeXhtmVkHi-QA _h5CXAbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8QqIbCiEeeXhtmVkHi-QA" name="" type="_hq7CgLCiEeeXhtmVkHi-QA" association="_h8QqILCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8TGYLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8TGYbCiEeeXhtmVkHi-QA _h5EMMbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8TGYbCiEeeXhtmVkHi-QA" name="" type="_hrJsALCiEeeXhtmVkHi-QA" association="_h8TGYLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8TtcbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8TtcrCiEeeXhtmVkHi-QA _h5IdoLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8TtcrCiEeeXhtmVkHi-QA" name="" type="_hrxXELCiEeeXhtmVkHi-QA" association="_h8TtcbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8U7kLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8U7kbCiEeeXhtmVkHi-QA _h5JEsLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8U7kbCiEeeXhtmVkHi-QA" name="" type="_hr4EwLCiEeeXhtmVkHi-QA" association="_h8U7kLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8ViobCiEeeXhtmVkHi-QA" name="" memberEnd="_h8ViorCiEeeXhtmVkHi-QA _h5JrwLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8ViorCiEeeXhtmVkHi-QA" name="" type="_hr4EwLCiEeeXhtmVkHi-QA" association="_h8ViobCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8WwwbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8WwwrCiEeeXhtmVkHi-QA _h5KS0LCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8WwwrCiEeeXhtmVkHi-QA" name="" type="_hr4EwLCiEeeXhtmVkHi-QA" association="_h8WwwbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8X-4LCiEeeXhtmVkHi-QA" name="" memberEnd="_h8X-4bCiEeeXhtmVkHi-QA _h5N9MLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8X-4bCiEeeXhtmVkHi-QA" name="" type="_hsNb8LCiEeeXhtmVkHi-QA" association="_h8X-4LCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8Yl8bCiEeeXhtmVkHi-QA" name="" memberEnd="_h8Yl8rCiEeeXhtmVkHi-QA _h5OkQbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8Yl8rCiEeeXhtmVkHi-QA" name="" type="_hsRtYLCiEeeXhtmVkHi-QA" association="_h8Yl8bCiEeeXhtmVkHi-QA"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hlNcEbCiEeeXhtmVkHi-QA" name="player">
        <packagedElement xmi:type="uml:Interface" xmi:id="_hsqu8LCiEeeXhtmVkHi-QA" name="ISequencePlayerStatus">
          <ownedComment xmi:id="_h7WrMrCiEeeXhtmVkHi-QA">
            <body>Command that is used to notify a user that a track has stopped playing.
@author swong
 *</body>
          </ownedComment>
          <ownedAttribute xmi:id="_hsskILCiEeeXhtmVkHi-QA" name="NULL" isLeaf="true" isStatic="true" type="_hsqu8LCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h7_kYLCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_hstLMLCiEeeXhtmVkHi-QA" value="new ISequencePlayerStatus() {&#xA;&#xA;&#x9;&#x9;/**&#xA;&#x9;&#x9; * Prints &quot;ISequencePlayerStatus.NULL.finished(): Track finished playing!&quot; to console.&#xA;&#x9;&#x9; */&#xA;&#x9;&#x9;@Override&#xA;&#x9;&#x9;public void finished() {&#xA;&#x9;&#x9;&#x9;System.out.println(&quot;ISequencePlayerStatus.NULL.finished(): Track finished playing!&quot;);&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;}"/>
          </ownedAttribute>
          <ownedOperation xmi:id="_hsrWALCiEeeXhtmVkHi-QA" name="finished">
            <ownedComment xmi:id="_h7WrM7CiEeeXhtmVkHi-QA">
              <body>Called when a track stops playing.</body>
            </ownedComment>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_hsuZULCiEeeXhtmVkHi-QA" name="SequencePlayer">
          <ownedComment xmi:id="_h7WrNLCiEeeXhtmVkHi-QA">
            <body>Sequence Player to create and play MIDI music sequences.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5RnkbCiEeeXhtmVkHi-QA" name="END_OF_TRACK" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5SOoLCiEeeXhtmVkHi-QA" value="47"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5SOobCiEeeXhtmVkHi-QA" name="_sequence" visibility="private" type="_h4HJ8LCiEeeXhtmVkHi-QA" association="_h8Z0ELCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5S1sbCiEeeXhtmVkHi-QA" name="_track" visibility="private" type="_h4I_ILCiEeeXhtmVkHi-QA" association="_h8bCMbCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5TcwbCiEeeXhtmVkHi-QA" name="_bpm" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5UD0bCiEeeXhtmVkHi-QA" name="_ticksPerDefaultNote" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5VR8LCiEeeXhtmVkHi-QA" name="_ticksPerQuarterNote" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5V5AbCiEeeXhtmVkHi-QA" name="_instrument" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5WgEbCiEeeXhtmVkHi-QA" name="_sequencer" visibility="private" type="_h4K0ULCiEeeXhtmVkHi-QA" association="_h8c3YLCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5XuMLCiEeeXhtmVkHi-QA" name="_synthesizer" visibility="private" type="_h2wfELCiEeeXhtmVkHi-QA" association="_h8decbCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5YVQbCiEeeXhtmVkHi-QA" name="_offsets" visibility="private" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5Y8ULCiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5Y8UrCiEeeXhtmVkHi-QA" value="{ // add these amounts to the base value&#xA;&#x9;&#x9;&#x9;// A   B  C  D  E  F  G&#xA;&#x9;&#x9;&#x9;9, 11, 0, 2, 4, 5, 7 }"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h64xILCiEeeXhtmVkHi-QA" name="SequencePlayer" specification="_hsw1kLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h64xIbCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h64xIrCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h64xI7CiEeeXhtmVkHi-QA" type="_hsuZULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>init(ticksPerQuarterNote, instrument);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h64xJLCiEeeXhtmVkHi-QA" name="init" specification="_hsyDsLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h64xJbCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h64xJrCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h64xJ7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
            <language>java</language>
            <body>_ticksPerQuarterNote = ticksPerQuarterNote;
		_instrument = instrument;
		_bpm = 0;
		_ticksPerDefaultNote = _ticksPerQuarterNote;

		_sequencer = null;
		_synthesizer = null;
		_track = null;

		try {
			_sequencer = MidiSystem.getSequencer();
			_synthesizer = MidiSystem.getSynthesizer();

			_sequence = new Sequence(Sequence.PPQ, _ticksPerQuarterNote);
			_track = _sequence.createTrack();

			ShortMessage sm = new ShortMessage();
			sm.setMessage(ShortMessage.PROGRAM_CHANGE, 0, _instrument, 0);
			_track.add(new MidiEvent(sm, 0));
		} catch (MidiUnavailableException e) {
			System.out.println(&quot;MIDI Unavailable, SequencePlayer not initialized.&quot;);
			return false;
		} catch (InvalidMidiDataException e) {
			System.out.println(&quot;Invalid MIDI data.&quot;);
			e.printStackTrace();
			return false;
		}

		return true;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h65YMLCiEeeXhtmVkHi-QA" name="addNote" specification="_h2D7gLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h65YMbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h65YMrCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h65YM7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return addNote(note, start, 64);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h65YNLCiEeeXhtmVkHi-QA" name="addNote" specification="_h2FJoLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h65YNbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h65YNrCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h65YN7CiEeeXhtmVkHi-QA" name="velocity">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h65YOLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>if (_track == null) {
			return -1;
		}

		int duration = (int) Math.round(note.getDuration() * _ticksPerDefaultNote);
		if ('Z' == note.getName()) {
			// Rest - just return end tick count
			return start + duration;
		}

		int key = 60; // start at middle C
		key += note.getOctave() * 12;
		key += _offsets[note.getName() - 'A'];
		key += note.getAccidental();

		ShortMessage on;
		ShortMessage off;
		try {
			on = new ShortMessage();
			on.setMessage(ShortMessage.NOTE_ON, 0, key, velocity);
			off = new ShortMessage();
			off.setMessage(ShortMessage.NOTE_OFF, 0, key, velocity);
		} catch (InvalidMidiDataException e) {
			System.out.println(&quot;Invalid MIDI Data, note not added (&quot; + note + &quot;, &quot; + start + &quot;).&quot;);
			// e.printStackTrace();
			return start;
		}

		_track.add(new MidiEvent(on, start));
		_track.add(new MidiEvent(off, start + duration));
		return start + duration;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h65_QLCiEeeXhtmVkHi-QA" name="play" specification="_h2FwsbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h65_QbCiEeeXhtmVkHi-QA" name="statusCmd" type="_hsqu8LCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_h65_QrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_h65_Q7CiEeeXhtmVkHi-QA" key="final"/>
              </eAnnotations>
            </ownedParameter>
            <language>java</language>
            <body>try {
			_sequencer.open();
			_synthesizer.open();

			_sequencer.getTransmitter().setReceiver(_synthesizer.getReceiver());

			// Specify the sequence to play, and the tempo to play it at
			_sequencer.setSequence(_sequence);
			_sequencer.setTempoInBPM(_bpm);

			// Let us know when it is done playing
			_sequencer.addMetaEventListener(new MetaEventListener() {
				public void meta(MetaMessage m) {
					// A message of this type is automatically sent
					// when we reach the end of the track
					if (m.getType() == END_OF_TRACK) {
						System.out.println(&quot;Finished Playing&quot;);
						stop();
						statusCmd.finished();
					}
				}
			});

			// And start playing now.
			_sequencer.start();
		} catch (MidiUnavailableException e) {
			System.out.println(&quot;Unable to open MIDI synthesizer.&quot;);
			// e.printStackTrace();
		} catch (InvalidMidiDataException e) {
			System.out.println(&quot;Unable to play sequence.&quot;);
			// e.printStackTrace();
		} catch (Exception e) {
			e.printStackTrace();
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h65_RLCiEeeXhtmVkHi-QA" name="stop" specification="_hszR0LCiEeeXhtmVkHi-QA">
            <language>java</language>
            <body>_sequencer.close();
		_synthesizer.close();
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h65_RbCiEeeXhtmVkHi-QA" name="getTicksPerDefaultNote" specification="_hsz44LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h65_RrCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return _ticksPerDefaultNote;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h66mULCiEeeXhtmVkHi-QA" name="setTicksPerDefaultNote" specification="_hsz44rCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h66mUbCiEeeXhtmVkHi-QA" name="ticksPerDefaultNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>_ticksPerDefaultNote = ticksPerDefaultNote;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h66mUrCiEeeXhtmVkHi-QA" name="getTempo" specification="_hs0f8bCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h66mU7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return _bpm;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h66mVLCiEeeXhtmVkHi-QA" name="setTempo" specification="_hs28MLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h66mVbCiEeeXhtmVkHi-QA" name="bpm">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>_bpm = bpm;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h67NYLCiEeeXhtmVkHi-QA" name="getTicksPerQuarterNote" specification="_hs3jQLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h67NYbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return _ticksPerQuarterNote;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hsw1kLCiEeeXhtmVkHi-QA" name="SequencePlayer" method="_h64xILCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hsw1k7CiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hsw1lLCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7WrNbCiEeeXhtmVkHi-QA">
              <body>Create a new SequencePlayer to create and play music.
	 * 
	 * @param  ticksPerQuarterNote      - tick definition
	 * @param  instrument               - MIDI instrument</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsw1kbCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsw1krCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsw1lbCiEeeXhtmVkHi-QA" type="_hsuZULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hsyDsLCiEeeXhtmVkHi-QA" name="init" method="_h64xJLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7WrNrCiEeeXhtmVkHi-QA">
              <body>Initialize the SequencePlayer as per the supplied ticksPerQuarterNote and instrument
	 * this SequencePlayer was instantiated with.   This method is called by the constructor to 
	 * initialize the player upon instantiation and can be called again to reinitialize the 
	 * SequencePlayer.
	 * 
	 * @param  ticksPerQuarterNote      - tick definition
	 * @param  instrument               - MIDI instrument
	 * @return                         - true if properly initialized, false otherwise</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsyDsbCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsyDsrCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hsyDs7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hszR0LCiEeeXhtmVkHi-QA" name="stop" method="_h65_RLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSQbCiEeeXhtmVkHi-QA">
              <body>Stop playing music and close resources.</body>
            </ownedComment>
          </ownedOperation>
          <ownedOperation xmi:id="_hsz44LCiEeeXhtmVkHi-QA" name="getTicksPerDefaultNote" method="_h65_RbCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSQrCiEeeXhtmVkHi-QA">
              <body>Accessor to get the current ticks per default note
	 * @return the _ticksPerDefaultNote</body>
            </ownedComment>
            <ownedParameter xmi:id="_hsz44bCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hsz44rCiEeeXhtmVkHi-QA" name="setTicksPerDefaultNote" method="_h66mULCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSQ7CiEeeXhtmVkHi-QA">
              <body>Accessor to set the current ticks per default note
	 * @param ticksPerDefaultNote the _ticksPerDefaultNote to set</body>
            </ownedComment>
            <ownedParameter xmi:id="_hs0f8LCiEeeXhtmVkHi-QA" name="ticksPerDefaultNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hs0f8bCiEeeXhtmVkHi-QA" name="getTempo" method="_h66mUrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSRLCiEeeXhtmVkHi-QA">
              <body>Accessor for the current tempo
	 * @return the tempo (in beats per minute)</body>
            </ownedComment>
            <ownedParameter xmi:id="_hs2VILCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hs28MLCiEeeXhtmVkHi-QA" name="setTempo" method="_h66mVLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSRbCiEeeXhtmVkHi-QA">
              <body>Set the tempo - can't change the tempo in the middle of a sequence,
	 * the last tempo set will be used for the whole sequence.
	 * 
	 * @param bpm - beats per minute</body>
            </ownedComment>
            <ownedParameter xmi:id="_hs28MbCiEeeXhtmVkHi-QA" name="bpm">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hs3jQLCiEeeXhtmVkHi-QA" name="getTicksPerQuarterNote" method="_h67NYLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSRrCiEeeXhtmVkHi-QA">
              <body>Accessor for the current number of ticks per quarter note.
	 * @return the number of ticks per quarter note</body>
            </ownedComment>
            <ownedParameter xmi:id="_hs4KULCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h2D7gLCiEeeXhtmVkHi-QA" name="addNote" method="_h65YMLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7WrN7CiEeeXhtmVkHi-QA">
              <body>Add a note to the MIDI sequence with a default velocity of 64 for middle volume
	 * 
	 * @param note     - the note to schedule in the sequence
	 * @param start    - the tick at which this note should start playing
	 * @return         - the tick at which this note stops playing</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2D7gbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h2D7grCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2D7g7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h2FJoLCiEeeXhtmVkHi-QA" name="addNote" method="_h65YNLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7WrOLCiEeeXhtmVkHi-QA">
              <body>Add a note to the MIDI sequence.
	 * 
	 * @param note     - the note to schedule in the sequence
	 * @param start    - the tick at which this note should start playing
	 * @param velocity - the volume (0-127)
	 * @return         - the tick at which this note stops playing</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2FJobCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h2FJorCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2FJo7CiEeeXhtmVkHi-QA" name="velocity">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2FwsLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h2FwsbCiEeeXhtmVkHi-QA" name="play" method="_h65_QLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7XSQLCiEeeXhtmVkHi-QA">
              <body>Play the created Sequence.
	 * @param statusCmd The finished() method of this command is called when the track finishes being played, i.e. a normal termination.  There is no notification if play is forcibly stopped.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2FwsrCiEeeXhtmVkHi-QA" name="statusCmd" type="_hsqu8LCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_h2GXwLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_h2GXwbCiEeeXhtmVkHi-QA" key="final"/>
              </eAnnotations>
            </ownedParameter>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_htAGILCiEeeXhtmVkHi-QA" name="SequencePlayer2">
          <ownedComment xmi:id="_h7XSR7CiEeeXhtmVkHi-QA">
            <body>Sequence Player to create and play MIDI music sequences.
Differs from SequencePlayer because it has no play() method.   Instead, this class has 
a factory method that creates an SequencePlayer2.IPlayable object that can be individually 
and asynchronously started and stopped.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5bYkLCiEeeXhtmVkHi-QA" name="END_OF_TRACK" isLeaf="true" isStatic="true" isReadOnly="true">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5b_oLCiEeeXhtmVkHi-QA" value="47"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5b_obCiEeeXhtmVkHi-QA" name="_sequence" visibility="private" type="_h4HJ8LCiEeeXhtmVkHi-QA" association="_h8eskbCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5cmsbCiEeeXhtmVkHi-QA" name="_track" visibility="private" type="_h4I_ILCiEeeXhtmVkHi-QA" association="_h8ghwbCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5dNwbCiEeeXhtmVkHi-QA" name="_bpm" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5eb4LCiEeeXhtmVkHi-QA" name="_ticksPerDefaultNote" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5fC8bCiEeeXhtmVkHi-QA" name="_ticksPerQuarterNote" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5fqAbCiEeeXhtmVkHi-QA" name="_instrument" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5gRELCiEeeXhtmVkHi-QA" name="_offsets" isLeaf="true" isStatic="true" isReadOnly="true">
            <eAnnotations xmi:id="_h5gREbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h5gRErCiEeeXhtmVkHi-QA" key="ConstantWithGetter"/>
            </eAnnotations>
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h5gRE7CiEeeXhtmVkHi-QA" value="*"/>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5g4ILCiEeeXhtmVkHi-QA" value="{ // add these amounts to the base value&#xA;&#x9;&#x9;&#x9;// A   B  C  D  E  F  G&#xA;&#x9;&#x9;&#x9;9, 11, 0, 2, 4, 5, 7 }"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h670cLCiEeeXhtmVkHi-QA" name="SequencePlayer2" specification="_htFlsLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h670cbCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h670crCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h670c7CiEeeXhtmVkHi-QA" type="_htAGILCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>init(ticksPerQuarterNote, instrument);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h670dLCiEeeXhtmVkHi-QA" name="init" specification="_htGz0LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h670dbCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h670drCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h670d7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
            <language>java</language>
            <body>_ticksPerQuarterNote = ticksPerQuarterNote;
		_instrument = instrument;
		_bpm = 0;
		_ticksPerDefaultNote = _ticksPerQuarterNote;

		_track = null;

		try {

			_sequence = new Sequence(Sequence.PPQ, _ticksPerQuarterNote);
			_track = _sequence.createTrack();

			ShortMessage sm = new ShortMessage();
			sm.setMessage(ShortMessage.PROGRAM_CHANGE, 0, _instrument, 0);
			_track.add(new MidiEvent(sm, 0));
		} catch (InvalidMidiDataException e) {
			System.out.println(&quot;Invalid MIDI data.&quot;);
			e.printStackTrace();
			return false;
		}

		return true;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h670eLCiEeeXhtmVkHi-QA" name="addNote" specification="_h2KCILCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h670ebCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h670erCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h670e7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return addNote(note, start, 64);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h68bgLCiEeeXhtmVkHi-QA" name="addNote" specification="_h2LQQLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h68bgbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h68bgrCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h68bg7CiEeeXhtmVkHi-QA" name="velocity">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h68bhLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>if (_track == null) {
			return -1;
		}

		int duration = (int) Math.round(note.getDuration() * _ticksPerDefaultNote);
		if ('Z' == note.getName()) {
			// Rest - just return end tick count
			return start + duration;
		}

		int key = 60; // start at middle C
		key += note.getOctave() * 12;
		key += _offsets[note.getName() - 'A'];
		key += note.getAccidental();

		ShortMessage on;
		ShortMessage off;
		try {
			on = new ShortMessage();
			on.setMessage(ShortMessage.NOTE_ON, 0, key, velocity);
			off = new ShortMessage();
			off.setMessage(ShortMessage.NOTE_OFF, 0, key, velocity);
		} catch (InvalidMidiDataException e) {
			System.out.println(&quot;Invalid MIDI Data, note not added (&quot; + note + &quot;, &quot; + start + &quot;).&quot;);
			// e.printStackTrace();
			return start;
		}

		_track.add(new MidiEvent(on, start));
		_track.add(new MidiEvent(off, start + duration));
		return start + duration;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h68bhbCiEeeXhtmVkHi-QA" name="makePlayable" specification="_h2L3ULCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h68bhrCiEeeXhtmVkHi-QA" name="statusCmd" type="_hsqu8LCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_h68bh7CiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_h68biLCiEeeXhtmVkHi-QA" key="final"/>
              </eAnnotations>
            </ownedParameter>
            <ownedParameter xmi:id="_h68bibCiEeeXhtmVkHi-QA" type="_htB7ULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>try {
			final Sequencer _sequencer = MidiSystem.getSequencer(); // MIDI Sequencer object
			final Synthesizer _synthesizer = MidiSystem.getSynthesizer(); // MIDI synthesizer object

			final IPlayable playable = new IPlayable() {

				@Override
				public void start() {
					_sequencer.start();
				}

				@Override
				public void stop() {
					_sequencer.close();
					_synthesizer.close();
				}
			};

			_sequencer.open();
			_synthesizer.open();

			_sequencer.getTransmitter().setReceiver(_synthesizer.getReceiver());

			// Specify the sequence to play, and the tempo to play it at
			_sequencer.setSequence(_sequence);
			_sequencer.setTempoInBPM(_bpm);

			// Let us know when it is done playing
			_sequencer.addMetaEventListener(new MetaEventListener() {
				public void meta(MetaMessage m) {
					// A message of this type is automatically sent
					// when we reach the end of the track
					if (m.getType() == END_OF_TRACK) {
						System.out.println(&quot;SequencePlayer2.play(): End of Track&quot;);
						playable.stop();
						statusCmd.finished();
					} else
						System.out.println(&quot;Message type received: &quot; + m.getType());
				}
			});

			return playable;
		} catch (MidiUnavailableException e) {
			System.out.println(&quot;Unable to open MIDI synthesizer.&quot;);
			// e.printStackTrace();
		} catch (InvalidMidiDataException e) {
			System.out.println(&quot;Unable to play sequence.&quot;);
			// e.printStackTrace();
		} catch (Exception e) {
			e.printStackTrace();
		}

		return IPlayable.NULL;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h69CkLCiEeeXhtmVkHi-QA" name="getTicksPerDefaultNote" specification="_htIpALCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h69CkbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return _ticksPerDefaultNote;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h69CkrCiEeeXhtmVkHi-QA" name="setTicksPerDefaultNote" specification="_htJQELCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h69Ck7CiEeeXhtmVkHi-QA" name="ticksPerDefaultNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>_ticksPerDefaultNote = ticksPerDefaultNote;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h69ClLCiEeeXhtmVkHi-QA" name="getTempo" specification="_htJQErCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h69ClbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return _bpm;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h69ClrCiEeeXhtmVkHi-QA" name="setTempo" specification="_htKeMLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h69Cl7CiEeeXhtmVkHi-QA" name="bpm">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>_bpm = bpm;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h69poLCiEeeXhtmVkHi-QA" name="getTicksPerQuarterNote" specification="_htKeMrCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h69pobCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <language>java</language>
            <body>return _ticksPerQuarterNote;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_htFlsLCiEeeXhtmVkHi-QA" name="SequencePlayer2" method="_h670cLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_htGMwrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_htGMw7CiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7aVkbCiEeeXhtmVkHi-QA">
              <body>Create a new SequencePlayer to create and play music.
	 * 
	 * @param  ticksPerQuarterNote      - tick definition
	 * @param  instrument               - MIDI instrument</body>
            </ownedComment>
            <ownedParameter xmi:id="_htGMwLCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_htGMwbCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_htGMxLCiEeeXhtmVkHi-QA" type="_htAGILCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_htGz0LCiEeeXhtmVkHi-QA" name="init" method="_h670dLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7aVkrCiEeeXhtmVkHi-QA">
              <body>Initialize the SequencePlayer as per the supplied ticksPerQuarterNote and instrument
	 * this SequencePlayer was instantiated with.   This method is called by the constructor to 
	 * initialize the player upon instantiation and can be called again to reinitialize the 
	 * SequencePlayer.
	 * 
	 * @param  ticksPerQuarterNote      - tick definition
	 * @param  instrument               - MIDI instrument
	 * @return                         - true if properly initialized, false otherwise</body>
            </ownedComment>
            <ownedParameter xmi:id="_htGz0bCiEeeXhtmVkHi-QA" name="ticksPerQuarterNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_htHa4LCiEeeXhtmVkHi-QA" name="instrument">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_htHa4bCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_htIpALCiEeeXhtmVkHi-QA" name="getTicksPerDefaultNote" method="_h69CkLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7a8obCiEeeXhtmVkHi-QA">
              <body>Accessor to get the current ticks per default note
	 * @return the _ticksPerDefaultNote</body>
            </ownedComment>
            <ownedParameter xmi:id="_htIpAbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_htJQELCiEeeXhtmVkHi-QA" name="setTicksPerDefaultNote" method="_h69CkrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7a8orCiEeeXhtmVkHi-QA">
              <body>Accessor to set the current ticks per default note
	 * @param ticksPerDefaultNote the _ticksPerDefaultNote to set</body>
            </ownedComment>
            <ownedParameter xmi:id="_htJQEbCiEeeXhtmVkHi-QA" name="ticksPerDefaultNote">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_htJQErCiEeeXhtmVkHi-QA" name="getTempo" method="_h69ClLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7a8o7CiEeeXhtmVkHi-QA">
              <body>Accessor for the current tempo
	 * @return the tempo (in beats per minute)</body>
            </ownedComment>
            <ownedParameter xmi:id="_htJ3ILCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_htKeMLCiEeeXhtmVkHi-QA" name="setTempo" method="_h69ClrCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7a8pLCiEeeXhtmVkHi-QA">
              <body>Set the tempo - can't change the tempo in the middle of a sequence,
	 * the last tempo set will be used for the whole sequence.
	 * 
	 * @param bpm - beats per minute</body>
            </ownedComment>
            <ownedParameter xmi:id="_htKeMbCiEeeXhtmVkHi-QA" name="bpm">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_htKeMrCiEeeXhtmVkHi-QA" name="getTicksPerQuarterNote" method="_h69poLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7a8pbCiEeeXhtmVkHi-QA">
              <body>Accessor for the current number of ticks per quarter note.
	 * @return the number of ticks per quarter note</body>
            </ownedComment>
            <ownedParameter xmi:id="_htLFQLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h2KCILCiEeeXhtmVkHi-QA" name="addNote" method="_h670eLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7aVk7CiEeeXhtmVkHi-QA">
              <body>Add a note to the MIDI sequence with a default velocity of 64 for middle volume
	 * 
	 * @param note     - the note to schedule in the sequence
	 * @param start    - the tick at which this note should start playing
	 * @return         - the tick at which this note stops playing</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2KpMLCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h2KpMbCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2KpMrCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h2LQQLCiEeeXhtmVkHi-QA" name="addNote" method="_h68bgLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7aVlLCiEeeXhtmVkHi-QA">
              <body>Add a note to the MIDI sequence.
	 * 
	 * @param note     - the note to schedule in the sequence
	 * @param start    - the tick at which this note should start playing
	 * @param velocity - the volume (0-127)
	 * @return         - the tick at which this note stops playing</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2LQQbCiEeeXhtmVkHi-QA" name="note" type="_hsB1wLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h2LQQrCiEeeXhtmVkHi-QA" name="start">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2LQQ7CiEeeXhtmVkHi-QA" name="velocity">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2LQRLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h2L3ULCiEeeXhtmVkHi-QA" name="makePlayable" method="_h68bhbCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7a8oLCiEeeXhtmVkHi-QA">
              <body>Factory method for an IPlayable object that can play the currently programmed music sequence.
	 * @param statusCmd The finished() method of this command is called when the track finishes being played, i.e. a normal termination.  There is no notification if play is forcibly stopped.
	 * @return An IPlayable object associated with the currently programmed music sequence.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2MeYLCiEeeXhtmVkHi-QA" name="statusCmd" type="_hsqu8LCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_h2NFcbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_h2NFcrCiEeeXhtmVkHi-QA" key="final"/>
              </eAnnotations>
            </ownedParameter>
            <ownedParameter xmi:id="_h2NFcLCiEeeXhtmVkHi-QA" type="_htB7ULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <nestedClassifier xmi:type="uml:Interface" xmi:id="_htB7ULCiEeeXhtmVkHi-QA" name="IPlayable">
            <eAnnotations xmi:id="_htCiYLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_htCiYbCiEeeXhtmVkHi-QA" key="static"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7XSSLCiEeeXhtmVkHi-QA">
              <body>Interface  that represents a playable entity.
	 * @author swong
	 *</body>
            </ownedComment>
            <ownedAttribute xmi:id="_htDwgbCiEeeXhtmVkHi-QA" name="NULL" isLeaf="true" isStatic="true" type="_htB7ULCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h8ALcbCiEeeXhtmVkHi-QA">
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_htEXkLCiEeeXhtmVkHi-QA" value="new IPlayable() {&#xA;&#xA;&#x9;&#x9;&#x9;@Override&#xA;&#x9;&#x9;&#x9;public void start() {&#xA;&#x9;&#x9;&#x9;}&#xA;&#xA;&#x9;&#x9;&#x9;@Override&#xA;&#x9;&#x9;&#x9;public void stop() {&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}"/>
            </ownedAttribute>
            <ownedOperation xmi:id="_htDJcLCiEeeXhtmVkHi-QA" name="start">
              <ownedComment xmi:id="_h7ZugLCiEeeXhtmVkHi-QA">
                <body>Starts the sequencer associated with this playable entity</body>
              </ownedComment>
            </ownedOperation>
            <ownedOperation xmi:id="_htDwgLCiEeeXhtmVkHi-QA" name="stop">
              <ownedComment xmi:id="_h7aVkLCiEeeXhtmVkHi-QA">
                <body>Stops the sequencer and synthesizer associated with this playable entity</body>
              </ownedComment>
            </ownedOperation>
          </nestedClassifier>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h7_kYLCiEeeXhtmVkHi-QA" name="" memberEnd="_h7_kYbCiEeeXhtmVkHi-QA _hsskILCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h7_kYbCiEeeXhtmVkHi-QA" name="" type="_hsqu8LCiEeeXhtmVkHi-QA" association="_h7_kYLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8ALcbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8ALcrCiEeeXhtmVkHi-QA _htDwgbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8ALcrCiEeeXhtmVkHi-QA" name="" type="_htB7ULCiEeeXhtmVkHi-QA" association="_h8ALcbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8Z0ELCiEeeXhtmVkHi-QA" name="" memberEnd="_h8Z0EbCiEeeXhtmVkHi-QA _h5SOobCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8Z0EbCiEeeXhtmVkHi-QA" name="" type="_hsuZULCiEeeXhtmVkHi-QA" association="_h8Z0ELCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8bCMbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8bCMrCiEeeXhtmVkHi-QA _h5S1sbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8bCMrCiEeeXhtmVkHi-QA" name="" type="_hsuZULCiEeeXhtmVkHi-QA" association="_h8bCMbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8c3YLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8c3YbCiEeeXhtmVkHi-QA _h5WgEbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8c3YbCiEeeXhtmVkHi-QA" name="" type="_hsuZULCiEeeXhtmVkHi-QA" association="_h8c3YLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8decbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8decrCiEeeXhtmVkHi-QA _h5XuMLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8decrCiEeeXhtmVkHi-QA" name="" type="_hsuZULCiEeeXhtmVkHi-QA" association="_h8decbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8eskbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8eskrCiEeeXhtmVkHi-QA _h5b_obCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8eskrCiEeeXhtmVkHi-QA" name="" type="_htAGILCiEeeXhtmVkHi-QA" association="_h8eskbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8ghwbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8ghwrCiEeeXhtmVkHi-QA _h5cmsbCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8ghwrCiEeeXhtmVkHi-QA" name="" type="_htAGILCiEeeXhtmVkHi-QA" association="_h8ghwbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hltLULCiEeeXhtmVkHi-QA" name="token">
        <packagedElement xmi:type="uml:Package" xmi:id="_hltyYLCiEeeXhtmVkHi-QA" name="tokenizer">
          <packagedElement xmi:type="uml:Class" xmi:id="_htq0gLCiEeeXhtmVkHi-QA" name="ABCTokenizer">
            <ownedComment xmi:id="_h7dY4LCiEeeXhtmVkHi-QA">
              <body>Tokenizer for the abc music language. getNextToken() returns next Token in
stream. Does not recognize all possible language constructs and symbols
(returned as &quot;?&quot; token).  Tokens are the atomic psemantic pieces of a language,
such as Note, repeat start, measure, chord, etc.   The token ids (names) returned are: &lt;br/>
 &lt;br/>
 EOF - end of file&lt;br/>
 &quot;|:&quot; - repeat start&lt;br/>
 &quot;:|&quot; - repeat end&lt;br/>
 &quot;|1&quot; - first repeat start&lt;br/>
 &quot;[1&quot; - alternative first repeat start&lt;br/>
 &quot;|2&quot; - second repeat start&lt;br/>
 &quot;[2&quot; - alternative second repeat start&lt;br/>
 &quot;[|&quot; - thick-thin double bar line&lt;br/>
 &quot;|]&quot; - thin-thick double bar line&lt;br/>
 &quot;:|2&quot; - alternative second repeat start&lt;br/>
 &quot;||&quot; - double measure bar&lt;br/>
 &quot;::&quot; - short hand for repeat end-start &quot;:||:&quot;&lt;br/>
 &quot;|&quot; - Measure bar&lt;br/>
 &quot;[&quot;) - Chord start&lt;br/>
 &quot;]&quot; - Chord end&lt;br/>
 &quot;-&quot; - tie&lt;br/>
 &quot;&amp;lt;&quot; - the previous note  is dotted, the next note halved&lt;br/> 
 &quot;&amp;gt;&quot; - the previous note is halved, the next dotted&lt;br/>
 &quot;{&quot; - Grace begin&lt;br/>
 &quot;}&quot; - Grace end&lt;br/>
 &quot;%&quot; - Comment&lt;br/>
 &quot;[Header ID]&quot; - where [Header ID] is a single letter from {ABCDEFGHIKLMNOPQRSTWXZ} &lt;br/> 
 &quot;Note&quot; - a single note whose lexeme contains the name, accidentals, octave and duration&lt;br/>
 &quot;Tuplet&quot; - the lexeme is the number of subsequent Notes comprise this tuplet. &lt;br/>
 &quot;Quote&quot; - lexeme is the quoted text &lt;br/>
 &quot;?&quot; - unknown language construct. &lt;br/>
  &lt;br/>
References: &lt;br/>
&lt;a href =
&quot;http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html&quot;
>java.util.regex.Pattern for regex guide&lt;/a>&lt;br/>
&lt;a href=&quot;http://asciitable.com/&quot;>ASCII table for codes&lt;/a>&lt;br/>
&lt;a href=&quot;http://abcnotation.com/abc2mtex/abc.txt&quot;>abc music standard 1.6&lt;/a></body>
            </ownedComment>
            <generalization xmi:id="_h2W2crCiEeeXhtmVkHi-QA" general="_ht428LCiEeeXhtmVkHi-QA"/>
            <ownedAttribute xmi:id="_h5lwoLCiEeeXhtmVkHi-QA" name="keywords1" visibility="private">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              <qualifier xmi:id="_h5mXsbCiEeeXhtmVkHi-QA">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </qualifier>
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5lwobCiEeeXhtmVkHi-QA" value="new Hashtable&lt;String, String>()"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5mXsrCiEeeXhtmVkHi-QA" name="keywords2" visibility="private">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              <qualifier xmi:id="_h5m-wbCiEeeXhtmVkHi-QA">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </qualifier>
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5mXs7CiEeeXhtmVkHi-QA" value="new Hashtable&lt;String, String>()"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5m-wrCiEeeXhtmVkHi-QA" name="keywordsVector" visibility="private" type="_h4Y2wLCiEeeXhtmVkHi-QA" association="_h8moYLCiEeeXhtmVkHi-QA">
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5oM4bCiEeeXhtmVkHi-QA" value="new Vector&lt;Map&lt;String, String>>()"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5oz8LCiEeeXhtmVkHi-QA" name="tokFac" visibility="private" type="_htcLALCiEeeXhtmVkHi-QA" association="_h8n2gLCiEeeXhtmVkHi-QA">
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5oz8bCiEeeXhtmVkHi-QA" value="TokenFactory.Singleton"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5pbAbCiEeeXhtmVkHi-QA" name="stack" visibility="private" type="_h3amYLCiEeeXhtmVkHi-QA" association="_h8odkbCiEeeXhtmVkHi-QA">
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5qCEbCiEeeXhtmVkHi-QA" value="new Stack&lt;Token>()"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5qpIbCiEeeXhtmVkHi-QA" name="ACCIDENTALS" isLeaf="true" isStatic="true" isReadOnly="true">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5rQMLCiEeeXhtmVkHi-QA" value="&quot;_=^&quot;"/>
            </ownedAttribute>
            <interfaceRealization xmi:id="_h2VoULCiEeeXhtmVkHi-QA" client="_htq0gLCiEeeXhtmVkHi-QA" supplier="_ht2asLCiEeeXhtmVkHi-QA" contract="_ht2asLCiEeeXhtmVkHi-QA"/>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7CiILCiEeeXhtmVkHi-QA" name="ABCTokenizer" specification="_httQwLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7CiIbCiEeeXhtmVkHi-QA" name="inputFileName">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7CiIrCiEeeXhtmVkHi-QA" type="_htq0gLCiEeeXhtmVkHi-QA" direction="return"/>
              <language>java</language>
              <body>super(inputFileName);

		// note: &quot;\\7C&quot; => &quot;|&quot;, &quot;\\x5B&quot; => &quot;[&quot;, &quot;\\x5D&quot; => &quot;]&quot;
		// &quot;\\x7B&quot; => &quot;{&quot;,  &quot;\\x7D&quot; => &quot;}&quot;

		// load the regex->keyword mapping
		keywords1.put(&quot;\\x7C:&quot;, &quot;|:&quot;); // repeat start
		keywords1.put(&quot;:\\x7C&quot;, &quot;:|&quot;); // repeat end
		keywords1.put(&quot;\\x7C1&quot;, &quot;|1&quot;); // first repeat start
		keywords1.put(&quot;\\x5B1&quot;, &quot;[1&quot;); // alternative first repeat start
		keywords1.put(&quot;\\x7C2&quot;, &quot;|2&quot;); // second repeat start
		keywords1.put(&quot;\\x5B2&quot;, &quot;[2&quot;); // alternative second repeat start
		keywords1.put(&quot;\\x5B\\7C&quot;, &quot;[|&quot;); // thick-thin double bar line
		keywords1.put(&quot;\\7C\\x5D&quot;, &quot;|]&quot;); // thin-thick double bar line
		keywords1.put(&quot;:\\x7C2&quot;, &quot;:|2&quot;); // alternative second repeat start
		keywords1.put(&quot;\\x7C\\x7C&quot;, &quot;||&quot;); // double measure bar
		keywords1.put(&quot;::&quot;, &quot;::&quot;); // short hand for repeat end-start &quot;:||:&quot;

		// Should these be separated out into a different map because order of
		// search is important?
		keywords2.put(&quot;\\x7C&quot;, &quot;|&quot;); // Measure bar
		keywords2.put(&quot;\\x5B&quot;, &quot;[&quot;); // Chord start
		keywords2.put(&quot;\\x5D&quot;, &quot;]&quot;); // Chord end
		keywords2.put(&quot;-&quot;, &quot;-&quot;); // tie
		keywords2.put(&quot;>&quot;, &quot;>&quot;); // the previous note  is dotted, the next note halved 
		keywords2.put(&quot;&lt;&quot;, &quot;&lt;&quot;); // the previous note is halved, the next dotted
		keywords2.put(&quot;\\x7B&quot;, &quot;{&quot;); // Grace begin
		keywords2.put(&quot;\\x7D&quot;, &quot;}&quot;); // Grace end		

		keywordsVector.add(keywords1);
		keywordsVector.add(keywords2);

	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7DJMLCiEeeXhtmVkHi-QA" name="getNextToken" specification="_htt30LCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7DJMbCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
              <language>java</language>
              <body>if (stack.empty())
			return makeNextToken();
		else
			return stack.pop();
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7DJMrCiEeeXhtmVkHi-QA" name="putBack" specification="_h2WPYbCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7DJM7CiEeeXhtmVkHi-QA" name="t" type="_htfOULCiEeeXhtmVkHi-QA"/>
              <language>java</language>
              <body>stack.push(t);
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7DwQLCiEeeXhtmVkHi-QA" name="makeNextToken" specification="_htue4LCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7DwQbCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
              <language>java</language>
              <body>String sTok = this.getNextStringToken();
		if (null == sTok)
			return tokFac.makeToken(&quot;EOF&quot;, &quot;EOF&quot;); // EOF returns as null
		if (sTok.equals(&quot;\n&quot;))
			return makeNextToken(); // discard bare LF's.

		// search for first keywords, pushing extra tokens back into tokenizer's
		// stack.
		for (Map&lt;String, String> keywords : keywordsVector) {
			for (String kw : keywords.keySet()) {
				if (keywords.get(kw).equals(sTok))
					return tokFac.makeToken(sTok, sTok);
				String[] split = sTok.split(kw, -1);
				if (split.length > 1) {

					for (int i = split.length - 1; i > 0; i--) {
						if (!split[i].equals(&quot;&quot;)) {
							this.putStringBack(split[i]);
						}
						this.putStringBack(keywords.get(kw));
					}
					if (!split[0].equals(&quot;&quot;)) {
						this.putStringBack(split[0]);
					}
					return makeNextToken();
				}
			}
		}

		// Find header tokens, which are the whole line.
		int idx = sTok.indexOf(&quot;:&quot;);
		if (1 == idx) {
			String header = sTok;
			String next = super.getNextStringToken();
			while (!next.equals(&quot;\n&quot;)) {
				header += &quot; &quot; + next;
				next = this.getNextStringToken();
			}
			return tokFac.makeToken(header.substring(0, 1), header.substring(2));
		}

		// Find comment, which is the rest of the line.
		idx = sTok.indexOf(&quot;%&quot;);
		if (-1 != idx) {
			// Comment in line somewhere
			if (0 == idx) { // comment is at beginning of line
				String comment = sTok;
				String next = super.getNextStringToken();
				while (!next.equals(&quot;\n&quot;)) { // get the rest of the line
					comment += next;
					// get the next string token 
					next = this.getNextStringToken();
				}
				return tokFac.makeToken(&quot;%&quot;, comment.substring(1));
			} else { // comment is in middle of the line
				// push the entire comment, incl. the comment char, back into
				// the tokenizer b/c it can't be dealt with yet.
				this.putStringBack(sTok.substring(idx));
				// push the tokens before the comment back into the tokenizer
				// so that they can be then processed when pulled back out.
				this.putStringBack(sTok.substring(0, idx));
				return makeNextToken(); // Process whatever is in the tokenizer
			}
		}

		// Find tuplet
		if ('(' == sTok.charAt(0)) {
			// Tuplet found
			int n = Integer.parseInt(sTok.substring(1, 2)); // get tuplet size
			this.putStringBack(sTok.substring(2)); // push rest back into tokenizer
			return tokFac.makeToken(&quot;Tuplet&quot;, &quot;&quot; + n);
		}

		if (Character.isLetter(sTok.charAt(0)) || ACCIDENTALS.contains(sTok.subSequence(0, 1))) {
			// Start of Note string found.
			return tokFac.makeToken(&quot;Note&quot;, parseNote(sTok));
		}

		if ('\&quot;' == sTok.charAt(0)) {
			// Quoted string found
			return tokFac.makeToken(&quot;Quote&quot;, parseQuote(&quot;&quot;, sTok.substring(1)));
		}

		if (sTok.equals(&quot;\\&quot;)) {
			// abc line break detected.  Ignore.
			return makeNextToken();
		}

		// Unknown token
		return tokFac.makeToken(&quot;?&quot;, sTok);
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7DwQrCiEeeXhtmVkHi-QA" name="parseNote" specification="_htvF8LCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7DwQ7CiEeeXhtmVkHi-QA" name="sTok">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7DwRLCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <language>java</language>
              <body>int i = 1;
		// look for pre-note name characters
		if (!Character.isLetter(sTok.charAt(0))) {
			for (; i &lt; sTok.length(); i++) {
				if (sTok.charAt(i) != sTok.charAt(0)) {
					i++; // move to next char
					break; // This assumes that this char is a letter which
							// follows the accidentals
				}
			}
		}

		for (; i &lt; sTok.length(); i++) {
			// look for non-post-note name characters.
			if (!(Character.isDigit(sTok.charAt(i)) || &quot;,/'&quot;.contains(sTok.subSequence(i, i + 1)))) {
				putStringBack(sTok.substring(i)); // put the rest back in the
													// tokenizer.
				break;
			}
		}
		// i = end of note string
		return sTok.substring(0, i);
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7DwRbCiEeeXhtmVkHi-QA" name="parseQuote" specification="_htvtAbCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7DwRrCiEeeXhtmVkHi-QA" name="acc">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7DwR7CiEeeXhtmVkHi-QA" name="sTok">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7DwSLCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <language>java</language>
              <body>for (int i = 0; i &lt; sTok.length(); i++) {
			if ('\&quot;' == sTok.charAt(i)) {
				String rest = sTok.substring(i + 1);
				if (!rest.equals(&quot;&quot;)) {
					this.putStringBack(rest);
				}
				return acc;
			} else {
				acc += sTok.charAt(i);
			}
		}
		acc += &quot; &quot;;
		return parseQuote(acc, this.getNextStringToken());
	</body>
            </ownedBehavior>
            <ownedOperation xmi:id="_httQwLCiEeeXhtmVkHi-QA" name="ABCTokenizer" method="_h7CiILCiEeeXhtmVkHi-QA" raisedException="_h2cWALCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_httQwrCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_httQw7CiEeeXhtmVkHi-QA" key="create"/>
              </eAnnotations>
              <ownedComment xmi:id="_h7dY4bCiEeeXhtmVkHi-QA">
                <body>Constructor for the class
	 * @param inputFileName  File to tokenize
	 * @throws FileNotFoundException  When input file could not be loaded.</body>
              </ownedComment>
              <ownedParameter xmi:id="_httQwbCiEeeXhtmVkHi-QA" name="inputFileName">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_httQxLCiEeeXhtmVkHi-QA" type="_htq0gLCiEeeXhtmVkHi-QA" direction="return"/>
            </ownedOperation>
            <ownedOperation xmi:id="_htt30LCiEeeXhtmVkHi-QA" name="getNextToken" method="_h7DJMLCiEeeXhtmVkHi-QA">
              <ownedComment xmi:id="_h7dY4rCiEeeXhtmVkHi-QA">
                <body>Return the next token, either from the stream or the last token if it was
	 * pushed back</body>
              </ownedComment>
              <ownedParameter xmi:id="_h2WPYLCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
            </ownedOperation>
            <ownedOperation xmi:id="_htue4LCiEeeXhtmVkHi-QA" name="makeNextToken" visibility="private" method="_h7DwQLCiEeeXhtmVkHi-QA">
              <ownedComment xmi:id="_h7dY5LCiEeeXhtmVkHi-QA">
                <body>Parse the strings down from the getNextStringToken further, separating
	 * out the abc keywords into tokens.
	 * @return The next Token in the stream</body>
              </ownedComment>
              <ownedParameter xmi:id="_h2W2cbCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
            </ownedOperation>
            <ownedOperation xmi:id="_htvF8LCiEeeXhtmVkHi-QA" name="parseNote" visibility="private" method="_h7DwQrCiEeeXhtmVkHi-QA">
              <ownedComment xmi:id="_h7d_8LCiEeeXhtmVkHi-QA">
                <body>Returns the first note string in the given string.
	 * 
	 * @param sTok  The string to parse
	 * @return A String that is the first note in the given string</body>
              </ownedComment>
              <ownedParameter xmi:id="_htvF8bCiEeeXhtmVkHi-QA" name="sTok">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_htvtALCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
            <ownedOperation xmi:id="_htvtAbCiEeeXhtmVkHi-QA" name="parseQuote" visibility="private" method="_h7DwRbCiEeeXhtmVkHi-QA">
              <ownedComment xmi:id="_h7d_8bCiEeeXhtmVkHi-QA">
                <body>Returns the rest of a string, incl. spaces until the next double quote
	 * @param acc  Accumulated result string
	 * @param sTok the current string token
	 * @return the full quoted string</body>
              </ownedComment>
              <ownedParameter xmi:id="_htwUELCiEeeXhtmVkHi-QA" name="acc">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_htwUEbCiEeeXhtmVkHi-QA" name="sTok">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_htwUErCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
            <ownedOperation xmi:id="_h2WPYbCiEeeXhtmVkHi-QA" name="putBack" method="_h7DJMrCiEeeXhtmVkHi-QA">
              <ownedComment xmi:id="_h7dY47CiEeeXhtmVkHi-QA">
                <body>*	 Push token back into the stream
	 * @param t the Token you need to put back in the stream.</body>
              </ownedComment>
              <ownedParameter xmi:id="_h2W2cLCiEeeXhtmVkHi-QA" name="t" type="_htfOULCiEeeXhtmVkHi-QA"/>
            </ownedOperation>
          </packagedElement>
          <packagedElement xmi:type="uml:Interface" xmi:id="_htzXYLCiEeeXhtmVkHi-QA" name="IStringTokenizer">
            <ownedComment xmi:id="_h7d_8rCiEeeXhtmVkHi-QA">
              <body>Tokenizer that only returns string tokens.  This is a specialization of ITokenizer for strings.

@author swong
 *</body>
            </ownedComment>
            <ownedOperation xmi:id="_htz-cLCiEeeXhtmVkHi-QA" name="getNextStringToken" isAbstract="true">
              <ownedComment xmi:id="_h7d_87CiEeeXhtmVkHi-QA">
                <body>Return the next token.
	 * @return The next token in the tokenizer</body>
              </ownedComment>
              <ownedParameter xmi:id="_ht0lgLCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
            <ownedOperation xmi:id="_ht1MkLCiEeeXhtmVkHi-QA" name="putStringBack" isAbstract="true">
              <ownedComment xmi:id="_h7d_9LCiEeeXhtmVkHi-QA">
                <body>Put the previously consumed token back into the token stream. Can only
	 * put back one token.
	 * @param t the token to push back into the tokenizer</body>
              </ownedComment>
              <ownedParameter xmi:id="_ht1zoLCiEeeXhtmVkHi-QA" name="t">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
          </packagedElement>
          <packagedElement xmi:type="uml:Interface" xmi:id="_ht2asLCiEeeXhtmVkHi-QA" name="ITokenizer" isAbstract="true">
            <ownedComment xmi:id="_h7d_9bCiEeeXhtmVkHi-QA">
              <body>Extract and return an appropriate Token from some given source.</body>
            </ownedComment>
            <ownedOperation xmi:id="_ht3o0LCiEeeXhtmVkHi-QA" name="getNextToken" isAbstract="true">
              <ownedComment xmi:id="_h7d_9rCiEeeXhtmVkHi-QA">
                <body>Return the next token.
	 * @return the next token in the tokenizer</body>
              </ownedComment>
              <ownedParameter xmi:id="_h2ZSsLCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
            </ownedOperation>
            <ownedOperation xmi:id="_h2ZSsbCiEeeXhtmVkHi-QA" name="putBack" isAbstract="true">
              <ownedComment xmi:id="_h7d_97CiEeeXhtmVkHi-QA">
                <body>Put the previously consumed token back into the token stream. 
	 * @param t the token to put back into the tokenizer</body>
              </ownedComment>
              <ownedParameter xmi:id="_h2Z5wLCiEeeXhtmVkHi-QA" name="t" type="_htfOULCiEeeXhtmVkHi-QA"/>
            </ownedOperation>
          </packagedElement>
          <packagedElement xmi:type="uml:Class" xmi:id="_ht428LCiEeeXhtmVkHi-QA" name="StringTokenizer">
            <ownedComment xmi:id="_h7d_-LCiEeeXhtmVkHi-QA">
              <body>Special tokenizer that converts a stream of various types of tokens from  StreamTokenizer and converts them into a stream of strings. 
@author swong
 *</body>
            </ownedComment>
            <ownedAttribute xmi:id="_h5r3QLCiEeeXhtmVkHi-QA" name="stack" visibility="private" type="_h3amYLCiEeeXhtmVkHi-QA" association="_h8prsbCiEeeXhtmVkHi-QA">
              <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5seUbCiEeeXhtmVkHi-QA" value="new Stack&lt;String>()"/>
            </ownedAttribute>
            <ownedAttribute xmi:id="_h5seU7CiEeeXhtmVkHi-QA" name="_st" visibility="protected" type="_h2k44LCiEeeXhtmVkHi-QA" association="_h8q50LCiEeeXhtmVkHi-QA"/>
            <ownedAttribute xmi:id="_h5tFYbCiEeeXhtmVkHi-QA" name="_fileReader" visibility="protected" type="_h2icobCiEeeXhtmVkHi-QA" association="_h8rg4bCiEeeXhtmVkHi-QA"/>
            <interfaceRealization xmi:id="_h2lf8bCiEeeXhtmVkHi-QA" client="_ht428LCiEeeXhtmVkHi-QA" supplier="_htzXYLCiEeeXhtmVkHi-QA" contract="_htzXYLCiEeeXhtmVkHi-QA"/>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7EXULCiEeeXhtmVkHi-QA" name="StringTokenizer" specification="_ht6FELCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7EXUbCiEeeXhtmVkHi-QA" name="inputFileName">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_h7EXUrCiEeeXhtmVkHi-QA" type="_ht428LCiEeeXhtmVkHi-QA" direction="return"/>
              <language>java</language>
              <body>// Create an input text file object:

		//_st = new StreamTokenizer(new BufferedReader(url.openStream()));
		//_fileReader = new FileReader(inputFileName);
		try {
			InputStream is = this.getClass().getResource(inputFileName).openStream();

			_fileReader = new BufferedReader(new InputStreamReader(is));

			//_fileReader = new FileReader(file);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			System.err.println(&quot;StringTokenizer error opening file: &quot; + e);
			e.printStackTrace();
		}

		// Create a Streamtokenizer to parse the input text file:
		_st = new StreamTokenizer(_fileReader);

		_st.eolIsSignificant(true);
		_st.wordChars(33, 125);
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7E-YLCiEeeXhtmVkHi-QA" name="getNextStringToken" specification="_ht76QLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7E-YbCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <language>java</language>
              <body>if (stack.empty())
			return makeNextStringToken();
		else
			return stack.pop();
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7E-YrCiEeeXhtmVkHi-QA" name="putStringBack" specification="_ht-9kLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7E-Y7CiEeeXhtmVkHi-QA" name="str">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <language>java</language>
              <body>stack.push(str);
	</body>
            </ownedBehavior>
            <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7FlcLCiEeeXhtmVkHi-QA" name="makeNextStringToken" specification="_huALsrCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_h7FlcbCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <language>java</language>
              <body>try {
			int t = _st.nextToken();
			if (StreamTokenizer.TT_EOL == t)
				return &quot;\n&quot;;
			if (StreamTokenizer.TT_EOF != t) {
				switch (_st.ttype) {

				case StreamTokenizer.TT_WORD: {
					return _st.sval;
				}

				case StreamTokenizer.TT_NUMBER: {
					// check if number is an integer
					if (Math.floor(_st.nval) == _st.nval) {
						return &quot;&quot; + (int) _st.nval;
					} else {
						return &quot;&quot; + _st.nval;
					}
				}

				default:
					throw new IllegalArgumentException(&quot;Tokenizer1: Illegal token type = &quot; + _st.ttype);
				}
			} else {
				_fileReader.close();
				System.err.println(&quot;EOF Token&quot;);
				return null;
			}
		} catch (IOException e) {
			System.out.println(&quot;StringTokenizer.makeNextToken(): Exception = &quot; + e.getMessage());
			return null;
		}

	</body>
            </ownedBehavior>
            <ownedOperation xmi:id="_ht6FELCiEeeXhtmVkHi-QA" name="StringTokenizer" method="_h7EXULCiEeeXhtmVkHi-QA" raisedException="_h2cWALCiEeeXhtmVkHi-QA">
              <eAnnotations xmi:id="_ht6sIbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_ht6sIrCiEeeXhtmVkHi-QA" key="create"/>
              </eAnnotations>
              <ownedComment xmi:id="_h7enALCiEeeXhtmVkHi-QA">
                <body>Initialize _st to read from a input Reader file with the given input file
	 * name.
	 * 
	 * @param inputFileName
	 *            the name of the input text file
	 * @throws FileNotFoundException When the input file could not be opened</body>
              </ownedComment>
              <ownedParameter xmi:id="_ht6sILCiEeeXhtmVkHi-QA" name="inputFileName">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
              <ownedParameter xmi:id="_ht6sI7CiEeeXhtmVkHi-QA" type="_ht428LCiEeeXhtmVkHi-QA" direction="return"/>
            </ownedOperation>
            <ownedOperation xmi:id="_ht76QLCiEeeXhtmVkHi-QA" name="getNextStringToken" method="_h7E-YLCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_ht8hULCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
            <ownedOperation xmi:id="_ht-9kLCiEeeXhtmVkHi-QA" name="putStringBack" method="_h7E-YrCiEeeXhtmVkHi-QA">
              <ownedParameter xmi:id="_ht-9kbCiEeeXhtmVkHi-QA" name="str">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
            <ownedOperation xmi:id="_huALsrCiEeeXhtmVkHi-QA" name="makeNextStringToken" visibility="private" method="_h7FlcLCiEeeXhtmVkHi-QA">
              <ownedComment xmi:id="_h7enAbCiEeeXhtmVkHi-QA">
                <body>Returns the next string in the stream.  
	 * Returns LF (&quot;\n&quot;) at end of line.  
	 * Returns null for EOF or error
	 * 
	 * @return A string token or null if EOF</body>
              </ownedComment>
              <ownedParameter xmi:id="_huAywLCiEeeXhtmVkHi-QA" direction="return">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedParameter>
            </ownedOperation>
          </packagedElement>
          <packagedElement xmi:type="uml:Association" xmi:id="_h8moYLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8moYbCiEeeXhtmVkHi-QA _h5m-wrCiEeeXhtmVkHi-QA">
            <ownedEnd xmi:id="_h8moYbCiEeeXhtmVkHi-QA" name="" type="_htq0gLCiEeeXhtmVkHi-QA" association="_h8moYLCiEeeXhtmVkHi-QA"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Association" xmi:id="_h8n2gLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8n2gbCiEeeXhtmVkHi-QA _h5oz8LCiEeeXhtmVkHi-QA">
            <ownedEnd xmi:id="_h8n2gbCiEeeXhtmVkHi-QA" name="" type="_htq0gLCiEeeXhtmVkHi-QA" association="_h8n2gLCiEeeXhtmVkHi-QA"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Association" xmi:id="_h8odkbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8odkrCiEeeXhtmVkHi-QA _h5pbAbCiEeeXhtmVkHi-QA">
            <ownedEnd xmi:id="_h8odkrCiEeeXhtmVkHi-QA" name="" type="_htq0gLCiEeeXhtmVkHi-QA" association="_h8odkbCiEeeXhtmVkHi-QA"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Association" xmi:id="_h8prsbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8prsrCiEeeXhtmVkHi-QA _h5r3QLCiEeeXhtmVkHi-QA">
            <ownedEnd xmi:id="_h8prsrCiEeeXhtmVkHi-QA" name="" type="_ht428LCiEeeXhtmVkHi-QA" association="_h8prsbCiEeeXhtmVkHi-QA"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Association" xmi:id="_h8q50LCiEeeXhtmVkHi-QA" name="" memberEnd="_h8q50bCiEeeXhtmVkHi-QA _h5seU7CiEeeXhtmVkHi-QA">
            <ownedEnd xmi:id="_h8q50bCiEeeXhtmVkHi-QA" name="" type="_ht428LCiEeeXhtmVkHi-QA" association="_h8q50LCiEeeXhtmVkHi-QA"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Association" xmi:id="_h8rg4bCiEeeXhtmVkHi-QA" name="" memberEnd="_h8rg4rCiEeeXhtmVkHi-QA _h5tFYbCiEeeXhtmVkHi-QA">
            <ownedEnd xmi:id="_h8rg4rCiEeeXhtmVkHi-QA" name="" type="_ht428LCiEeeXhtmVkHi-QA" association="_h8rg4bCiEeeXhtmVkHi-QA"/>
          </packagedElement>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_htOvoLCiEeeXhtmVkHi-QA" name="ATokVisitor" isAbstract="true">
          <ownedComment xmi:id="_h7a8prCiEeeXhtmVkHi-QA">
            <body>A visitor to an Token that implements ITokVisitor using a dictionary of commands.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5hfMLCiEeeXhtmVkHi-QA" name="defaultCmd" visibility="private" type="_hta84LCiEeeXhtmVkHi-QA" association="_h8hv4LCiEeeXhtmVkHi-QA"/>
          <ownedAttribute xmi:id="_h5iGQLCiEeeXhtmVkHi-QA" name="cmds" visibility="private" type="_hta84LCiEeeXhtmVkHi-QA" association="_h8i-AbCiEeeXhtmVkHi-QA">
            <qualifier xmi:id="_h5itUbCiEeeXhtmVkHi-QA">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </qualifier>
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5iGQbCiEeeXhtmVkHi-QA" value="new Hashtable&lt;String, ITokVisitorCmd>()"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h2PhsLCiEeeXhtmVkHi-QA" client="_htOvoLCiEeeXhtmVkHi-QA" supplier="_htZHsLCiEeeXhtmVkHi-QA" contract="_htZHsLCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6-QsLCiEeeXhtmVkHi-QA" name="ATokVisitor" specification="_htRy8LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6-QsbCiEeeXhtmVkHi-QA" type="_htOvoLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>defaultCmd = new ITokVisitorCmd() {
			public Object apply(String idx, Token host, Object... inps) {
				throw new IllegalArgumentException(&quot;ATokVisitor: Unknown token encountered: &quot; + idx);
			}
		};
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6-QsrCiEeeXhtmVkHi-QA" name="ATokVisitor" specification="_h2QIwLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6-Qs7CiEeeXhtmVkHi-QA" name="defaultCmd" type="_hta84LCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6-QtLCiEeeXhtmVkHi-QA" type="_htOvoLCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>this.defaultCmd = defaultCmd;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6-QtbCiEeeXhtmVkHi-QA" name="caseAt" specification="_h4PFwLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6-QtrCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6-Qt7CiEeeXhtmVkHi-QA" name="host" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h6-QuLCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6-QubCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6-QurCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>if (cmds.containsKey(id)) {
			return cmds.get(id).apply(id, host, params);
		} else {
			return defaultCmd.apply(id, host, params);
		}
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6-3wLCiEeeXhtmVkHi-QA" name="addCmd" specification="_h2RW4LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h6-3wbCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h6-3wrCiEeeXhtmVkHi-QA" name="cmd" type="_hta84LCiEeeXhtmVkHi-QA"/>
            <language>java</language>
            <body>cmds.put(id, cmd);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_htRy8LCiEeeXhtmVkHi-QA" name="ATokVisitor" method="_h6-QsLCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_htTBELCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_htTBEbCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7bjsLCiEeeXhtmVkHi-QA">
              <body>Constructor that sets the default cmd to one that throws and IllegalArgumentException&quot; for any unknown tokens.</body>
            </ownedComment>
            <ownedParameter xmi:id="_htTBErCiEeeXhtmVkHi-QA" type="_htOvoLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h2QIwLCiEeeXhtmVkHi-QA" name="ATokVisitor" method="_h6-QsrCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_h2Qv0LCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_h2Qv0bCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7bjsbCiEeeXhtmVkHi-QA">
              <body>Constructor that sets the default cmd to the given command.
	 * @param defaultCmd the default cmd to use.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2QIwbCiEeeXhtmVkHi-QA" name="defaultCmd" type="_hta84LCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h2Qv0rCiEeeXhtmVkHi-QA" type="_htOvoLCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h2RW4LCiEeeXhtmVkHi-QA" name="addCmd" method="_h6-3wLCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7bjsrCiEeeXhtmVkHi-QA">
              <body>Add a new cmd or replace an existing cmd associated with the given host id.
	 * @param id the id of the host to associate with this visitor.
	 * @param cmd The command to associate with the given key value.</body>
            </ownedComment>
            <ownedParameter xmi:id="_h2RW4bCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2RW4rCiEeeXhtmVkHi-QA" name="cmd" type="_hta84LCiEeeXhtmVkHi-QA"/>
          </ownedOperation>
          <ownedOperation xmi:id="_h4PFwLCiEeeXhtmVkHi-QA" name="caseAt" method="_h6-QtbCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h4PFwbCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4PFwrCiEeeXhtmVkHi-QA" name="host" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4Ps0LCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h4QT4LCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4Ps0bCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_htZHsLCiEeeXhtmVkHi-QA" name="ITokVisitor">
          <ownedComment xmi:id="_h7bjs7CiEeeXhtmVkHi-QA">
            <body>Interface for a token visitor.</body>
          </ownedComment>
          <ownedOperation xmi:id="_h4RiALCiEeeXhtmVkHi-QA" name="caseAt">
            <ownedParameter xmi:id="_h4RiAbCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4RiArCiEeeXhtmVkHi-QA" name="host" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4SJELCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h4SwIbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4SJEbCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_hta84LCiEeeXhtmVkHi-QA" name="ITokVisitorCmd">
          <ownedComment xmi:id="_h7bjtLCiEeeXhtmVkHi-QA">
            <body>A command for use in ATokVisitors</body>
          </ownedComment>
          <ownedOperation xmi:id="_h4T-QLCiEeeXhtmVkHi-QA" name="apply">
            <ownedParameter xmi:id="_h4UlULCiEeeXhtmVkHi-QA" name="id">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4UlUbCiEeeXhtmVkHi-QA" name="host" type="_htfOULCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4UlUrCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h4VMYbCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4UlU7CiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_htcLALCiEeeXhtmVkHi-QA" name="ITokenFactory">
          <ownedComment xmi:id="_h7bjtbCiEeeXhtmVkHi-QA">
            <body>Abstract factory to produce tokens</body>
          </ownedComment>
          <ownedOperation xmi:id="_htdZILCiEeeXhtmVkHi-QA" name="makeToken">
            <ownedParameter xmi:id="_hteAMLCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hteAMbCiEeeXhtmVkHi-QA" name="lexeme">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2TzILCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_htfOULCiEeeXhtmVkHi-QA" name="Token">
          <ownedComment xmi:id="_h7cKwLCiEeeXhtmVkHi-QA">
            <body>Represents a token in the language.</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5jUYLCiEeeXhtmVkHi-QA" name="_name" visibility="package">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedAttribute>
          <ownedAttribute xmi:id="_h5j7cbCiEeeXhtmVkHi-QA" name="_lexeme" visibility="private">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7As8LCiEeeXhtmVkHi-QA" name="Token" specification="_hthDgLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7As8bCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7As8rCiEeeXhtmVkHi-QA" name="lexeme">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7As87CiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>_name = name;
		_lexeme = lexeme;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7As9LCiEeeXhtmVkHi-QA" name="execute" specification="_h4WagLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7As9bCiEeeXhtmVkHi-QA" name="algo" type="_htZHsLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h7As9rCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h7As97CiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7As-LCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return algo.caseAt(_name, this, params);
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7BUALCiEeeXhtmVkHi-QA" name="getName" specification="_hthqkLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7BUAbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return _name;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7BUArCiEeeXhtmVkHi-QA" name="getLexeme" specification="_hti4sLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7BUA7CiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return _lexeme;
	</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7B7ELCiEeeXhtmVkHi-QA" name="toString" specification="_htkG0LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7B7EbCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <language>java</language>
            <body>return &quot;[&quot; + _name + &quot;] &quot; + _lexeme;
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_hthDgLCiEeeXhtmVkHi-QA" name="Token" method="_h7As8LCiEeeXhtmVkHi-QA">
            <eAnnotations xmi:id="_hthDg7CiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_hthDhLCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedComment xmi:id="_h7cKwbCiEeeXhtmVkHi-QA">
              <body>Token constructor.
	 *
	 * @param name The name associated with this token.  This is the id value when it executes its visitors.
	 * @param lexeme _lexeme this token is representing.</body>
            </ownedComment>
            <ownedParameter xmi:id="_hthDgbCiEeeXhtmVkHi-QA" name="name">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hthDgrCiEeeXhtmVkHi-QA" name="lexeme">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hthDhbCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_hthqkLCiEeeXhtmVkHi-QA" name="getName" method="_h7BUALCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7cKwrCiEeeXhtmVkHi-QA">
              <body>Accessor for the name of this token
	 * @return The name of this token</body>
            </ownedComment>
            <ownedParameter xmi:id="_htiRoLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_hti4sLCiEeeXhtmVkHi-QA" name="getLexeme" method="_h7BUArCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7cx0LCiEeeXhtmVkHi-QA">
              <body>Accessor for the lexeme of this token
	 * @return The lexeme of this token</body>
            </ownedComment>
            <ownedParameter xmi:id="_htjfwLCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_htkG0LCiEeeXhtmVkHi-QA" name="toString" method="_h7B7ELCiEeeXhtmVkHi-QA">
            <ownedComment xmi:id="_h7cx0bCiEeeXhtmVkHi-QA">
              <body>Return a string representation of the token: &quot;[name] lexeme&quot;
	 *
	 * @return string representation</body>
            </ownedComment>
            <ownedParameter xmi:id="_htkG0bCiEeeXhtmVkHi-QA" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
          </ownedOperation>
          <ownedOperation xmi:id="_h4WagLCiEeeXhtmVkHi-QA" name="execute" method="_h7As9LCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h4XBkLCiEeeXhtmVkHi-QA" name="algo" type="_htZHsLCiEeeXhtmVkHi-QA"/>
            <ownedParameter xmi:id="_h4XBkbCiEeeXhtmVkHi-QA" name="params" type="_h3dpsbCiEeeXhtmVkHi-QA">
              <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h4XooLCiEeeXhtmVkHi-QA" value="*"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h4XBkrCiEeeXhtmVkHi-QA" type="_h3dpsbCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_htmjELCiEeeXhtmVkHi-QA" name="TokenFactory">
          <ownedComment xmi:id="_h7cx0rCiEeeXhtmVkHi-QA">
            <body>Concrete factory to create tokens</body>
          </ownedComment>
          <ownedAttribute xmi:id="_h5lJkLCiEeeXhtmVkHi-QA" name="Singleton" isLeaf="true" isStatic="true" type="_htmjELCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h8kzMLCiEeeXhtmVkHi-QA">
            <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5lJkbCiEeeXhtmVkHi-QA" value="new TokenFactory()"/>
          </ownedAttribute>
          <interfaceRealization xmi:id="_h2UaMLCiEeeXhtmVkHi-QA" client="_htmjELCiEeeXhtmVkHi-QA" supplier="_htcLALCiEeeXhtmVkHi-QA" contract="_htcLALCiEeeXhtmVkHi-QA"/>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7B7ErCiEeeXhtmVkHi-QA" name="makeToken" specification="_htoYQLCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_h7B7E7CiEeeXhtmVkHi-QA" name="name">
              <eAnnotations xmi:id="_h7B7FLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_h7B7FbCiEeeXhtmVkHi-QA" key="final"/>
              </eAnnotations>
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7B7FrCiEeeXhtmVkHi-QA" name="lexeme">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h7B7F7CiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
            <language>java</language>
            <body>return new Token(name, lexeme);
	</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_htnKILCiEeeXhtmVkHi-QA" name="TokenFactory" visibility="private">
            <eAnnotations xmi:id="_htnKIbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
              <details xmi:id="_htnKIrCiEeeXhtmVkHi-QA" key="create"/>
            </eAnnotations>
            <ownedParameter xmi:id="_htnxMbCiEeeXhtmVkHi-QA" type="_htmjELCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
          <ownedOperation xmi:id="_htoYQLCiEeeXhtmVkHi-QA" name="makeToken" method="_h7B7ErCiEeeXhtmVkHi-QA">
            <ownedParameter xmi:id="_hto_ULCiEeeXhtmVkHi-QA" name="name">
              <eAnnotations xmi:id="_htpmYLCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
                <details xmi:id="_htpmYbCiEeeXhtmVkHi-QA" key="final"/>
              </eAnnotations>
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_hto_UbCiEeeXhtmVkHi-QA" name="lexeme">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </ownedParameter>
            <ownedParameter xmi:id="_h2VBQLCiEeeXhtmVkHi-QA" type="_htfOULCiEeeXhtmVkHi-QA" direction="return"/>
          </ownedOperation>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8hv4LCiEeeXhtmVkHi-QA" name="" memberEnd="_h8hv4bCiEeeXhtmVkHi-QA _h5hfMLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8hv4bCiEeeXhtmVkHi-QA" name="" type="_htOvoLCiEeeXhtmVkHi-QA" association="_h8hv4LCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8i-AbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8i-ArCiEeeXhtmVkHi-QA _h5iGQLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8i-ArCiEeeXhtmVkHi-QA" name="" type="_htOvoLCiEeeXhtmVkHi-QA" association="_h8i-AbCiEeeXhtmVkHi-QA"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Association" xmi:id="_h8kzMLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8kzMbCiEeeXhtmVkHi-QA _h5lJkLCiEeeXhtmVkHi-QA">
          <ownedEnd xmi:id="_h8kzMbCiEeeXhtmVkHi-QA" name="" type="_htmjELCiEeeXhtmVkHi-QA" association="_h8kzMLCiEeeXhtmVkHi-QA"/>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_hk7vQLCiEeeXhtmVkHi-QA" name="view">
      <packagedElement xmi:type="uml:Class" xmi:id="_huXYELCiEeeXhtmVkHi-QA" name="ABCPlayerGUI">
        <ownedComment xmi:id="_h7f1I7CiEeeXhtmVkHi-QA">
          <body>The GUI of ABCMusicPlayer.
@author Yuhui Tong, Yunxiang Zhang
 *</body>
        </ownedComment>
        <generalization xmi:id="_h4kc8LCiEeeXhtmVkHi-QA" general="_h20wgLCiEeeXhtmVkHi-QA"/>
        <ownedAttribute xmi:id="_h51oQLCiEeeXhtmVkHi-QA" name="serialVersionUID" visibility="private" isLeaf="true" isStatic="true" isReadOnly="true">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#long"/>
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h51oQbCiEeeXhtmVkHi-QA" value="1L"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h51oQrCiEeeXhtmVkHi-QA" name="contentPane" visibility="private" type="_h22lsbCiEeeXhtmVkHi-QA" association="_h8zcsLCiEeeXhtmVkHi-QA"/>
        <ownedAttribute xmi:id="_h522YLCiEeeXhtmVkHi-QA" name="_pnlControl" visibility="private" isLeaf="true" type="_h22lsbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h80q0bCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h522YbCiEeeXhtmVkHi-QA" value="new JPanel()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h53dcbCiEeeXhtmVkHi-QA" name="_txtFileName" visibility="private" isLeaf="true" type="_h263ILCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h8148bCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h54EgLCiEeeXhtmVkHi-QA" value="new JTextField()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h54rkLCiEeeXhtmVkHi-QA" name="_btnLoad" visibility="private" isLeaf="true" type="_h27eMbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h848QLCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h54rkbCiEeeXhtmVkHi-QA" value="new JButton(&quot;Load&quot;)"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h555sLCiEeeXhtmVkHi-QA" name="_btnParse" visibility="private" isLeaf="true" type="_h27eMbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h86KYLCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h555sbCiEeeXhtmVkHi-QA" value="new JButton(&quot;Parse&quot;)"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h56gwbCiEeeXhtmVkHi-QA" name="lblNewLabel" visibility="private" isLeaf="true" type="_h28FQbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h86xcbCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h56gwrCiEeeXhtmVkHi-QA" value="new JLabel(&quot;File:&quot;)"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h57H0bCiEeeXhtmVkHi-QA" name="_cbInstruments" visibility="private" isLeaf="true" type="_h29TYbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h88moLCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h57u4bCiEeeXhtmVkHi-QA" value="new JComboBox&lt;TInstrument>()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h58V8bCiEeeXhtmVkHi-QA" name="_btnPlay" visibility="private" isLeaf="true" type="_h27eMbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h890wLCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h589ALCiEeeXhtmVkHi-QA" value="new JButton(&quot;Play&quot;)"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h589ArCiEeeXhtmVkHi-QA" name="_spDisplay" visibility="private" isLeaf="true" type="_h2-hgLCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h9A4EbCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h59kELCiEeeXhtmVkHi-QA" value="new JSplitPane()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h59kErCiEeeXhtmVkHi-QA" name="_scpFileContents" visibility="private" isLeaf="true" type="_h2_voLCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h9CGMLCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5-LILCiEeeXhtmVkHi-QA" value="new JScrollPane()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h5-yMLCiEeeXhtmVkHi-QA" name="_taFileContents" visibility="private" isLeaf="true" type="_h3AWsbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h9D7YLCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h5-yMbCiEeeXhtmVkHi-QA" value="new JTextArea()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h6AnYLCiEeeXhtmVkHi-QA" name="_scpIPhrase" visibility="private" isLeaf="true" type="_h2_voLCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h9G-sbCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h6AnYbCiEeeXhtmVkHi-QA" value="new JScrollPane()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h6BOcbCiEeeXhtmVkHi-QA" name="_taPhraseStructure" visibility="private" isLeaf="true" type="_h3AWsbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h9Iz4bCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h6BOcrCiEeeXhtmVkHi-QA" value="new JTextArea()"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h6CckLCiEeeXhtmVkHi-QA" name="_btnStop" visibility="private" isLeaf="true" type="_h27eMbCiEeeXhtmVkHi-QA" isReadOnly="true" association="_h9Ja8bCiEeeXhtmVkHi-QA">
          <defaultValue xmi:type="uml:LiteralString" xmi:id="_h6CckbCiEeeXhtmVkHi-QA" value="new JButton(&quot;Stop&quot;)"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_h6DqsbCiEeeXhtmVkHi-QA" name="_view2ModelAdpt" visibility="private" type="_hukzcLCiEeeXhtmVkHi-QA" association="_h9LQILCiEeeXhtmVkHi-QA"/>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7Kd8LCiEeeXhtmVkHi-QA" name="ABCPlayerGUI" specification="_h3F2QLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h7Kd8bCiEeeXhtmVkHi-QA" name="_view2ModelAdpt" type="_hukzcLCiEeeXhtmVkHi-QA"/>
          <ownedParameter xmi:id="_h7Kd8rCiEeeXhtmVkHi-QA" type="_huXYELCiEeeXhtmVkHi-QA" direction="return"/>
          <language>java</language>
          <body>this._view2ModelAdpt = _view2ModelAdpt;
		_txtFileName.setText(&quot;scale&quot;);
		_txtFileName.setToolTipText(&quot;File to load. Assumed to be in the songs folder with .abc extension.&quot;);
		_txtFileName.setColumns(8);
		initGUI();
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7Kd87CiEeeXhtmVkHi-QA" name="start" specification="_hucQkLCiEeeXhtmVkHi-QA">
          <language>java</language>
          <body>_view2ModelAdpt.addInstruments();
		this.setVisible(true);
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7LFALCiEeeXhtmVkHi-QA" name="initGUI" specification="_huc3oLCiEeeXhtmVkHi-QA">
          <language>java</language>
          <body>setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setBounds(100, 100, 700, 500);
		contentPane = new JPanel();
		contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
		contentPane.setLayout(new BorderLayout(0, 0));
		setContentPane(contentPane);
		_pnlControl
				.setBorder(new TitledBorder(null, &quot;Control Panel&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, null));
		_pnlControl.setBackground(Color.LIGHT_GRAY);

		contentPane.add(_pnlControl, BorderLayout.NORTH);

		_pnlControl.add(lblNewLabel);

		_pnlControl.add(_txtFileName);

		_btnLoad.addActionListener(new ActionListener() { // load file.
			@Override
			public void actionPerformed(ActionEvent e) {
				_view2ModelAdpt.load(_txtFileName.getText());
				_btnParse.setEnabled(true);
			}
		});
		_btnLoad.setToolTipText(&quot;Load the file and create the ABCParser&quot;);
		_pnlControl.add(_btnLoad);

		_btnParse.addActionListener(new ActionListener() {// parse file
			@Override
			public void actionPerformed(ActionEvent e) {
				String iphrase_structure = _view2ModelAdpt.parse();
				_taPhraseStructure.setText(iphrase_structure);//display the iphrase structure.
				_btnPlay.setEnabled(true);
			}
		});
		_btnParse.setToolTipText(&quot;Parse the file and create an IPhrase structure.&quot;);
		_btnParse.setEnabled(false);
		_pnlControl.add(_btnParse);

		_cbInstruments.setToolTipText(&quot;Select an instrument to use when playing.&quot;);

		_pnlControl.add(_cbInstruments);
		_btnPlay.addActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) { // play the music
				if (_cbInstruments.getSelectedIndex() &lt; 0) {
					System.out.println(&quot;You need to select an instrument to play with!&quot;);
					return;
				}
				_view2ModelAdpt.play(_cbInstruments.getItemAt(_cbInstruments.getSelectedIndex()));
				_btnStop.setEnabled(true);
			}
		});
		_btnPlay.setToolTipText(&quot;Play the parsed IPhrase data structure.&quot;);
		_btnPlay.setEnabled(false);
		_pnlControl.add(_btnPlay);

		_btnStop.addActionListener(new ActionListener() { // stop playing music.
			@Override
			public void actionPerformed(ActionEvent e) {
				_view2ModelAdpt.stop();
				System.out.println(&quot;Music is stopped.&quot;);
			}
		});

		_btnStop.setToolTipText(&quot;Stop playing music.&quot;);
		_btnStop.setEnabled(false);
		_pnlControl.add(_btnStop);

		_spDisplay.setResizeWeight(0.5);
		_spDisplay.setOrientation(JSplitPane.VERTICAL_SPLIT);

		contentPane.add(_spDisplay, BorderLayout.CENTER);
		_scpFileContents.setViewportBorder(
				new TitledBorder(null, &quot;File Contents&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, null));
		_scpFileContents.setToolTipText(&quot;&quot;);

		_spDisplay.setLeftComponent(_scpFileContents);
		_taFileContents.setLineWrap(true);
		_taFileContents.setToolTipText(&quot;The text contents of the file.&quot;);

		_scpFileContents.setViewportView(_taFileContents);
		_scpIPhrase.setViewportBorder(
				new TitledBorder(null, &quot;Parsed IPhrase structure&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, null));

		_spDisplay.setRightComponent(_scpIPhrase);
		_taPhraseStructure.setToolTipText(&quot;The string expression of parsed iphrase structure.&quot;);
		_taPhraseStructure.setLineWrap(true);

		_scpIPhrase.setViewportView(_taPhraseStructure);
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7LFAbCiEeeXhtmVkHi-QA" name="displayFileContents" specification="_hudesLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h7LFArCiEeeXhtmVkHi-QA" name="fileContents">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <language>java</language>
          <body>_taFileContents.setText(fileContents);
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h7LFA7CiEeeXhtmVkHi-QA" name="addInstrument" specification="_h4j14bCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h7LFBLCiEeeXhtmVkHi-QA" name="instrument" type="_h4jO0LCiEeeXhtmVkHi-QA"/>
          <language>java</language>
          <body>_cbInstruments.addItem(instrument);
	</body>
        </ownedBehavior>
        <ownedOperation xmi:id="_hucQkLCiEeeXhtmVkHi-QA" name="start" method="_h7Kd87CiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7f1JbCiEeeXhtmVkHi-QA">
            <body>Start the frame.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_huc3oLCiEeeXhtmVkHi-QA" name="initGUI" method="_h7LFALCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7f1JrCiEeeXhtmVkHi-QA">
            <body>Init the GUI.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_hudesLCiEeeXhtmVkHi-QA" name="displayFileContents" method="_h7LFAbCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7f1J7CiEeeXhtmVkHi-QA">
            <body>Display the file contents of the ABC file.
	 * @param fileContents The file contents of the ABC file.</body>
          </ownedComment>
          <ownedParameter xmi:id="_hudesbCiEeeXhtmVkHi-QA" name="fileContents">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_h3F2QLCiEeeXhtmVkHi-QA" name="ABCPlayerGUI" method="_h7Kd8LCiEeeXhtmVkHi-QA">
          <eAnnotations xmi:id="_h3GdUbCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
            <details xmi:id="_h3GdUrCiEeeXhtmVkHi-QA" key="create"/>
          </eAnnotations>
          <ownedComment xmi:id="_h7f1JLCiEeeXhtmVkHi-QA">
            <body>Create the frame.</body>
          </ownedComment>
          <ownedParameter xmi:id="_h3GdULCiEeeXhtmVkHi-QA" name="_view2ModelAdpt" type="_hukzcLCiEeeXhtmVkHi-QA"/>
          <ownedParameter xmi:id="_h3GdU7CiEeeXhtmVkHi-QA" type="_huXYELCiEeeXhtmVkHi-QA" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:id="_h4j14bCiEeeXhtmVkHi-QA" name="addInstrument" method="_h7LFA7CiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7gcMLCiEeeXhtmVkHi-QA">
            <body>Add Instrument to the instrument drop list
	 * @param instrument The instrument to be added to the drop list.</body>
          </ownedComment>
          <ownedParameter xmi:id="_h4j14rCiEeeXhtmVkHi-QA" name="instrument" type="_h4jO0LCiEeeXhtmVkHi-QA"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Interface" xmi:id="_hukzcLCiEeeXhtmVkHi-QA" name="IView2ModelAdapter">
        <ownedComment xmi:id="_h7gcMbCiEeeXhtmVkHi-QA">
          <body>The view to model adapter that allows view to talk to model (to use model's methods).
@author Yuhui Tong, Yunxiang Zhang	
 *</body>
        </ownedComment>
        <ownedOperation xmi:id="_humoobCiEeeXhtmVkHi-QA" name="addInstruments">
          <ownedComment xmi:id="_h7gcMrCiEeeXhtmVkHi-QA">
            <body>This method tells model to add instruments to view's instrument drop list.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_hunPsLCiEeeXhtmVkHi-QA" name="load">
          <ownedComment xmi:id="_h7gcM7CiEeeXhtmVkHi-QA">
            <body>This method tells model to load a music of filename.
	 * @param filename The filename of the the music to be played.</body>
          </ownedComment>
          <ownedParameter xmi:id="_hun2wLCiEeeXhtmVkHi-QA" name="filename">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_hun2wbCiEeeXhtmVkHi-QA" name="parse">
          <ownedComment xmi:id="_h7gcNLCiEeeXhtmVkHi-QA">
            <body>This method tells model to parse an .abc file.
	 * @return The string expression of IPhrase structure.</body>
          </ownedComment>
          <ownedParameter xmi:id="_huod0LCiEeeXhtmVkHi-QA" direction="return">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_huod0bCiEeeXhtmVkHi-QA" name="stop">
          <ownedComment xmi:id="_h7gcNrCiEeeXhtmVkHi-QA">
            <body>This method tells model to stop playing music.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_h4m5MLCiEeeXhtmVkHi-QA" name="play">
          <ownedComment xmi:id="_h7gcNbCiEeeXhtmVkHi-QA">
            <body>This method tells model to play the music
	 * @param instrument The Instrument to play with</body>
          </ownedComment>
          <ownedParameter xmi:id="_h4m5MbCiEeeXhtmVkHi-QA" name="instrument" type="_h4jO0LCiEeeXhtmVkHi-QA"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_h4jO0LCiEeeXhtmVkHi-QA" name="TInstrument"/>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8zcsLCiEeeXhtmVkHi-QA" name="" memberEnd="_h8zcsbCiEeeXhtmVkHi-QA _h51oQrCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8zcsbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h8zcsLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h80q0bCiEeeXhtmVkHi-QA" name="" memberEnd="_h80q0rCiEeeXhtmVkHi-QA _h522YLCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h80q0rCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h80q0bCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8148bCiEeeXhtmVkHi-QA" name="" memberEnd="_h8148rCiEeeXhtmVkHi-QA _h53dcbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8148rCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h8148bCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h848QLCiEeeXhtmVkHi-QA" name="" memberEnd="_h848QbCiEeeXhtmVkHi-QA _h54rkLCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h848QbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h848QLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h86KYLCiEeeXhtmVkHi-QA" name="" memberEnd="_h86KYbCiEeeXhtmVkHi-QA _h555sLCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h86KYbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h86KYLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h86xcbCiEeeXhtmVkHi-QA" name="" memberEnd="_h86xcrCiEeeXhtmVkHi-QA _h56gwbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h86xcrCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h86xcbCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h88moLCiEeeXhtmVkHi-QA" name="" memberEnd="_h88mobCiEeeXhtmVkHi-QA _h57H0bCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h88mobCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h88moLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h890wLCiEeeXhtmVkHi-QA" name="" memberEnd="_h890wbCiEeeXhtmVkHi-QA _h58V8bCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h890wbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h890wLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9A4EbCiEeeXhtmVkHi-QA" name="" memberEnd="_h9A4ErCiEeeXhtmVkHi-QA _h589ArCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9A4ErCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9A4EbCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9CGMLCiEeeXhtmVkHi-QA" name="" memberEnd="_h9CGMbCiEeeXhtmVkHi-QA _h59kErCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9CGMbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9CGMLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9D7YLCiEeeXhtmVkHi-QA" name="" memberEnd="_h9D7YbCiEeeXhtmVkHi-QA _h5-yMLCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9D7YbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9D7YLCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9G-sbCiEeeXhtmVkHi-QA" name="" memberEnd="_h9G-srCiEeeXhtmVkHi-QA _h6AnYLCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9G-srCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9G-sbCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9Iz4bCiEeeXhtmVkHi-QA" name="" memberEnd="_h9Iz4rCiEeeXhtmVkHi-QA _h6BOcbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9Iz4rCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9Iz4bCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9Ja8bCiEeeXhtmVkHi-QA" name="" memberEnd="_h9KCALCiEeeXhtmVkHi-QA _h6CckLCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9KCALCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9Ja8bCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h9LQILCiEeeXhtmVkHi-QA" name="" memberEnd="_h9LQIbCiEeeXhtmVkHi-QA _h6DqsbCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h9LQIbCiEeeXhtmVkHi-QA" name="" type="_huXYELCiEeeXhtmVkHi-QA" association="_h9LQILCiEeeXhtmVkHi-QA"/>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_hlIjkLCiEeeXhtmVkHi-QA" name="controller">
      <packagedElement xmi:type="uml:Class" xmi:id="_hppQILCiEeeXhtmVkHi-QA" name="ABCPlayerController">
        <ownedComment xmi:id="_h7OvYLCiEeeXhtmVkHi-QA">
          <body>Controller of ABC music player.
@author Yuhui Tong, Yunxiang Zhang
 *</body>
        </ownedComment>
        <ownedAttribute xmi:id="_h4tm4LCiEeeXhtmVkHi-QA" name="_model" visibility="private" type="_hqFVALCiEeeXhtmVkHi-QA" association="_h8BZkbCiEeeXhtmVkHi-QA"/>
        <ownedAttribute xmi:id="_h4u1ALCiEeeXhtmVkHi-QA" name="_view" visibility="private" type="_huXYELCiEeeXhtmVkHi-QA" association="_h8CnsbCiEeeXhtmVkHi-QA"/>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6VXgLCiEeeXhtmVkHi-QA" name="ABCPlayerController" specification="_hp2rgLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6V-kLCiEeeXhtmVkHi-QA" type="_hppQILCiEeeXhtmVkHi-QA" direction="return"/>
          <language>java</language>
          <body>_model = new ABCPlayerModel(new IModel2ViewAdapter() {

			/**
			 * {@inheritDoc}&lt;/br>
			 */
			@Override
			public void displayFileContent(String fileContents) {
				_view.displayFileContents(fileContents);
			}

			/**
			 * {@inheritDoc}&lt;/br>
			 */
			@Override
			public void addInstrument(ABCInstrument instrument) {
				_view.addInstrument(instrument);
			}
		});

		_view = new ABCPlayerGUI&lt;ABCInstrument>(new IView2ModelAdapter&lt;ABCInstrument>() {
			/**
			 * {@inheritDoc}&lt;/br> 
			 */
			@Override
			public void load(String filename) {
				_model.loadABCFile(filename);
			}

			/**
			 * {@inheritDoc}&lt;/br> 
			 */
			@Override
			public String parse() {
				// TODO Auto-generated method stub
				return _model.parseFile();
			}

			/**
			 * {@inheritDoc}&lt;/br> 
			 */
			@Override
			public void stop() {
				_model.stop();

			}

			/**
			 * {@inheritDoc}&lt;/br> 
			 */
			@Override
			public void play(ABCInstrument instrument) {
				_model.play(instrument);

			}

			/**
			 * {@inheritDoc}&lt;/br> 
			 */
			@Override
			public void addInstruments() {
				_model.addInstruments2View();
			}
		});
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6aQALCiEeeXhtmVkHi-QA" name="start" specification="_hqAcgLCiEeeXhtmVkHi-QA">
          <language>java</language>
          <body>_model.start();
		_view.start();
	</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_h6a3ELCiEeeXhtmVkHi-QA" name="main" specification="_hqBqoLCiEeeXhtmVkHi-QA">
          <ownedParameter xmi:id="_h6a3EbCiEeeXhtmVkHi-QA" name="args">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_h6a3ErCiEeeXhtmVkHi-QA" value="*"/>
          </ownedParameter>
          <language>java</language>
          <body>EventQueue.invokeLater(new Runnable() {
			// java specs say that the system must be constructed on the GUI event thread
			@Override
			public void run() {
				try {
					ABCPlayerController controller = new ABCPlayerController();
					controller.start();
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	</body>
        </ownedBehavior>
        <ownedOperation xmi:id="_hp2rgLCiEeeXhtmVkHi-QA" name="ABCPlayerController" method="_h6VXgLCiEeeXhtmVkHi-QA">
          <eAnnotations xmi:id="_hp-nULCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
            <details xmi:id="_hp_OYLCiEeeXhtmVkHi-QA" key="create"/>
          </eAnnotations>
          <ownedComment xmi:id="_h7OvYbCiEeeXhtmVkHi-QA">
            <body>Constructor of the controller</body>
          </ownedComment>
          <ownedParameter xmi:id="_hp_1cLCiEeeXhtmVkHi-QA" type="_hppQILCiEeeXhtmVkHi-QA" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:id="_hqAcgLCiEeeXhtmVkHi-QA" name="start" method="_h6aQALCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWcLCiEeeXhtmVkHi-QA">
            <body>Start the application.</body>
          </ownedComment>
        </ownedOperation>
        <ownedOperation xmi:id="_hqBqoLCiEeeXhtmVkHi-QA" name="main" isStatic="true" method="_h6a3ELCiEeeXhtmVkHi-QA">
          <ownedComment xmi:id="_h7PWcbCiEeeXhtmVkHi-QA">
            <body>Instantiate the ABCMusicPlayer
	 * @param args Default string[] arguments.</body>
          </ownedComment>
          <ownedParameter xmi:id="_hqBqobCiEeeXhtmVkHi-QA" name="args">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_hqCRsLCiEeeXhtmVkHi-QA" value="*"/>
          </ownedParameter>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8BZkbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8BZkrCiEeeXhtmVkHi-QA _h4tm4LCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8BZkrCiEeeXhtmVkHi-QA" name="" type="_hppQILCiEeeXhtmVkHi-QA" association="_h8BZkbCiEeeXhtmVkHi-QA"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Association" xmi:id="_h8CnsbCiEeeXhtmVkHi-QA" name="" memberEnd="_h8CnsrCiEeeXhtmVkHi-QA _h4u1ALCiEeeXhtmVkHi-QA">
        <ownedEnd xmi:id="_h8CnsrCiEeeXhtmVkHi-QA" name="" type="_hppQILCiEeeXhtmVkHi-QA" association="_h8CnsbCiEeeXhtmVkHi-QA"/>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_hm1MsLCiEeeXhtmVkHi-QA" name="javax">
      <packagedElement xmi:type="uml:Package" xmi:id="_hm1zwLCiEeeXhtmVkHi-QA" name="sound">
        <packagedElement xmi:type="uml:Package" xmi:id="_hm1zwbCiEeeXhtmVkHi-QA" name="midi">
          <packagedElement xmi:type="uml:Class" xmi:id="_h2sNoLCiEeeXhtmVkHi-QA" name="Instrument"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_h2tbwLCiEeeXhtmVkHi-QA" name="MidiSystem"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_h2up4bCiEeeXhtmVkHi-QA" name="MidiUnavailableException"/>
          <packagedElement xmi:type="uml:Interface" xmi:id="_h2wfELCiEeeXhtmVkHi-QA" name="Synthesizer"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_h4HJ8LCiEeeXhtmVkHi-QA" name="Sequence"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_h4I_ILCiEeeXhtmVkHi-QA" name="Track"/>
          <packagedElement xmi:type="uml:Interface" xmi:id="_h4K0ULCiEeeXhtmVkHi-QA" name="Sequencer"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_hn8nALCiEeeXhtmVkHi-QA" name="swing">
        <packagedElement xmi:type="uml:Package" xmi:id="_hn8nAbCiEeeXhtmVkHi-QA" name="border">
          <packagedElement xmi:type="uml:Class" xmi:id="_h23z0LCiEeeXhtmVkHi-QA" name="EmptyBorder"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_h25pAbCiEeeXhtmVkHi-QA" name="TitledBorder"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_h20wgLCiEeeXhtmVkHi-QA" name="JFrame"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h22lsbCiEeeXhtmVkHi-QA" name="JPanel"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h263ILCiEeeXhtmVkHi-QA" name="JTextField"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h27eMbCiEeeXhtmVkHi-QA" name="JButton"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h28FQbCiEeeXhtmVkHi-QA" name="JLabel"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h29TYbCiEeeXhtmVkHi-QA" name="JComboBox"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2-hgLCiEeeXhtmVkHi-QA" name="JSplitPane"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h2_voLCiEeeXhtmVkHi-QA" name="JScrollPane"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_h3AWsbCiEeeXhtmVkHi-QA" name="JTextArea"/>
      </packagedElement>
    </packagedElement>
    <profileApplication xmi:id="_gH2tQLCiEeeXhtmVkHi-QA">
      <eAnnotations xmi:id="_gIRkALCiEeeXhtmVkHi-QA" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile-Annotation_2-UMLLabProfile"/>
      </eAnnotations>
      <appliedProfile href="pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile"/>
    </profileApplication>
  </uml:Model>
  <UMLLabProfile:TargetLanguage xmi:id="_gIcjILCiEeeXhtmVkHi-QA" base_Package="_frMmcLCiEeeXhtmVkHi-QA">
    <languageName>java</languageName>
  </UMLLabProfile:TargetLanguage>
  <UMLLabProfile:LegacyStyledElement xmi:id="_hrNWYLCiEeeXhtmVkHi-QA" base_Element="_hrMIQLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_hrZjoLCiEeeXhtmVkHi-QA" base_Element="_hrWgULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_hrbY0LCiEeeXhtmVkHi-QA" base_Element="_hrWgULCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_hrbY0bCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_hrzzULCiEeeXhtmVkHi-QA" base_Element="_hrylMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_hsP4MLCiEeeXhtmVkHi-QA" base_Element="_hsPRILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_hsV-0LCiEeeXhtmVkHi-QA" base_Element="_hsUJoLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_hsa3ULCiEeeXhtmVkHi-QA" base_Element="_hsZpMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_hsbeYLCiEeeXhtmVkHi-QA" base_Element="_hsZpMLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_hsbeYbCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_htnxMLCiEeeXhtmVkHi-QA" base_Element="_htnKILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ht3BwLCiEeeXhtmVkHi-QA" base_Element="_ht2asLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:StyledElement xmi:id="_ht3o0bCiEeeXhtmVkHi-QA" base_Element="_ht3o0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ht8hUbCiEeeXhtmVkHi-QA" base_Element="_ht76QLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_ht9vcLCiEeeXhtmVkHi-QA" base_Element="_ht76QLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_ht-WgLCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ht_koLCiEeeXhtmVkHi-QA" base_Element="_ht-9kLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_huALsLCiEeeXhtmVkHi-QA" base_Element="_ht-9kLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_huALsbCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_huTGoLCiEeeXhtmVkHi-QA" base_Element="_huSfkLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_huWJ8bCiEeeXhtmVkHi-QA" base_Element="_huVi4rCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_huZNQLCiEeeXhtmVkHi-QA" genericsValue="TInstrument" base_Element="_huXYELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_humooLCiEeeXhtmVkHi-QA" genericsValue="TInstrument" base_Element="_hukzcLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h0FlkLCiEeeXhtmVkHi-QA" base_Element="_h0EXcLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h0NhYLCiEeeXhtmVkHi-QA" base_Element="_h0J3ALCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h0OvgLCiEeeXhtmVkHi-QA" base_Element="_h0NhYbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h1LxwLCiEeeXhtmVkHi-QA" base_Element="_h1KjoLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h1M_4LCiEeeXhtmVkHi-QA" base_Element="_h1LxwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h1bCULCiEeeXhtmVkHi-QA" base_Element="_h1abQLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h1bpYLCiEeeXhtmVkHi-QA" base_Element="_h1abQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h1hI8LCiEeeXhtmVkHi-QA" base_Element="_h1gh4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h1iXELCiEeeXhtmVkHi-QA" base_Element="_h1gh4bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h10D4LCiEeeXhtmVkHi-QA" base_Element="_h1y1wLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h10D47CiEeeXhtmVkHi-QA" base_Element="_h1y1wbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h13uQLCiEeeXhtmVkHi-QA" base_Element="_h13HMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h14VUbCiEeeXhtmVkHi-QA" base_Element="_h13HMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h15jcLCiEeeXhtmVkHi-QA" base_Element="_h14VUrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h15jcrCiEeeXhtmVkHi-QA" base_Element="_h14VU7CiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h2ARILCiEeeXhtmVkHi-QA" base_Element="_h1_qELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h2A4MLCiEeeXhtmVkHi-QA" dimensions="1" base_Element="_h1_qEbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:StyledElement xmi:id="_h2Z5wbCiEeeXhtmVkHi-QA" base_Element="_h2ZSsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2bu8LCiEeeXhtmVkHi-QA" base_Element="_h2bH4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2dkILCiEeeXhtmVkHi-QA" base_Element="_h2cWALCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2eyQLCiEeeXhtmVkHi-QA" base_Element="_h2dkIbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2gncLCiEeeXhtmVkHi-QA" base_Element="_h2fZULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2icoLCiEeeXhtmVkHi-QA" base_Element="_h2gncbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2kR0LCiEeeXhtmVkHi-QA" base_Element="_h2icobCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2lf8LCiEeeXhtmVkHi-QA" base_Element="_h2k44LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2s0sLCiEeeXhtmVkHi-QA" base_Element="_h2sNoLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2up4LCiEeeXhtmVkHi-QA" base_Element="_h2tbwLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2v4ALCiEeeXhtmVkHi-QA" base_Element="_h2up4bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2yUQLCiEeeXhtmVkHi-QA" base_Element="_h2wfELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h20JcLCiEeeXhtmVkHi-QA" base_Element="_h2ziYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h22lsLCiEeeXhtmVkHi-QA" base_Element="_h20wgLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h23MwLCiEeeXhtmVkHi-QA" base_Element="_h22lsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h25B8LCiEeeXhtmVkHi-QA" base_Element="_h23z0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h25pALCiEeeXhtmVkHi-QA" base_Element="_h25B8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h26QELCiEeeXhtmVkHi-QA" base_Element="_h25pAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h27eMLCiEeeXhtmVkHi-QA" base_Element="_h263ILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h28FQLCiEeeXhtmVkHi-QA" base_Element="_h27eMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h29TYLCiEeeXhtmVkHi-QA" base_Element="_h28FQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h296cLCiEeeXhtmVkHi-QA" base_Element="_h29TYbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h2_IkLCiEeeXhtmVkHi-QA" base_Element="_h2-hgLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h3AWsLCiEeeXhtmVkHi-QA" base_Element="_h2_voLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h3Bk0LCiEeeXhtmVkHi-QA" base_Element="_h3AWsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h3DaALCiEeeXhtmVkHi-QA" base_Element="_h3CL4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h3EBELCiEeeXhtmVkHi-QA" base_Element="_h3DaAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h3HrcLCiEeeXhtmVkHi-QA" genericsValue="TInstrument" base_Element="_h3GdULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h3bNcLCiEeeXhtmVkHi-QA" base_Element="_h3amYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h3eQwLCiEeeXhtmVkHi-QA" base_Element="_h3dpsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3fe4rCiEeeXhtmVkHi-QA" base_Element="_h3e30LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3gtAbCiEeeXhtmVkHi-QA" base_Element="_h3fe4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3iiMLCiEeeXhtmVkHi-QA" base_Element="_h3hUELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3jJQLCiEeeXhtmVkHi-QA" base_Element="_h3hUErCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h3jJQbCiEeeXhtmVkHi-QA" base_Element="_h3hUELCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h3jwULCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3k-cbCiEeeXhtmVkHi-QA" base_Element="_h3kXYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3llgLCiEeeXhtmVkHi-QA" base_Element="_h3kXYrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h3llgbCiEeeXhtmVkHi-QA" base_Element="_h3kXYLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h3llgrCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3oBwbCiEeeXhtmVkHi-QA" base_Element="_h3nasLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3oo0bCiEeeXhtmVkHi-QA" base_Element="_h3nasrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h3pP4LCiEeeXhtmVkHi-QA" base_Element="_h3nasLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h3pP4bCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3rFEbCiEeeXhtmVkHi-QA" base_Element="_h3qeALCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3sTMLCiEeeXhtmVkHi-QA" dimensions="1" base_Element="_h3qeArCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h3s6QLCiEeeXhtmVkHi-QA" base_Element="_h3qeALCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h3s6QbCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3uIYbCiEeeXhtmVkHi-QA" base_Element="_h3thULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3uvcbCiEeeXhtmVkHi-QA" base_Element="_h3thUrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3v9kbCiEeeXhtmVkHi-QA" base_Element="_h3vWgLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3wkobCiEeeXhtmVkHi-QA" base_Element="_h3vWg7CiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3yZ0LCiEeeXhtmVkHi-QA" base_Element="_h3xLsLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3yZ0rCiEeeXhtmVkHi-QA" base_Element="_h3xywrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h30PALCiEeeXhtmVkHi-QA" base_Element="_h3zA4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h302ELCiEeeXhtmVkHi-QA" base_Element="_h3zn8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h31dILCiEeeXhtmVkHi-QA" base_Element="_h3zA4LCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h31dIbCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h33SULCiEeeXhtmVkHi-QA" base_Element="_h32rQLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h335YLCiEeeXhtmVkHi-QA" base_Element="_h32rQrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h335YbCiEeeXhtmVkHi-QA" base_Element="_h32rQLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h34gcLCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h368sLCiEeeXhtmVkHi-QA" base_Element="_h36VoLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h37jwLCiEeeXhtmVkHi-QA" base_Element="_h36VorCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h38K0LCiEeeXhtmVkHi-QA" base_Element="_h36VoLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h38K0bCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h3-nEbCiEeeXhtmVkHi-QA" base_Element="_h39Y8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h3_1MLCiEeeXhtmVkHi-QA" base_Element="_h3-AAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h3_1MbCiEeeXhtmVkHi-QA" base_Element="_h39Y8LCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h3_1MrCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4BqYbCiEeeXhtmVkHi-QA" base_Element="_h4BDULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h4CRcbCiEeeXhtmVkHi-QA" base_Element="_h4BDUrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h4DfkLCiEeeXhtmVkHi-QA" base_Element="_h4BDULCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h4DfkbCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4FUwLCiEeeXhtmVkHi-QA" base_Element="_h4EtsLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h4F70LCiEeeXhtmVkHi-QA" base_Element="_h4EtsrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Annotations xmi:id="_h4F70bCiEeeXhtmVkHi-QA" base_Element="_h4EtsLCiEeeXhtmVkHi-QA">
    <annotations xmi:id="_h4Gi4LCiEeeXhtmVkHi-QA" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:Reference xmi:id="_h4IYELCiEeeXhtmVkHi-QA" base_Element="_h4HJ8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h4KNQLCiEeeXhtmVkHi-QA" base_Element="_h4I_ILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h4K0UbCiEeeXhtmVkHi-QA" base_Element="_h4K0ULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4Ps0rCiEeeXhtmVkHi-QA" base_Element="_h4PFwLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h4QT4bCiEeeXhtmVkHi-QA" base_Element="_h4Ps0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4SwILCiEeeXhtmVkHi-QA" base_Element="_h4RiALCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h4TXMLCiEeeXhtmVkHi-QA" base_Element="_h4SJELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4VMYLCiEeeXhtmVkHi-QA" base_Element="_h4T-QLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h4VzcLCiEeeXhtmVkHi-QA" base_Element="_h4UlUrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4XBk7CiEeeXhtmVkHi-QA" base_Element="_h4WagLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h4XoobCiEeeXhtmVkHi-QA" base_Element="_h4XBkbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h4Zd0LCiEeeXhtmVkHi-QA" base_Element="_h4Y2wLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h4e9YLCiEeeXhtmVkHi-QA" base_Element="_h4eWULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h4j14LCiEeeXhtmVkHi-QA" base_Element="_h4jO0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4uN8LCiEeeXhtmVkHi-QA" base_Element="_h4tm4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h4u1AbCiEeeXhtmVkHi-QA" genericsValue="ABCInstrument" base_Element="_h4u1ALCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4vcELCiEeeXhtmVkHi-QA" base_Element="_h4u1ALCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4wDILCiEeeXhtmVkHi-QA" base_Element="_h4vcEbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4wqMLCiEeeXhtmVkHi-QA" base_Element="_h4wDIbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h4xRQLCiEeeXhtmVkHi-QA" genericsValue="SequencePlayer" base_Element="_h4wqMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h40UkLCiEeeXhtmVkHi-QA" base_Element="_h4wqMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h407oLCiEeeXhtmVkHi-QA" base_Element="_h40UkbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h42JwLCiEeeXhtmVkHi-QA" base_Element="_h41isLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h42w0bCiEeeXhtmVkHi-QA" base_Element="_h42w0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h43X4rCiEeeXhtmVkHi-QA" base_Element="_h43X4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h44mALCiEeeXhtmVkHi-QA" genericsValue="DecoratorSeqList" base_Element="_h43-8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h45NELCiEeeXhtmVkHi-QA" base_Element="_h43-8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h450ILCiEeeXhtmVkHi-QA" genericsValue="DecoratorSeqList" base_Element="_h45NEbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h47CQLCiEeeXhtmVkHi-QA" base_Element="_h45NEbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h47pULCiEeeXhtmVkHi-QA" base_Element="_h47CQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h48QYLCiEeeXhtmVkHi-QA" base_Element="_h47pUbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h483cbCiEeeXhtmVkHi-QA" base_Element="_h48QYbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4-FkLCiEeeXhtmVkHi-QA" base_Element="_h49egLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4_TsbCiEeeXhtmVkHi-QA" base_Element="_h4-soLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h4_6wrCiEeeXhtmVkHi-QA" base_Element="_h4_6wLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5BI4LCiEeeXhtmVkHi-QA" base_Element="_h5Ah0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5CXALCiEeeXhtmVkHi-QA" base_Element="_h5Bv8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5C-EbCiEeeXhtmVkHi-QA" base_Element="_h5CXAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5EzQbCiEeeXhtmVkHi-QA" base_Element="_h5EMMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5GBYLCiEeeXhtmVkHi-QA" base_Element="_h5FaULCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5GocbCiEeeXhtmVkHi-QA" base_Element="_h5GocLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5HPgbCiEeeXhtmVkHi-QA" base_Element="_h5HPgLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5JEsbCiEeeXhtmVkHi-QA" base_Element="_h5JEsLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5JrwbCiEeeXhtmVkHi-QA" base_Element="_h5JrwLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5KS0bCiEeeXhtmVkHi-QA" base_Element="_h5KS0LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5NWIrCiEeeXhtmVkHi-QA" base_Element="_h5NWILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5N9MrCiEeeXhtmVkHi-QA" dimensions="1" base_Element="_h5N9MLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5OkQLCiEeeXhtmVkHi-QA" base_Element="_h5N9MLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5PLUbCiEeeXhtmVkHi-QA" dimensions="1" base_Element="_h5OkQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5PLU7CiEeeXhtmVkHi-QA" base_Element="_h5OkQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5PyYrCiEeeXhtmVkHi-QA" base_Element="_h5PyYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5S1sLCiEeeXhtmVkHi-QA" base_Element="_h5SOobCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5TcwLCiEeeXhtmVkHi-QA" base_Element="_h5S1sbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5UD0LCiEeeXhtmVkHi-QA" base_Element="_h5TcwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5Uq4LCiEeeXhtmVkHi-QA" base_Element="_h5UD0bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5V5ALCiEeeXhtmVkHi-QA" base_Element="_h5VR8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5WgELCiEeeXhtmVkHi-QA" base_Element="_h5V5AbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5XHILCiEeeXhtmVkHi-QA" base_Element="_h5WgEbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5YVQLCiEeeXhtmVkHi-QA" base_Element="_h5XuMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5Y8UbCiEeeXhtmVkHi-QA" base_Element="_h5YVQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5cmsLCiEeeXhtmVkHi-QA" base_Element="_h5b_obCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5dNwLCiEeeXhtmVkHi-QA" base_Element="_h5cmsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5d00LCiEeeXhtmVkHi-QA" base_Element="_h5dNwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5fC8LCiEeeXhtmVkHi-QA" base_Element="_h5eb4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5fqALCiEeeXhtmVkHi-QA" base_Element="_h5fC8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5fqArCiEeeXhtmVkHi-QA" base_Element="_h5fqAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5gRFLCiEeeXhtmVkHi-QA" base_Element="_h5gRELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5hfMbCiEeeXhtmVkHi-QA" base_Element="_h5hfMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5itULCiEeeXhtmVkHi-QA" base_Element="_h5iGQLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5j7cLCiEeeXhtmVkHi-QA" base_Element="_h5jUYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5kigLCiEeeXhtmVkHi-QA" base_Element="_h5j7cbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5mXsLCiEeeXhtmVkHi-QA" base_Element="_h5lwoLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5m-wLCiEeeXhtmVkHi-QA" base_Element="_h5mXsrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h5oM4LCiEeeXhtmVkHi-QA" genericsValue="Map&lt;String, String>" base_Element="_h5m-wrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5oM4rCiEeeXhtmVkHi-QA" base_Element="_h5m-wrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5pbALCiEeeXhtmVkHi-QA" base_Element="_h5oz8LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h5qCELCiEeeXhtmVkHi-QA" genericsValue="Token" base_Element="_h5pbAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5qpILCiEeeXhtmVkHi-QA" base_Element="_h5pbAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h5seULCiEeeXhtmVkHi-QA" genericsValue="String" base_Element="_h5r3QLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5seUrCiEeeXhtmVkHi-QA" base_Element="_h5r3QLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5tFYLCiEeeXhtmVkHi-QA" base_Element="_h5seU7CiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5tFYrCiEeeXhtmVkHi-QA" base_Element="_h5tFYbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5u6kbCiEeeXhtmVkHi-QA" base_Element="_h5uTgbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5wIsLCiEeeXhtmVkHi-QA" base_Element="_h5u6k7CiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5wvwLCiEeeXhtmVkHi-QA" base_Element="_h5wIsrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5xW0LCiEeeXhtmVkHi-QA" base_Element="_h5wvwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5x94rCiEeeXhtmVkHi-QA" base_Element="_h5x94LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5yk87CiEeeXhtmVkHi-QA" base_Element="_h5yk8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5zMAbCiEeeXhtmVkHi-QA" base_Element="_h5yk8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Array xmi:id="_h5zzEbCiEeeXhtmVkHi-QA" base_Element="_h5zMArCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5zzE7CiEeeXhtmVkHi-QA" base_Element="_h5zMArCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h52PULCiEeeXhtmVkHi-QA" base_Element="_h51oQrCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h53dcLCiEeeXhtmVkHi-QA" base_Element="_h522YLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h54EgbCiEeeXhtmVkHi-QA" base_Element="_h53dcbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h54rkrCiEeeXhtmVkHi-QA" base_Element="_h54rkLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h56gwLCiEeeXhtmVkHi-QA" base_Element="_h555sLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h57H0LCiEeeXhtmVkHi-QA" base_Element="_h56gwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h57u4LCiEeeXhtmVkHi-QA" genericsValue="TInstrument" base_Element="_h57H0bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h58V8LCiEeeXhtmVkHi-QA" base_Element="_h57H0bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h589AbCiEeeXhtmVkHi-QA" base_Element="_h58V8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h59kEbCiEeeXhtmVkHi-QA" base_Element="_h589ArCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h5-LIbCiEeeXhtmVkHi-QA" base_Element="_h59kErCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h6AAULCiEeeXhtmVkHi-QA" base_Element="_h5-yMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h6BOcLCiEeeXhtmVkHi-QA" base_Element="_h6AnYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h6B1gLCiEeeXhtmVkHi-QA" base_Element="_h6BOcbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h6DqsLCiEeeXhtmVkHi-QA" base_Element="_h6CckLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Generics xmi:id="_h6ERwLCiEeeXhtmVkHi-QA" genericsValue="TInstrument" base_Element="_h6DqsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_h6E40LCiEeeXhtmVkHi-QA" base_Element="_h6DqsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8ALcLCiEeeXhtmVkHi-QA" base_Element="_h7_kYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8BZkLCiEeeXhtmVkHi-QA" base_Element="_h8ALcbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8CnsLCiEeeXhtmVkHi-QA" base_Element="_h8BZkbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8DOwLCiEeeXhtmVkHi-QA" base_Element="_h8CnsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8Ec4LCiEeeXhtmVkHi-QA" base_Element="_h8D10LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8FrALCiEeeXhtmVkHi-QA" base_Element="_h8Ec4bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8GSELCiEeeXhtmVkHi-QA" base_Element="_h8FrAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8HgMLCiEeeXhtmVkHi-QA" base_Element="_h8G5ILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8IuULCiEeeXhtmVkHi-QA" base_Element="_h8HgMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8JVYLCiEeeXhtmVkHi-QA" base_Element="_h8IuUbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8KjgLCiEeeXhtmVkHi-QA" base_Element="_h8J8cLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8LxoLCiEeeXhtmVkHi-QA" base_Element="_h8KjgbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8MYsLCiEeeXhtmVkHi-QA" base_Element="_h8LxobCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8Nm0LCiEeeXhtmVkHi-QA" base_Element="_h8M_wLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8O08LCiEeeXhtmVkHi-QA" base_Element="_h8Nm0bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8PcALCiEeeXhtmVkHi-QA" base_Element="_h8O08bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8QDELCiEeeXhtmVkHi-QA" base_Element="_h8PcAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8SfULCiEeeXhtmVkHi-QA" base_Element="_h8QqILCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8TtcLCiEeeXhtmVkHi-QA" base_Element="_h8TGYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8UUgLCiEeeXhtmVkHi-QA" base_Element="_h8TtcbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8VioLCiEeeXhtmVkHi-QA" base_Element="_h8U7kLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8WwwLCiEeeXhtmVkHi-QA" base_Element="_h8ViobCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8XX0LCiEeeXhtmVkHi-QA" base_Element="_h8WwwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8Yl8LCiEeeXhtmVkHi-QA" base_Element="_h8X-4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8ZNALCiEeeXhtmVkHi-QA" base_Element="_h8Yl8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8bCMLCiEeeXhtmVkHi-QA" base_Element="_h8Z0ELCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8cQULCiEeeXhtmVkHi-QA" base_Element="_h8bCMbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8decLCiEeeXhtmVkHi-QA" base_Element="_h8c3YLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8eskLCiEeeXhtmVkHi-QA" base_Element="_h8decbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8ghwLCiEeeXhtmVkHi-QA" base_Element="_h8eskbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8hI0LCiEeeXhtmVkHi-QA" base_Element="_h8ghwbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8i-ALCiEeeXhtmVkHi-QA" base_Element="_h8hv4LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8kMILCiEeeXhtmVkHi-QA" base_Element="_h8i-AbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8mBULCiEeeXhtmVkHi-QA" base_Element="_h8kzMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8nPcLCiEeeXhtmVkHi-QA" base_Element="_h8moYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8odkLCiEeeXhtmVkHi-QA" base_Element="_h8n2gLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8prsLCiEeeXhtmVkHi-QA" base_Element="_h8odkbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8qSwLCiEeeXhtmVkHi-QA" base_Element="_h8prsbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8rg4LCiEeeXhtmVkHi-QA" base_Element="_h8q50LCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8svALCiEeeXhtmVkHi-QA" base_Element="_h8rg4bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8t9ILCiEeeXhtmVkHi-QA" base_Element="_h8svAbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8vLQLCiEeeXhtmVkHi-QA" base_Element="_h8t9IbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8y1oLCiEeeXhtmVkHi-QA" base_Element="_h8vLQbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h80q0LCiEeeXhtmVkHi-QA" base_Element="_h8zcsLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h8148LCiEeeXhtmVkHi-QA" base_Element="_h80q0bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h83uILCiEeeXhtmVkHi-QA" base_Element="_h8148bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h85jULCiEeeXhtmVkHi-QA" base_Element="_h848QLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h86xcLCiEeeXhtmVkHi-QA" base_Element="_h86KYLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h87_kLCiEeeXhtmVkHi-QA" base_Element="_h86xcbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h89NsLCiEeeXhtmVkHi-QA" base_Element="_h88moLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9A4ELCiEeeXhtmVkHi-QA" base_Element="_h890wLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9BfILCiEeeXhtmVkHi-QA" base_Element="_h9A4EbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9DUULCiEeeXhtmVkHi-QA" base_Element="_h9CGMLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9G-sLCiEeeXhtmVkHi-QA" base_Element="_h9D7YLCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9Iz4LCiEeeXhtmVkHi-QA" base_Element="_h9G-sbCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9Ja8LCiEeeXhtmVkHi-QA" base_Element="_h9Iz4bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9KpELCiEeeXhtmVkHi-QA" base_Element="_h9Ja8bCiEeeXhtmVkHi-QA"/>
  <UMLLabProfile:Reference xmi:id="_h9L3MLCiEeeXhtmVkHi-QA" base_Element="_h9LQILCiEeeXhtmVkHi-QA"/>
</xmi:XMI>
